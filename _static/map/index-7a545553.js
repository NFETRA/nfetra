(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();var Cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ea={},Ec={get exports(){return Ea},set exports(s){Ea=s}};/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */(function(s){(function(t,e){s.exports=t.document?e(t,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return e(i)}})(typeof window<"u"?window:Cc,function(t,e){var i=[],n=Object.getPrototypeOf,r=i.slice,a=i.flat?function(o){return i.flat.call(o)}:function(o){return i.concat.apply([],o)},h=i.push,c=i.indexOf,g={},p=g.toString,y=g.hasOwnProperty,C=y.toString,T=C.call(Object),E={},w=function(l){return typeof l=="function"&&typeof l.nodeType!="number"&&typeof l.item!="function"},L=function(l){return l!=null&&l===l.window},I=t.document,P={type:!0,src:!0,nonce:!0,noModule:!0};function k(o,l,u){u=u||I;var f,_,m=u.createElement("script");if(m.text=o,l)for(f in P)_=l[f]||l.getAttribute&&l.getAttribute(f),_&&m.setAttribute(f,_);u.head.appendChild(m).parentNode.removeChild(m)}function N(o){return o==null?o+"":typeof o=="object"||typeof o=="function"?g[p.call(o)]||"object":typeof o}var W="3.7.0",K=/HTML$/i,d=function(o,l){return new d.fn.init(o,l)};d.fn=d.prototype={jquery:W,constructor:d,length:0,toArray:function(){return r.call(this)},get:function(o){return o==null?r.call(this):o<0?this[o+this.length]:this[o]},pushStack:function(o){var l=d.merge(this.constructor(),o);return l.prevObject=this,l},each:function(o){return d.each(this,o)},map:function(o){return this.pushStack(d.map(this,function(l,u){return o.call(l,u,l)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(d.grep(this,function(o,l){return(l+1)%2}))},odd:function(){return this.pushStack(d.grep(this,function(o,l){return l%2}))},eq:function(o){var l=this.length,u=+o+(o<0?l:0);return this.pushStack(u>=0&&u<l?[this[u]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:i.sort,splice:i.splice},d.extend=d.fn.extend=function(){var o,l,u,f,_,m,x=arguments[0]||{},S=1,R=arguments.length,A=!1;for(typeof x=="boolean"&&(A=x,x=arguments[S]||{},S++),typeof x!="object"&&!w(x)&&(x={}),S===R&&(x=this,S--);S<R;S++)if((o=arguments[S])!=null)for(l in o)f=o[l],!(l==="__proto__"||x===f)&&(A&&f&&(d.isPlainObject(f)||(_=Array.isArray(f)))?(u=x[l],_&&!Array.isArray(u)?m=[]:!_&&!d.isPlainObject(u)?m={}:m=u,_=!1,x[l]=d.extend(A,m,f)):f!==void 0&&(x[l]=f));return x},d.extend({expando:"jQuery"+(W+Math.random()).replace(/\D/g,""),isReady:!0,error:function(o){throw new Error(o)},noop:function(){},isPlainObject:function(o){var l,u;return!o||p.call(o)!=="[object Object]"?!1:(l=n(o),l?(u=y.call(l,"constructor")&&l.constructor,typeof u=="function"&&C.call(u)===T):!0)},isEmptyObject:function(o){var l;for(l in o)return!1;return!0},globalEval:function(o,l,u){k(o,{nonce:l&&l.nonce},u)},each:function(o,l){var u,f=0;if($(o))for(u=o.length;f<u&&l.call(o[f],f,o[f])!==!1;f++);else for(f in o)if(l.call(o[f],f,o[f])===!1)break;return o},text:function(o){var l,u="",f=0,_=o.nodeType;if(_){if(_===1||_===9||_===11)return o.textContent;if(_===3||_===4)return o.nodeValue}else for(;l=o[f++];)u+=d.text(l);return u},makeArray:function(o,l){var u=l||[];return o!=null&&($(Object(o))?d.merge(u,typeof o=="string"?[o]:o):h.call(u,o)),u},inArray:function(o,l,u){return l==null?-1:c.call(l,o,u)},isXMLDoc:function(o){var l=o&&o.namespaceURI,u=o&&(o.ownerDocument||o).documentElement;return!K.test(l||u&&u.nodeName||"HTML")},merge:function(o,l){for(var u=+l.length,f=0,_=o.length;f<u;f++)o[_++]=l[f];return o.length=_,o},grep:function(o,l,u){for(var f,_=[],m=0,x=o.length,S=!u;m<x;m++)f=!l(o[m],m),f!==S&&_.push(o[m]);return _},map:function(o,l,u){var f,_,m=0,x=[];if($(o))for(f=o.length;m<f;m++)_=l(o[m],m,u),_!=null&&x.push(_);else for(m in o)_=l(o[m],m,u),_!=null&&x.push(_);return a(x)},guid:1,support:E}),typeof Symbol=="function"&&(d.fn[Symbol.iterator]=i[Symbol.iterator]),d.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(o,l){g["[object "+l+"]"]=l.toLowerCase()});function $(o){var l=!!o&&"length"in o&&o.length,u=N(o);return w(o)||L(o)?!1:u==="array"||l===0||typeof l=="number"&&l>0&&l-1 in o}function B(o,l){return o.nodeName&&o.nodeName.toLowerCase()===l.toLowerCase()}var ot=i.pop,mt=i.sort,dt=i.splice,Z="[\\x20\\t\\r\\n\\f]",At=new RegExp("^"+Z+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Z+"+$","g");d.contains=function(o,l){var u=l&&l.parentNode;return o===u||!!(u&&u.nodeType===1&&(o.contains?o.contains(u):o.compareDocumentPosition&&o.compareDocumentPosition(u)&16))};var Q=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function tt(o,l){return l?o==="\0"?"ï¿½":o.slice(0,-1)+"\\"+o.charCodeAt(o.length-1).toString(16)+" ":"\\"+o}d.escapeSelector=function(o){return(o+"").replace(Q,tt)};var H=I,ht=h;(function(){var o,l,u,f,_,m=ht,x,S,R,A,F,j=d.expando,O=0,X=0,at=gs(),yt=gs(),ut=gs(),Jt=gs(),Yt=function(v,b){return v===b&&(_=!0),0},De="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Fe="(?:\\\\[\\da-fA-F]{1,6}"+Z+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",_t="\\["+Z+"*("+Fe+")(?:"+Z+"*([*^$|!~]?=)"+Z+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Fe+"))|)"+Z+"*\\]",Oi=":("+Fe+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+_t+")*)|.*)\\)|)",Et=new RegExp(Z+"+","g"),Dt=new RegExp("^"+Z+"*,"+Z+"*"),Pn=new RegExp("^"+Z+"*([>+~]|"+Z+")"+Z+"*"),vr=new RegExp(Z+"|>"),ke=new RegExp(Oi),On=new RegExp("^"+Fe+"$"),Ne={ID:new RegExp("^#("+Fe+")"),CLASS:new RegExp("^\\.("+Fe+")"),TAG:new RegExp("^("+Fe+"|[*])"),ATTR:new RegExp("^"+_t),PSEUDO:new RegExp("^"+Oi),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Z+"*(even|odd|(([+-]|)(\\d*)n|)"+Z+"*(?:([+-]|)"+Z+"*(\\d+)|))"+Z+"*\\)|)","i"),bool:new RegExp("^(?:"+De+")$","i"),needsContext:new RegExp("^"+Z+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Z+"*((?:-\\d)?\\d*)"+Z+"*\\)|)(?=[^-]|$)","i")},ui=/^(?:input|select|textarea|button)$/i,di=/^h\d$/i,Ee=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Tr=/[+~]/,Je=new RegExp("\\\\[\\da-fA-F]{1,6}"+Z+"?|\\\\([^\\r\\n\\f])","g"),Qe=function(v,b){var M="0x"+v.slice(1)-65536;return b||(M<0?String.fromCharCode(M+65536):String.fromCharCode(M>>10|55296,M&1023|56320))},fc=function(){fi()},gc=ms(function(v){return v.disabled===!0&&B(v,"fieldset")},{dir:"parentNode",next:"legend"});function pc(){try{return x.activeElement}catch{}}try{m.apply(i=r.call(H.childNodes),H.childNodes),i[H.childNodes.length].nodeType}catch{m={apply:function(b,M){ht.apply(b,r.call(M))},call:function(b){ht.apply(b,r.call(arguments,1))}}}function It(v,b,M,D){var G,z,U,J,V,gt,st,lt=b&&b.ownerDocument,pt=b?b.nodeType:9;if(M=M||[],typeof v!="string"||!v||pt!==1&&pt!==9&&pt!==11)return M;if(!D&&(fi(b),b=b||x,R)){if(pt!==11&&(V=Ee.exec(v)))if(G=V[1]){if(pt===9)if(U=b.getElementById(G)){if(U.id===G)return m.call(M,U),M}else return M;else if(lt&&(U=lt.getElementById(G))&&It.contains(b,U)&&U.id===G)return m.call(M,U),M}else{if(V[2])return m.apply(M,b.getElementsByTagName(v)),M;if((G=V[3])&&b.getElementsByClassName)return m.apply(M,b.getElementsByClassName(G)),M}if(!Jt[v+" "]&&(!A||!A.test(v))){if(st=v,lt=b,pt===1&&(vr.test(v)||Pn.test(v))){for(lt=Tr.test(v)&&Rr(b.parentNode)||b,(lt!=b||!E.scope)&&((J=b.getAttribute("id"))?J=d.escapeSelector(J):b.setAttribute("id",J=j)),gt=ps(v),z=gt.length;z--;)gt[z]=(J?"#"+J:":scope")+" "+_s(gt[z]);st=gt.join(",")}try{return m.apply(M,lt.querySelectorAll(st)),M}catch{Jt(v,!0)}finally{J===j&&b.removeAttribute("id")}}}return Ca(v.replace(At,"$1"),b,M,D)}function gs(){var v=[];function b(M,D){return v.push(M+" ")>l.cacheLength&&delete b[v.shift()],b[M+" "]=D}return b}function Le(v){return v[j]=!0,v}function rn(v){var b=x.createElement("fieldset");try{return!!v(b)}catch{return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function _c(v){return function(b){return B(b,"input")&&b.type===v}}function mc(v){return function(b){return(B(b,"input")||B(b,"button"))&&b.type===v}}function ya(v){return function(b){return"form"in b?b.parentNode&&b.disabled===!1?"label"in b?"label"in b.parentNode?b.parentNode.disabled===v:b.disabled===v:b.isDisabled===v||b.isDisabled!==!v&&gc(b)===v:b.disabled===v:"label"in b?b.disabled===v:!1}}function Di(v){return Le(function(b){return b=+b,Le(function(M,D){for(var G,z=v([],M.length,b),U=z.length;U--;)M[G=z[U]]&&(M[G]=!(D[G]=M[G]))})})}function Rr(v){return v&&typeof v.getElementsByTagName<"u"&&v}function fi(v){var b,M=v?v.ownerDocument||v:H;return M==x||M.nodeType!==9||!M.documentElement||(x=M,S=x.documentElement,R=!d.isXMLDoc(x),F=S.matches||S.webkitMatchesSelector||S.msMatchesSelector,H!=x&&(b=x.defaultView)&&b.top!==b&&b.addEventListener("unload",fc),E.getById=rn(function(D){return S.appendChild(D).id=d.expando,!x.getElementsByName||!x.getElementsByName(d.expando).length}),E.disconnectedMatch=rn(function(D){return F.call(D,"*")}),E.scope=rn(function(){return x.querySelectorAll(":scope")}),E.cssHas=rn(function(){try{return x.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),E.getById?(l.filter.ID=function(D){var G=D.replace(Je,Qe);return function(z){return z.getAttribute("id")===G}},l.find.ID=function(D,G){if(typeof G.getElementById<"u"&&R){var z=G.getElementById(D);return z?[z]:[]}}):(l.filter.ID=function(D){var G=D.replace(Je,Qe);return function(z){var U=typeof z.getAttributeNode<"u"&&z.getAttributeNode("id");return U&&U.value===G}},l.find.ID=function(D,G){if(typeof G.getElementById<"u"&&R){var z,U,J,V=G.getElementById(D);if(V){if(z=V.getAttributeNode("id"),z&&z.value===D)return[V];for(J=G.getElementsByName(D),U=0;V=J[U++];)if(z=V.getAttributeNode("id"),z&&z.value===D)return[V]}return[]}}),l.find.TAG=function(D,G){return typeof G.getElementsByTagName<"u"?G.getElementsByTagName(D):G.querySelectorAll(D)},l.find.CLASS=function(D,G){if(typeof G.getElementsByClassName<"u"&&R)return G.getElementsByClassName(D)},A=[],rn(function(D){var G;S.appendChild(D).innerHTML="<a id='"+j+"' href='' disabled='disabled'></a><select id='"+j+"-\r\\' disabled='disabled'><option selected=''></option></select>",D.querySelectorAll("[selected]").length||A.push("\\["+Z+"*(?:value|"+De+")"),D.querySelectorAll("[id~="+j+"-]").length||A.push("~="),D.querySelectorAll("a#"+j+"+*").length||A.push(".#.+[+~]"),D.querySelectorAll(":checked").length||A.push(":checked"),G=x.createElement("input"),G.setAttribute("type","hidden"),D.appendChild(G).setAttribute("name","D"),S.appendChild(D).disabled=!0,D.querySelectorAll(":disabled").length!==2&&A.push(":enabled",":disabled"),G=x.createElement("input"),G.setAttribute("name",""),D.appendChild(G),D.querySelectorAll("[name='']").length||A.push("\\["+Z+"*name"+Z+"*="+Z+`*(?:''|"")`)}),E.cssHas||A.push(":has"),A=A.length&&new RegExp(A.join("|")),Yt=function(D,G){if(D===G)return _=!0,0;var z=!D.compareDocumentPosition-!G.compareDocumentPosition;return z||(z=(D.ownerDocument||D)==(G.ownerDocument||G)?D.compareDocumentPosition(G):1,z&1||!E.sortDetached&&G.compareDocumentPosition(D)===z?D===x||D.ownerDocument==H&&It.contains(H,D)?-1:G===x||G.ownerDocument==H&&It.contains(H,G)?1:f?c.call(f,D)-c.call(f,G):0:z&4?-1:1)}),x}It.matches=function(v,b){return It(v,null,null,b)},It.matchesSelector=function(v,b){if(fi(v),R&&!Jt[b+" "]&&(!A||!A.test(b)))try{var M=F.call(v,b);if(M||E.disconnectedMatch||v.document&&v.document.nodeType!==11)return M}catch{Jt(b,!0)}return It(b,x,null,[v]).length>0},It.contains=function(v,b){return(v.ownerDocument||v)!=x&&fi(v),d.contains(v,b)},It.attr=function(v,b){(v.ownerDocument||v)!=x&&fi(v);var M=l.attrHandle[b.toLowerCase()],D=M&&y.call(l.attrHandle,b.toLowerCase())?M(v,b,!R):void 0;return D!==void 0?D:v.getAttribute(b)},It.error=function(v){throw new Error("Syntax error, unrecognized expression: "+v)},d.uniqueSort=function(v){var b,M=[],D=0,G=0;if(_=!E.sortStable,f=!E.sortStable&&r.call(v,0),mt.call(v,Yt),_){for(;b=v[G++];)b===v[G]&&(D=M.push(G));for(;D--;)dt.call(v,M[D],1)}return f=null,v},d.fn.uniqueSort=function(){return this.pushStack(d.uniqueSort(r.apply(this)))},l=d.expr={cacheLength:50,createPseudo:Le,match:Ne,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(v){return v[1]=v[1].replace(Je,Qe),v[3]=(v[3]||v[4]||v[5]||"").replace(Je,Qe),v[2]==="~="&&(v[3]=" "+v[3]+" "),v.slice(0,4)},CHILD:function(v){return v[1]=v[1].toLowerCase(),v[1].slice(0,3)==="nth"?(v[3]||It.error(v[0]),v[4]=+(v[4]?v[5]+(v[6]||1):2*(v[3]==="even"||v[3]==="odd")),v[5]=+(v[7]+v[8]||v[3]==="odd")):v[3]&&It.error(v[0]),v},PSEUDO:function(v){var b,M=!v[6]&&v[2];return Ne.CHILD.test(v[0])?null:(v[3]?v[2]=v[4]||v[5]||"":M&&ke.test(M)&&(b=ps(M,!0))&&(b=M.indexOf(")",M.length-b)-M.length)&&(v[0]=v[0].slice(0,b),v[2]=M.slice(0,b)),v.slice(0,3))}},filter:{TAG:function(v){var b=v.replace(Je,Qe).toLowerCase();return v==="*"?function(){return!0}:function(M){return B(M,b)}},CLASS:function(v){var b=at[v+" "];return b||(b=new RegExp("(^|"+Z+")"+v+"("+Z+"|$)"))&&at(v,function(M){return b.test(typeof M.className=="string"&&M.className||typeof M.getAttribute<"u"&&M.getAttribute("class")||"")})},ATTR:function(v,b,M){return function(D){var G=It.attr(D,v);return G==null?b==="!=":b?(G+="",b==="="?G===M:b==="!="?G!==M:b==="^="?M&&G.indexOf(M)===0:b==="*="?M&&G.indexOf(M)>-1:b==="$="?M&&G.slice(-M.length)===M:b==="~="?(" "+G.replace(Et," ")+" ").indexOf(M)>-1:b==="|="?G===M||G.slice(0,M.length+1)===M+"-":!1):!0}},CHILD:function(v,b,M,D,G){var z=v.slice(0,3)!=="nth",U=v.slice(-4)!=="last",J=b==="of-type";return D===1&&G===0?function(V){return!!V.parentNode}:function(V,gt,st){var lt,pt,et,Lt,ue,ie=z!==U?"nextSibling":"previousSibling",ve=V.parentNode,Ge=J&&V.nodeName.toLowerCase(),on=!st&&!J,oe=!1;if(ve){if(z){for(;ie;){for(et=V;et=et[ie];)if(J?B(et,Ge):et.nodeType===1)return!1;ue=ie=v==="only"&&!ue&&"nextSibling"}return!0}if(ue=[U?ve.firstChild:ve.lastChild],U&&on){for(pt=ve[j]||(ve[j]={}),lt=pt[v]||[],Lt=lt[0]===O&&lt[1],oe=Lt&&lt[2],et=Lt&&ve.childNodes[Lt];et=++Lt&&et&&et[ie]||(oe=Lt=0)||ue.pop();)if(et.nodeType===1&&++oe&&et===V){pt[v]=[O,Lt,oe];break}}else if(on&&(pt=V[j]||(V[j]={}),lt=pt[v]||[],Lt=lt[0]===O&&lt[1],oe=Lt),oe===!1)for(;(et=++Lt&&et&&et[ie]||(oe=Lt=0)||ue.pop())&&!((J?B(et,Ge):et.nodeType===1)&&++oe&&(on&&(pt=et[j]||(et[j]={}),pt[v]=[O,oe]),et===V)););return oe-=G,oe===D||oe%D===0&&oe/D>=0}}},PSEUDO:function(v,b){var M,D=l.pseudos[v]||l.setFilters[v.toLowerCase()]||It.error("unsupported pseudo: "+v);return D[j]?D(b):D.length>1?(M=[v,v,"",b],l.setFilters.hasOwnProperty(v.toLowerCase())?Le(function(G,z){for(var U,J=D(G,b),V=J.length;V--;)U=c.call(G,J[V]),G[U]=!(z[U]=J[V])}):function(G){return D(G,0,M)}):D}},pseudos:{not:Le(function(v){var b=[],M=[],D=br(v.replace(At,"$1"));return D[j]?Le(function(G,z,U,J){for(var V,gt=D(G,null,J,[]),st=G.length;st--;)(V=gt[st])&&(G[st]=!(z[st]=V))}):function(G,z,U){return b[0]=G,D(b,null,U,M),b[0]=null,!M.pop()}}),has:Le(function(v){return function(b){return It(v,b).length>0}}),contains:Le(function(v){return v=v.replace(Je,Qe),function(b){return(b.textContent||d.text(b)).indexOf(v)>-1}}),lang:Le(function(v){return On.test(v||"")||It.error("unsupported lang: "+v),v=v.replace(Je,Qe).toLowerCase(),function(b){var M;do if(M=R?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return M=M.toLowerCase(),M===v||M.indexOf(v+"-")===0;while((b=b.parentNode)&&b.nodeType===1);return!1}}),target:function(v){var b=t.location&&t.location.hash;return b&&b.slice(1)===v.id},root:function(v){return v===S},focus:function(v){return v===pc()&&x.hasFocus()&&!!(v.type||v.href||~v.tabIndex)},enabled:ya(!1),disabled:ya(!0),checked:function(v){return B(v,"input")&&!!v.checked||B(v,"option")&&!!v.selected},selected:function(v){return v.parentNode&&v.parentNode.selectedIndex,v.selected===!0},empty:function(v){for(v=v.firstChild;v;v=v.nextSibling)if(v.nodeType<6)return!1;return!0},parent:function(v){return!l.pseudos.empty(v)},header:function(v){return di.test(v.nodeName)},input:function(v){return ui.test(v.nodeName)},button:function(v){return B(v,"input")&&v.type==="button"||B(v,"button")},text:function(v){var b;return B(v,"input")&&v.type==="text"&&((b=v.getAttribute("type"))==null||b.toLowerCase()==="text")},first:Di(function(){return[0]}),last:Di(function(v,b){return[b-1]}),eq:Di(function(v,b,M){return[M<0?M+b:M]}),even:Di(function(v,b){for(var M=0;M<b;M+=2)v.push(M);return v}),odd:Di(function(v,b){for(var M=1;M<b;M+=2)v.push(M);return v}),lt:Di(function(v,b,M){var D;for(M<0?D=M+b:M>b?D=b:D=M;--D>=0;)v.push(D);return v}),gt:Di(function(v,b,M){for(var D=M<0?M+b:M;++D<b;)v.push(D);return v})}},l.pseudos.nth=l.pseudos.eq;for(o in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})l.pseudos[o]=_c(o);for(o in{submit:!0,reset:!0})l.pseudos[o]=mc(o);function xa(){}xa.prototype=l.filters=l.pseudos,l.setFilters=new xa;function ps(v,b){var M,D,G,z,U,J,V,gt=yt[v+" "];if(gt)return b?0:gt.slice(0);for(U=v,J=[],V=l.preFilter;U;){(!M||(D=Dt.exec(U)))&&(D&&(U=U.slice(D[0].length)||U),J.push(G=[])),M=!1,(D=Pn.exec(U))&&(M=D.shift(),G.push({value:M,type:D[0].replace(At," ")}),U=U.slice(M.length));for(z in l.filter)(D=Ne[z].exec(U))&&(!V[z]||(D=V[z](D)))&&(M=D.shift(),G.push({value:M,type:z,matches:D}),U=U.slice(M.length));if(!M)break}return b?U.length:U?It.error(v):yt(v,J).slice(0)}function _s(v){for(var b=0,M=v.length,D="";b<M;b++)D+=v[b].value;return D}function ms(v,b,M){var D=b.dir,G=b.next,z=G||D,U=M&&z==="parentNode",J=X++;return b.first?function(V,gt,st){for(;V=V[D];)if(V.nodeType===1||U)return v(V,gt,st);return!1}:function(V,gt,st){var lt,pt,et=[O,J];if(st){for(;V=V[D];)if((V.nodeType===1||U)&&v(V,gt,st))return!0}else for(;V=V[D];)if(V.nodeType===1||U)if(pt=V[j]||(V[j]={}),G&&B(V,G))V=V[D]||V;else{if((lt=pt[z])&&lt[0]===O&&lt[1]===J)return et[2]=lt[2];if(pt[z]=et,et[2]=v(V,gt,st))return!0}return!1}}function wr(v){return v.length>1?function(b,M,D){for(var G=v.length;G--;)if(!v[G](b,M,D))return!1;return!0}:v[0]}function yc(v,b,M){for(var D=0,G=b.length;D<G;D++)It(v,b[D],M);return M}function ys(v,b,M,D,G){for(var z,U=[],J=0,V=v.length,gt=b!=null;J<V;J++)(z=v[J])&&(!M||M(z,D,G))&&(U.push(z),gt&&b.push(J));return U}function Sr(v,b,M,D,G,z){return D&&!D[j]&&(D=Sr(D)),G&&!G[j]&&(G=Sr(G,z)),Le(function(U,J,V,gt){var st,lt,pt,et,Lt=[],ue=[],ie=J.length,ve=U||yc(b||"*",V.nodeType?[V]:V,[]),Ge=v&&(U||!b)?ys(ve,Lt,v,V,gt):ve;if(M?(et=G||(U?v:ie||D)?[]:J,M(Ge,et,V,gt)):et=Ge,D)for(st=ys(et,ue),D(st,[],V,gt),lt=st.length;lt--;)(pt=st[lt])&&(et[ue[lt]]=!(Ge[ue[lt]]=pt));if(U){if(G||v){if(G){for(st=[],lt=et.length;lt--;)(pt=et[lt])&&st.push(Ge[lt]=pt);G(null,et=[],st,gt)}for(lt=et.length;lt--;)(pt=et[lt])&&(st=G?c.call(U,pt):Lt[lt])>-1&&(U[st]=!(J[st]=pt))}}else et=ys(et===J?et.splice(ie,et.length):et),G?G(null,J,et,gt):m.apply(J,et)})}function Ir(v){for(var b,M,D,G=v.length,z=l.relative[v[0].type],U=z||l.relative[" "],J=z?1:0,V=ms(function(lt){return lt===b},U,!0),gt=ms(function(lt){return c.call(b,lt)>-1},U,!0),st=[function(lt,pt,et){var Lt=!z&&(et||pt!=u)||((b=pt).nodeType?V(lt,pt,et):gt(lt,pt,et));return b=null,Lt}];J<G;J++)if(M=l.relative[v[J].type])st=[ms(wr(st),M)];else{if(M=l.filter[v[J].type].apply(null,v[J].matches),M[j]){for(D=++J;D<G&&!l.relative[v[D].type];D++);return Sr(J>1&&wr(st),J>1&&_s(v.slice(0,J-1).concat({value:v[J-2].type===" "?"*":""})).replace(At,"$1"),M,J<D&&Ir(v.slice(J,D)),D<G&&Ir(v=v.slice(D)),D<G&&_s(v))}st.push(M)}return wr(st)}function xc(v,b){var M=b.length>0,D=v.length>0,G=function(z,U,J,V,gt){var st,lt,pt,et=0,Lt="0",ue=z&&[],ie=[],ve=u,Ge=z||D&&l.find.TAG("*",gt),on=O+=ve==null?1:Math.random()||.1,oe=Ge.length;for(gt&&(u=U==x||U||gt);Lt!==oe&&(st=Ge[Lt])!=null;Lt++){if(D&&st){for(lt=0,!U&&st.ownerDocument!=x&&(fi(st),J=!R);pt=v[lt++];)if(pt(st,U||x,J)){m.call(V,st);break}gt&&(O=on)}M&&((st=!pt&&st)&&et--,z&&ue.push(st))}if(et+=Lt,M&&Lt!==et){for(lt=0;pt=b[lt++];)pt(ue,ie,U,J);if(z){if(et>0)for(;Lt--;)ue[Lt]||ie[Lt]||(ie[Lt]=ot.call(V));ie=ys(ie)}m.apply(V,ie),gt&&!z&&ie.length>0&&et+b.length>1&&d.uniqueSort(V)}return gt&&(O=on,u=ve),ue};return M?Le(G):G}function br(v,b){var M,D=[],G=[],z=ut[v+" "];if(!z){for(b||(b=ps(v)),M=b.length;M--;)z=Ir(b[M]),z[j]?D.push(z):G.push(z);z=ut(v,xc(G,D)),z.selector=v}return z}function Ca(v,b,M,D){var G,z,U,J,V,gt=typeof v=="function"&&v,st=!D&&ps(v=gt.selector||v);if(M=M||[],st.length===1){if(z=st[0]=st[0].slice(0),z.length>2&&(U=z[0]).type==="ID"&&b.nodeType===9&&R&&l.relative[z[1].type]){if(b=(l.find.ID(U.matches[0].replace(Je,Qe),b)||[])[0],b)gt&&(b=b.parentNode);else return M;v=v.slice(z.shift().value.length)}for(G=Ne.needsContext.test(v)?0:z.length;G--&&(U=z[G],!l.relative[J=U.type]);)if((V=l.find[J])&&(D=V(U.matches[0].replace(Je,Qe),Tr.test(z[0].type)&&Rr(b.parentNode)||b))){if(z.splice(G,1),v=D.length&&_s(z),!v)return m.apply(M,D),M;break}}return(gt||br(v,st))(D,b,!R,M,!b||Tr.test(v)&&Rr(b.parentNode)||b),M}E.sortStable=j.split("").sort(Yt).join("")===j,fi(),E.sortDetached=rn(function(v){return v.compareDocumentPosition(x.createElement("fieldset"))&1}),d.find=It,d.expr[":"]=d.expr.pseudos,d.unique=d.uniqueSort,It.compile=br,It.select=Ca,It.setDocument=fi,It.escape=d.escapeSelector,It.getText=d.text,It.isXML=d.isXMLDoc,It.selectors=d.expr,It.support=d.support,It.uniqueSort=d.uniqueSort})();var Tt=function(o,l,u){for(var f=[],_=u!==void 0;(o=o[l])&&o.nodeType!==9;)if(o.nodeType===1){if(_&&d(o).is(u))break;f.push(o)}return f},Rt=function(o,l){for(var u=[];o;o=o.nextSibling)o.nodeType===1&&o!==l&&u.push(o);return u},kt=d.expr.match.needsContext,Y=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Zt(o,l,u){return w(l)?d.grep(o,function(f,_){return!!l.call(f,_,f)!==u}):l.nodeType?d.grep(o,function(f){return f===l!==u}):typeof l!="string"?d.grep(o,function(f){return c.call(l,f)>-1!==u}):d.filter(l,o,u)}d.filter=function(o,l,u){var f=l[0];return u&&(o=":not("+o+")"),l.length===1&&f.nodeType===1?d.find.matchesSelector(f,o)?[f]:[]:d.find.matches(o,d.grep(l,function(_){return _.nodeType===1}))},d.fn.extend({find:function(o){var l,u,f=this.length,_=this;if(typeof o!="string")return this.pushStack(d(o).filter(function(){for(l=0;l<f;l++)if(d.contains(_[l],this))return!0}));for(u=this.pushStack([]),l=0;l<f;l++)d.find(o,_[l],u);return f>1?d.uniqueSort(u):u},filter:function(o){return this.pushStack(Zt(this,o||[],!1))},not:function(o){return this.pushStack(Zt(this,o||[],!0))},is:function(o){return!!Zt(this,typeof o=="string"&&kt.test(o)?d(o):o||[],!1).length}});var Ct,wt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Pe=d.fn.init=function(o,l,u){var f,_;if(!o)return this;if(u=u||Ct,typeof o=="string")if(o[0]==="<"&&o[o.length-1]===">"&&o.length>=3?f=[null,o,null]:f=wt.exec(o),f&&(f[1]||!l))if(f[1]){if(l=l instanceof d?l[0]:l,d.merge(this,d.parseHTML(f[1],l&&l.nodeType?l.ownerDocument||l:I,!0)),Y.test(f[1])&&d.isPlainObject(l))for(f in l)w(this[f])?this[f](l[f]):this.attr(f,l[f]);return this}else return _=I.getElementById(f[2]),_&&(this[0]=_,this.length=1),this;else return!l||l.jquery?(l||u).find(o):this.constructor(l).find(o);else{if(o.nodeType)return this[0]=o,this.length=1,this;if(w(o))return u.ready!==void 0?u.ready(o):o(d)}return d.makeArray(o,this)};Pe.prototype=d.fn,Ct=d(I);var me=/^(?:parents|prev(?:Until|All))/,Xt={children:!0,contents:!0,next:!0,prev:!0};d.fn.extend({has:function(o){var l=d(o,this),u=l.length;return this.filter(function(){for(var f=0;f<u;f++)if(d.contains(this,l[f]))return!0})},closest:function(o,l){var u,f=0,_=this.length,m=[],x=typeof o!="string"&&d(o);if(!kt.test(o)){for(;f<_;f++)for(u=this[f];u&&u!==l;u=u.parentNode)if(u.nodeType<11&&(x?x.index(u)>-1:u.nodeType===1&&d.find.matchesSelector(u,o))){m.push(u);break}}return this.pushStack(m.length>1?d.uniqueSort(m):m)},index:function(o){return o?typeof o=="string"?c.call(d(o),this[0]):c.call(this,o.jquery?o[0]:o):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(o,l){return this.pushStack(d.uniqueSort(d.merge(this.get(),d(o,l))))},addBack:function(o){return this.add(o==null?this.prevObject:this.prevObject.filter(o))}});function ye(o,l){for(;(o=o[l])&&o.nodeType!==1;);return o}d.each({parent:function(o){var l=o.parentNode;return l&&l.nodeType!==11?l:null},parents:function(o){return Tt(o,"parentNode")},parentsUntil:function(o,l,u){return Tt(o,"parentNode",u)},next:function(o){return ye(o,"nextSibling")},prev:function(o){return ye(o,"previousSibling")},nextAll:function(o){return Tt(o,"nextSibling")},prevAll:function(o){return Tt(o,"previousSibling")},nextUntil:function(o,l,u){return Tt(o,"nextSibling",u)},prevUntil:function(o,l,u){return Tt(o,"previousSibling",u)},siblings:function(o){return Rt((o.parentNode||{}).firstChild,o)},children:function(o){return Rt(o.firstChild)},contents:function(o){return o.contentDocument!=null&&n(o.contentDocument)?o.contentDocument:(B(o,"template")&&(o=o.content||o),d.merge([],o.childNodes))}},function(o,l){d.fn[o]=function(u,f){var _=d.map(this,l,u);return o.slice(-5)!=="Until"&&(f=u),f&&typeof f=="string"&&(_=d.filter(f,_)),this.length>1&&(Xt[o]||d.uniqueSort(_),me.test(o)&&_.reverse()),this.pushStack(_)}});var qt=/[^\x20\t\r\n\f]+/g;function Qi(o){var l={};return d.each(o.match(qt)||[],function(u,f){l[f]=!0}),l}d.Callbacks=function(o){o=typeof o=="string"?Qi(o):d.extend({},o);var l,u,f,_,m=[],x=[],S=-1,R=function(){for(_=_||o.once,f=l=!0;x.length;S=-1)for(u=x.shift();++S<m.length;)m[S].apply(u[0],u[1])===!1&&o.stopOnFalse&&(S=m.length,u=!1);o.memory||(u=!1),l=!1,_&&(u?m=[]:m="")},A={add:function(){return m&&(u&&!l&&(S=m.length-1,x.push(u)),function F(j){d.each(j,function(O,X){w(X)?(!o.unique||!A.has(X))&&m.push(X):X&&X.length&&N(X)!=="string"&&F(X)})}(arguments),u&&!l&&R()),this},remove:function(){return d.each(arguments,function(F,j){for(var O;(O=d.inArray(j,m,O))>-1;)m.splice(O,1),O<=S&&S--}),this},has:function(F){return F?d.inArray(F,m)>-1:m.length>0},empty:function(){return m&&(m=[]),this},disable:function(){return _=x=[],m=u="",this},disabled:function(){return!m},lock:function(){return _=x=[],!u&&!l&&(m=u=""),this},locked:function(){return!!_},fireWith:function(F,j){return _||(j=j||[],j=[F,j.slice?j.slice():j],x.push(j),l||R()),this},fire:function(){return A.fireWith(this,arguments),this},fired:function(){return!!f}};return A};function ge(o){return o}function Ue(o){throw o}function Te(o,l,u,f){var _;try{o&&w(_=o.promise)?_.call(o).done(l).fail(u):o&&w(_=o.then)?_.call(o,l,u):l.apply(void 0,[o].slice(f))}catch(m){u.apply(void 0,[m])}}d.extend({Deferred:function(o){var l=[["notify","progress",d.Callbacks("memory"),d.Callbacks("memory"),2],["resolve","done",d.Callbacks("once memory"),d.Callbacks("once memory"),0,"resolved"],["reject","fail",d.Callbacks("once memory"),d.Callbacks("once memory"),1,"rejected"]],u="pending",f={state:function(){return u},always:function(){return _.done(arguments).fail(arguments),this},catch:function(m){return f.then(null,m)},pipe:function(){var m=arguments;return d.Deferred(function(x){d.each(l,function(S,R){var A=w(m[R[4]])&&m[R[4]];_[R[1]](function(){var F=A&&A.apply(this,arguments);F&&w(F.promise)?F.promise().progress(x.notify).done(x.resolve).fail(x.reject):x[R[0]+"With"](this,A?[F]:arguments)})}),m=null}).promise()},then:function(m,x,S){var R=0;function A(F,j,O,X){return function(){var at=this,yt=arguments,ut=function(){var Yt,De;if(!(F<R)){if(Yt=O.apply(at,yt),Yt===j.promise())throw new TypeError("Thenable self-resolution");De=Yt&&(typeof Yt=="object"||typeof Yt=="function")&&Yt.then,w(De)?X?De.call(Yt,A(R,j,ge,X),A(R,j,Ue,X)):(R++,De.call(Yt,A(R,j,ge,X),A(R,j,Ue,X),A(R,j,ge,j.notifyWith))):(O!==ge&&(at=void 0,yt=[Yt]),(X||j.resolveWith)(at,yt))}},Jt=X?ut:function(){try{ut()}catch(Yt){d.Deferred.exceptionHook&&d.Deferred.exceptionHook(Yt,Jt.error),F+1>=R&&(O!==Ue&&(at=void 0,yt=[Yt]),j.rejectWith(at,yt))}};F?Jt():(d.Deferred.getErrorHook?Jt.error=d.Deferred.getErrorHook():d.Deferred.getStackHook&&(Jt.error=d.Deferred.getStackHook()),t.setTimeout(Jt))}}return d.Deferred(function(F){l[0][3].add(A(0,F,w(S)?S:ge,F.notifyWith)),l[1][3].add(A(0,F,w(m)?m:ge)),l[2][3].add(A(0,F,w(x)?x:Ue))}).promise()},promise:function(m){return m!=null?d.extend(m,f):f}},_={};return d.each(l,function(m,x){var S=x[2],R=x[5];f[x[1]]=S.add,R&&S.add(function(){u=R},l[3-m][2].disable,l[3-m][3].disable,l[0][2].lock,l[0][3].lock),S.add(x[3].fire),_[x[0]]=function(){return _[x[0]+"With"](this===_?void 0:this,arguments),this},_[x[0]+"With"]=S.fireWith}),f.promise(_),o&&o.call(_,_),_},when:function(o){var l=arguments.length,u=l,f=Array(u),_=r.call(arguments),m=d.Deferred(),x=function(S){return function(R){f[S]=this,_[S]=arguments.length>1?r.call(arguments):R,--l||m.resolveWith(f,_)}};if(l<=1&&(Te(o,m.done(x(u)).resolve,m.reject,!l),m.state()==="pending"||w(_[u]&&_[u].then)))return m.then();for(;u--;)Te(_[u],x(u),m.reject);return m.promise()}});var Ii=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;d.Deferred.exceptionHook=function(o,l){t.console&&t.console.warn&&o&&Ii.test(o.name)&&t.console.warn("jQuery.Deferred exception: "+o.message,o.stack,l)},d.readyException=function(o){t.setTimeout(function(){throw o})};var xe=d.Deferred();d.fn.ready=function(o){return xe.then(o).catch(function(l){d.readyException(l)}),this},d.extend({isReady:!1,readyWait:1,ready:function(o){(o===!0?--d.readyWait:d.isReady)||(d.isReady=!0,!(o!==!0&&--d.readyWait>0)&&xe.resolveWith(I,[d]))}}),d.ready.then=xe.then;function Ve(){I.removeEventListener("DOMContentLoaded",Ve),t.removeEventListener("load",Ve),d.ready()}I.readyState==="complete"||I.readyState!=="loading"&&!I.documentElement.doScroll?t.setTimeout(d.ready):(I.addEventListener("DOMContentLoaded",Ve),t.addEventListener("load",Ve));var le=function(o,l,u,f,_,m,x){var S=0,R=o.length,A=u==null;if(N(u)==="object"){_=!0;for(S in u)le(o,l,S,u[S],!0,m,x)}else if(f!==void 0&&(_=!0,w(f)||(x=!0),A&&(x?(l.call(o,f),l=null):(A=l,l=function(F,j,O){return A.call(d(F),O)})),l))for(;S<R;S++)l(o[S],u,x?f:f.call(o[S],S,l(o[S],u)));return _?o:A?l.call(o):R?l(o[0],u):m},tn=/^-ms-/,li=/-([a-z])/g;function Rn(o,l){return l.toUpperCase()}function Mt(o){return o.replace(tn,"ms-").replace(li,Rn)}var Ht=function(o){return o.nodeType===1||o.nodeType===9||!+o.nodeType};function $t(){this.expando=d.expando+$t.uid++}$t.uid=1,$t.prototype={cache:function(o){var l=o[this.expando];return l||(l={},Ht(o)&&(o.nodeType?o[this.expando]=l:Object.defineProperty(o,this.expando,{value:l,configurable:!0}))),l},set:function(o,l,u){var f,_=this.cache(o);if(typeof l=="string")_[Mt(l)]=u;else for(f in l)_[Mt(f)]=l[f];return _},get:function(o,l){return l===void 0?this.cache(o):o[this.expando]&&o[this.expando][Mt(l)]},access:function(o,l,u){return l===void 0||l&&typeof l=="string"&&u===void 0?this.get(o,l):(this.set(o,l,u),u!==void 0?u:l)},remove:function(o,l){var u,f=o[this.expando];if(f!==void 0){if(l!==void 0)for(Array.isArray(l)?l=l.map(Mt):(l=Mt(l),l=l in f?[l]:l.match(qt)||[]),u=l.length;u--;)delete f[l[u]];(l===void 0||d.isEmptyObject(f))&&(o.nodeType?o[this.expando]=void 0:delete o[this.expando])}},hasData:function(o){var l=o[this.expando];return l!==void 0&&!d.isEmptyObject(l)}};var q=new $t,Nt=new $t,Ke=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Oe=/[A-Z]/g;function hi(o){return o==="true"?!0:o==="false"?!1:o==="null"?null:o===+o+""?+o:Ke.test(o)?JSON.parse(o):o}function bi(o,l,u){var f;if(u===void 0&&o.nodeType===1)if(f="data-"+l.replace(Oe,"-$&").toLowerCase(),u=o.getAttribute(f),typeof u=="string"){try{u=hi(u)}catch{}Nt.set(o,l,u)}else u=void 0;return u}d.extend({hasData:function(o){return Nt.hasData(o)||q.hasData(o)},data:function(o,l,u){return Nt.access(o,l,u)},removeData:function(o,l){Nt.remove(o,l)},_data:function(o,l,u){return q.access(o,l,u)},_removeData:function(o,l){q.remove(o,l)}}),d.fn.extend({data:function(o,l){var u,f,_,m=this[0],x=m&&m.attributes;if(o===void 0){if(this.length&&(_=Nt.get(m),m.nodeType===1&&!q.get(m,"hasDataAttrs"))){for(u=x.length;u--;)x[u]&&(f=x[u].name,f.indexOf("data-")===0&&(f=Mt(f.slice(5)),bi(m,f,_[f])));q.set(m,"hasDataAttrs",!0)}return _}return typeof o=="object"?this.each(function(){Nt.set(this,o)}):le(this,function(S){var R;if(m&&S===void 0)return R=Nt.get(m,o),R!==void 0||(R=bi(m,o),R!==void 0)?R:void 0;this.each(function(){Nt.set(this,o,S)})},null,l,arguments.length>1,null,!0)},removeData:function(o){return this.each(function(){Nt.remove(this,o)})}}),d.extend({queue:function(o,l,u){var f;if(o)return l=(l||"fx")+"queue",f=q.get(o,l),u&&(!f||Array.isArray(u)?f=q.access(o,l,d.makeArray(u)):f.push(u)),f||[]},dequeue:function(o,l){l=l||"fx";var u=d.queue(o,l),f=u.length,_=u.shift(),m=d._queueHooks(o,l),x=function(){d.dequeue(o,l)};_==="inprogress"&&(_=u.shift(),f--),_&&(l==="fx"&&u.unshift("inprogress"),delete m.stop,_.call(o,x,m)),!f&&m&&m.empty.fire()},_queueHooks:function(o,l){var u=l+"queueHooks";return q.get(o,u)||q.access(o,u,{empty:d.Callbacks("once memory").add(function(){q.remove(o,[l+"queue",u])})})}}),d.fn.extend({queue:function(o,l){var u=2;return typeof o!="string"&&(l=o,o="fx",u--),arguments.length<u?d.queue(this[0],o):l===void 0?this:this.each(function(){var f=d.queue(this,o,l);d._queueHooks(this,o),o==="fx"&&f[0]!=="inprogress"&&d.dequeue(this,o)})},dequeue:function(o){return this.each(function(){d.dequeue(this,o)})},clearQueue:function(o){return this.queue(o||"fx",[])},promise:function(o,l){var u,f=1,_=d.Deferred(),m=this,x=this.length,S=function(){--f||_.resolveWith(m,[m])};for(typeof o!="string"&&(l=o,o=void 0),o=o||"fx";x--;)u=q.get(m[x],o+"queueHooks"),u&&u.empty&&(f++,u.empty.add(S));return S(),_.promise(l)}});var Ut=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ze=new RegExp("^(?:([+-])=|)("+Ut+")([a-z%]*)$","i"),Re=["Top","Right","Bottom","Left"],qe=I.documentElement,$e=function(o){return d.contains(o.ownerDocument,o)},cs={composed:!0};qe.getRootNode&&($e=function(o){return d.contains(o.ownerDocument,o)||o.getRootNode(cs)===o.ownerDocument});var ci=function(o,l){return o=l||o,o.style.display==="none"||o.style.display===""&&$e(o)&&d.css(o,"display")==="none"};function wn(o,l,u,f){var _,m,x=20,S=f?function(){return f.cur()}:function(){return d.css(o,l,"")},R=S(),A=u&&u[3]||(d.cssNumber[l]?"":"px"),F=o.nodeType&&(d.cssNumber[l]||A!=="px"&&+R)&&Ze.exec(d.css(o,l));if(F&&F[3]!==A){for(R=R/2,A=A||F[3],F=+R||1;x--;)d.style(o,l,F+A),(1-m)*(1-(m=S()/R||.5))<=0&&(x=0),F=F/m;F=F*2,d.style(o,l,F+A),u=u||[]}return u&&(F=+F||+R||0,_=u[1]?F+(u[1]+1)*u[2]:+u[2],f&&(f.unit=A,f.start=F,f.end=_)),_}var en={};function Li(o){var l,u=o.ownerDocument,f=o.nodeName,_=en[f];return _||(l=u.body.appendChild(u.createElement(f)),_=d.css(l,"display"),l.parentNode.removeChild(l),_==="none"&&(_="block"),en[f]=_,_)}function Ce(o,l){for(var u,f,_=[],m=0,x=o.length;m<x;m++)f=o[m],f.style&&(u=f.style.display,l?(u==="none"&&(_[m]=q.get(f,"display")||null,_[m]||(f.style.display="")),f.style.display===""&&ci(f)&&(_[m]=Li(f))):u!=="none"&&(_[m]="none",q.set(f,"display",u)));for(m=0;m<x;m++)_[m]!=null&&(o[m].style.display=_[m]);return o}d.fn.extend({show:function(){return Ce(this,!0)},hide:function(){return Ce(this)},toggle:function(o){return typeof o=="boolean"?o?this.show():this.hide():this.each(function(){ci(this)?d(this).show():d(this).hide()})}});var we=/^(?:checkbox|radio)$/i,Sn=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,In=/^$|^module$|\/(?:java|ecma)script/i;(function(){var o=I.createDocumentFragment(),l=o.appendChild(I.createElement("div")),u=I.createElement("input");u.setAttribute("type","radio"),u.setAttribute("checked","checked"),u.setAttribute("name","t"),l.appendChild(u),E.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,l.innerHTML="<textarea>x</textarea>",E.noCloneChecked=!!l.cloneNode(!0).lastChild.defaultValue,l.innerHTML="<option></option>",E.option=!!l.lastChild})();var bt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};bt.tbody=bt.tfoot=bt.colgroup=bt.caption=bt.thead,bt.th=bt.td,E.option||(bt.optgroup=bt.option=[1,"<select multiple='multiple'>","</select>"]);function Gt(o,l){var u;return typeof o.getElementsByTagName<"u"?u=o.getElementsByTagName(l||"*"):typeof o.querySelectorAll<"u"?u=o.querySelectorAll(l||"*"):u=[],l===void 0||l&&B(o,l)?d.merge([o],u):u}function Qt(o,l){for(var u=0,f=o.length;u<f;u++)q.set(o[u],"globalEval",!l||q.get(l[u],"globalEval"))}var Se=/<|&#?\w+;/;function te(o,l,u,f,_){for(var m,x,S,R,A,F,j=l.createDocumentFragment(),O=[],X=0,at=o.length;X<at;X++)if(m=o[X],m||m===0)if(N(m)==="object")d.merge(O,m.nodeType?[m]:m);else if(!Se.test(m))O.push(l.createTextNode(m));else{for(x=x||j.appendChild(l.createElement("div")),S=(Sn.exec(m)||["",""])[1].toLowerCase(),R=bt[S]||bt._default,x.innerHTML=R[1]+d.htmlPrefilter(m)+R[2],F=R[0];F--;)x=x.lastChild;d.merge(O,x.childNodes),x=j.firstChild,x.textContent=""}for(j.textContent="",X=0;m=O[X++];){if(f&&d.inArray(m,f)>-1){_&&_.push(m);continue}if(A=$e(m),x=Gt(j.appendChild(m),"script"),A&&Qt(x),u)for(F=0;m=x[F++];)In.test(m.type||"")&&u.push(m)}return j}var Ai=/^([^.]*)(?:\.(.+)|)/;function Ie(){return!0}function jt(){return!1}function ee(o,l,u,f,_,m){var x,S;if(typeof l=="object"){typeof u!="string"&&(f=f||u,u=void 0);for(S in l)ee(o,S,u,f,l[S],m);return o}if(f==null&&_==null?(_=u,f=u=void 0):_==null&&(typeof u=="string"?(_=f,f=void 0):(_=f,f=u,u=void 0)),_===!1)_=jt;else if(!_)return o;return m===1&&(x=_,_=function(R){return d().off(R),x.apply(this,arguments)},_.guid=x.guid||(x.guid=d.guid++)),o.each(function(){d.event.add(this,l,_,f,u)})}d.event={global:{},add:function(o,l,u,f,_){var m,x,S,R,A,F,j,O,X,at,yt,ut=q.get(o);if(Ht(o))for(u.handler&&(m=u,u=m.handler,_=m.selector),_&&d.find.matchesSelector(qe,_),u.guid||(u.guid=d.guid++),(R=ut.events)||(R=ut.events=Object.create(null)),(x=ut.handle)||(x=ut.handle=function(Jt){return typeof d<"u"&&d.event.triggered!==Jt.type?d.event.dispatch.apply(o,arguments):void 0}),l=(l||"").match(qt)||[""],A=l.length;A--;)S=Ai.exec(l[A])||[],X=yt=S[1],at=(S[2]||"").split(".").sort(),X&&(j=d.event.special[X]||{},X=(_?j.delegateType:j.bindType)||X,j=d.event.special[X]||{},F=d.extend({type:X,origType:yt,data:f,handler:u,guid:u.guid,selector:_,needsContext:_&&d.expr.match.needsContext.test(_),namespace:at.join(".")},m),(O=R[X])||(O=R[X]=[],O.delegateCount=0,(!j.setup||j.setup.call(o,f,at,x)===!1)&&o.addEventListener&&o.addEventListener(X,x)),j.add&&(j.add.call(o,F),F.handler.guid||(F.handler.guid=u.guid)),_?O.splice(O.delegateCount++,0,F):O.push(F),d.event.global[X]=!0)},remove:function(o,l,u,f,_){var m,x,S,R,A,F,j,O,X,at,yt,ut=q.hasData(o)&&q.get(o);if(!(!ut||!(R=ut.events))){for(l=(l||"").match(qt)||[""],A=l.length;A--;){if(S=Ai.exec(l[A])||[],X=yt=S[1],at=(S[2]||"").split(".").sort(),!X){for(X in R)d.event.remove(o,X+l[A],u,f,!0);continue}for(j=d.event.special[X]||{},X=(f?j.delegateType:j.bindType)||X,O=R[X]||[],S=S[2]&&new RegExp("(^|\\.)"+at.join("\\.(?:.*\\.|)")+"(\\.|$)"),x=m=O.length;m--;)F=O[m],(_||yt===F.origType)&&(!u||u.guid===F.guid)&&(!S||S.test(F.namespace))&&(!f||f===F.selector||f==="**"&&F.selector)&&(O.splice(m,1),F.selector&&O.delegateCount--,j.remove&&j.remove.call(o,F));x&&!O.length&&((!j.teardown||j.teardown.call(o,at,ut.handle)===!1)&&d.removeEvent(o,X,ut.handle),delete R[X])}d.isEmptyObject(R)&&q.remove(o,"handle events")}},dispatch:function(o){var l,u,f,_,m,x,S=new Array(arguments.length),R=d.event.fix(o),A=(q.get(this,"events")||Object.create(null))[R.type]||[],F=d.event.special[R.type]||{};for(S[0]=R,l=1;l<arguments.length;l++)S[l]=arguments[l];if(R.delegateTarget=this,!(F.preDispatch&&F.preDispatch.call(this,R)===!1)){for(x=d.event.handlers.call(this,R,A),l=0;(_=x[l++])&&!R.isPropagationStopped();)for(R.currentTarget=_.elem,u=0;(m=_.handlers[u++])&&!R.isImmediatePropagationStopped();)(!R.rnamespace||m.namespace===!1||R.rnamespace.test(m.namespace))&&(R.handleObj=m,R.data=m.data,f=((d.event.special[m.origType]||{}).handle||m.handler).apply(_.elem,S),f!==void 0&&(R.result=f)===!1&&(R.preventDefault(),R.stopPropagation()));return F.postDispatch&&F.postDispatch.call(this,R),R.result}},handlers:function(o,l){var u,f,_,m,x,S=[],R=l.delegateCount,A=o.target;if(R&&A.nodeType&&!(o.type==="click"&&o.button>=1)){for(;A!==this;A=A.parentNode||this)if(A.nodeType===1&&!(o.type==="click"&&A.disabled===!0)){for(m=[],x={},u=0;u<R;u++)f=l[u],_=f.selector+" ",x[_]===void 0&&(x[_]=f.needsContext?d(_,this).index(A)>-1:d.find(_,this,null,[A]).length),x[_]&&m.push(f);m.length&&S.push({elem:A,handlers:m})}}return A=this,R<l.length&&S.push({elem:A,handlers:l.slice(R)}),S},addProp:function(o,l){Object.defineProperty(d.Event.prototype,o,{enumerable:!0,configurable:!0,get:w(l)?function(){if(this.originalEvent)return l(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[o]},set:function(u){Object.defineProperty(this,o,{enumerable:!0,configurable:!0,writable:!0,value:u})}})},fix:function(o){return o[d.expando]?o:new d.Event(o)},special:{load:{noBubble:!0},click:{setup:function(o){var l=this||o;return we.test(l.type)&&l.click&&B(l,"input")&&he(l,"click",!0),!1},trigger:function(o){var l=this||o;return we.test(l.type)&&l.click&&B(l,"input")&&he(l,"click"),!0},_default:function(o){var l=o.target;return we.test(l.type)&&l.click&&B(l,"input")&&q.get(l,"click")||B(l,"a")}},beforeunload:{postDispatch:function(o){o.result!==void 0&&o.originalEvent&&(o.originalEvent.returnValue=o.result)}}}};function he(o,l,u){if(!u){q.get(o,l)===void 0&&d.event.add(o,l,Ie);return}q.set(o,l,!1),d.event.add(o,l,{namespace:!1,handler:function(f){var _,m=q.get(this,l);if(f.isTrigger&1&&this[l]){if(m)(d.event.special[l]||{}).delegateType&&f.stopPropagation();else if(m=r.call(arguments),q.set(this,l,m),this[l](),_=q.get(this,l),q.set(this,l,!1),m!==_)return f.stopImmediatePropagation(),f.preventDefault(),_}else m&&(q.set(this,l,d.event.trigger(m[0],m.slice(1),this)),f.stopPropagation(),f.isImmediatePropagationStopped=Ie)}})}d.removeEvent=function(o,l,u){o.removeEventListener&&o.removeEventListener(l,u)},d.Event=function(o,l){if(!(this instanceof d.Event))return new d.Event(o,l);o&&o.type?(this.originalEvent=o,this.type=o.type,this.isDefaultPrevented=o.defaultPrevented||o.defaultPrevented===void 0&&o.returnValue===!1?Ie:jt,this.target=o.target&&o.target.nodeType===3?o.target.parentNode:o.target,this.currentTarget=o.currentTarget,this.relatedTarget=o.relatedTarget):this.type=o,l&&d.extend(this,l),this.timeStamp=o&&o.timeStamp||Date.now(),this[d.expando]=!0},d.Event.prototype={constructor:d.Event,isDefaultPrevented:jt,isPropagationStopped:jt,isImmediatePropagationStopped:jt,isSimulated:!1,preventDefault:function(){var o=this.originalEvent;this.isDefaultPrevented=Ie,o&&!this.isSimulated&&o.preventDefault()},stopPropagation:function(){var o=this.originalEvent;this.isPropagationStopped=Ie,o&&!this.isSimulated&&o.stopPropagation()},stopImmediatePropagation:function(){var o=this.originalEvent;this.isImmediatePropagationStopped=Ie,o&&!this.isSimulated&&o.stopImmediatePropagation(),this.stopPropagation()}},d.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},d.event.addProp),d.each({focus:"focusin",blur:"focusout"},function(o,l){function u(f){if(I.documentMode){var _=q.get(this,"handle"),m=d.event.fix(f);m.type=f.type==="focusin"?"focus":"blur",m.isSimulated=!0,_(f),m.target===m.currentTarget&&_(m)}else d.event.simulate(l,f.target,d.event.fix(f))}d.event.special[o]={setup:function(){var f;if(he(this,o,!0),I.documentMode)f=q.get(this,l),f||this.addEventListener(l,u),q.set(this,l,(f||0)+1);else return!1},trigger:function(){return he(this,o),!0},teardown:function(){var f;if(I.documentMode)f=q.get(this,l)-1,f?q.set(this,l,f):(this.removeEventListener(l,u),q.remove(this,l));else return!1},_default:function(f){return q.get(f.target,o)},delegateType:l},d.event.special[l]={setup:function(){var f=this.ownerDocument||this.document||this,_=I.documentMode?this:f,m=q.get(_,l);m||(I.documentMode?this.addEventListener(l,u):f.addEventListener(o,u,!0)),q.set(_,l,(m||0)+1)},teardown:function(){var f=this.ownerDocument||this.document||this,_=I.documentMode?this:f,m=q.get(_,l)-1;m?q.set(_,l,m):(I.documentMode?this.removeEventListener(l,u):f.removeEventListener(o,u,!0),q.remove(_,l))}}}),d.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(o,l){d.event.special[o]={delegateType:l,bindType:l,handle:function(u){var f,_=this,m=u.relatedTarget,x=u.handleObj;return(!m||m!==_&&!d.contains(_,m))&&(u.type=x.origType,f=x.handler.apply(this,arguments),u.type=l),f}}}),d.fn.extend({on:function(o,l,u,f){return ee(this,o,l,u,f)},one:function(o,l,u,f){return ee(this,o,l,u,f,1)},off:function(o,l,u){var f,_;if(o&&o.preventDefault&&o.handleObj)return f=o.handleObj,d(o.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if(typeof o=="object"){for(_ in o)this.off(_,l,o[_]);return this}return(l===!1||typeof l=="function")&&(u=l,l=void 0),u===!1&&(u=jt),this.each(function(){d.event.remove(this,o,u,l)})}});var hr=/<script|<style|<link/i,Fh=/checked\s*(?:[^=]|=\s*.checked.)/i,kh=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Zo(o,l){return B(o,"table")&&B(l.nodeType!==11?l:l.firstChild,"tr")&&d(o).children("tbody")[0]||o}function Nh(o){return o.type=(o.getAttribute("type")!==null)+"/"+o.type,o}function Gh(o){return(o.type||"").slice(0,5)==="true/"?o.type=o.type.slice(5):o.removeAttribute("type"),o}function qo(o,l){var u,f,_,m,x,S,R;if(l.nodeType===1){if(q.hasData(o)&&(m=q.get(o),R=m.events,R)){q.remove(l,"handle events");for(_ in R)for(u=0,f=R[_].length;u<f;u++)d.event.add(l,_,R[_][u])}Nt.hasData(o)&&(x=Nt.access(o),S=d.extend({},x),Nt.set(l,S))}}function jh(o,l){var u=l.nodeName.toLowerCase();u==="input"&&we.test(o.type)?l.checked=o.checked:(u==="input"||u==="textarea")&&(l.defaultValue=o.defaultValue)}function nn(o,l,u,f){l=a(l);var _,m,x,S,R,A,F=0,j=o.length,O=j-1,X=l[0],at=w(X);if(at||j>1&&typeof X=="string"&&!E.checkClone&&Fh.test(X))return o.each(function(yt){var ut=o.eq(yt);at&&(l[0]=X.call(this,yt,ut.html())),nn(ut,l,u,f)});if(j&&(_=te(l,o[0].ownerDocument,!1,o,f),m=_.firstChild,_.childNodes.length===1&&(_=m),m||f)){for(x=d.map(Gt(_,"script"),Nh),S=x.length;F<j;F++)R=_,F!==O&&(R=d.clone(R,!0,!0),S&&d.merge(x,Gt(R,"script"))),u.call(o[F],R,F);if(S)for(A=x[x.length-1].ownerDocument,d.map(x,Gh),F=0;F<S;F++)R=x[F],In.test(R.type||"")&&!q.access(R,"globalEval")&&d.contains(A,R)&&(R.src&&(R.type||"").toLowerCase()!=="module"?d._evalUrl&&!R.noModule&&d._evalUrl(R.src,{nonce:R.nonce||R.getAttribute("nonce")},A):k(R.textContent.replace(kh,""),R,A))}return o}function $o(o,l,u){for(var f,_=l?d.filter(l,o):o,m=0;(f=_[m])!=null;m++)!u&&f.nodeType===1&&d.cleanData(Gt(f)),f.parentNode&&(u&&$e(f)&&Qt(Gt(f,"script")),f.parentNode.removeChild(f));return o}d.extend({htmlPrefilter:function(o){return o},clone:function(o,l,u){var f,_,m,x,S=o.cloneNode(!0),R=$e(o);if(!E.noCloneChecked&&(o.nodeType===1||o.nodeType===11)&&!d.isXMLDoc(o))for(x=Gt(S),m=Gt(o),f=0,_=m.length;f<_;f++)jh(m[f],x[f]);if(l)if(u)for(m=m||Gt(o),x=x||Gt(S),f=0,_=m.length;f<_;f++)qo(m[f],x[f]);else qo(o,S);return x=Gt(S,"script"),x.length>0&&Qt(x,!R&&Gt(o,"script")),S},cleanData:function(o){for(var l,u,f,_=d.event.special,m=0;(u=o[m])!==void 0;m++)if(Ht(u)){if(l=u[q.expando]){if(l.events)for(f in l.events)_[f]?d.event.remove(u,f):d.removeEvent(u,f,l.handle);u[q.expando]=void 0}u[Nt.expando]&&(u[Nt.expando]=void 0)}}}),d.fn.extend({detach:function(o){return $o(this,o,!0)},remove:function(o){return $o(this,o)},text:function(o){return le(this,function(l){return l===void 0?d.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=l)})},null,o,arguments.length)},append:function(){return nn(this,arguments,function(o){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var l=Zo(this,o);l.appendChild(o)}})},prepend:function(){return nn(this,arguments,function(o){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var l=Zo(this,o);l.insertBefore(o,l.firstChild)}})},before:function(){return nn(this,arguments,function(o){this.parentNode&&this.parentNode.insertBefore(o,this)})},after:function(){return nn(this,arguments,function(o){this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling)})},empty:function(){for(var o,l=0;(o=this[l])!=null;l++)o.nodeType===1&&(d.cleanData(Gt(o,!1)),o.textContent="");return this},clone:function(o,l){return o=o??!1,l=l??o,this.map(function(){return d.clone(this,o,l)})},html:function(o){return le(this,function(l){var u=this[0]||{},f=0,_=this.length;if(l===void 0&&u.nodeType===1)return u.innerHTML;if(typeof l=="string"&&!hr.test(l)&&!bt[(Sn.exec(l)||["",""])[1].toLowerCase()]){l=d.htmlPrefilter(l);try{for(;f<_;f++)u=this[f]||{},u.nodeType===1&&(d.cleanData(Gt(u,!1)),u.innerHTML=l);u=0}catch{}}u&&this.empty().append(l)},null,o,arguments.length)},replaceWith:function(){var o=[];return nn(this,arguments,function(l){var u=this.parentNode;d.inArray(this,o)<0&&(d.cleanData(Gt(this)),u&&u.replaceChild(l,this))},o)}}),d.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(o,l){d.fn[o]=function(u){for(var f,_=[],m=d(u),x=m.length-1,S=0;S<=x;S++)f=S===x?this:this.clone(!0),d(m[S])[l](f),h.apply(_,f.get());return this.pushStack(_)}});var cr=new RegExp("^("+Ut+")(?!px)[a-z%]+$","i"),ur=/^--/,us=function(o){var l=o.ownerDocument.defaultView;return(!l||!l.opener)&&(l=t),l.getComputedStyle(o)},Jo=function(o,l,u){var f,_,m={};for(_ in l)m[_]=o.style[_],o.style[_]=l[_];f=u.call(o);for(_ in l)o.style[_]=m[_];return f},Wh=new RegExp(Re.join("|"),"i");(function(){function o(){if(A){R.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",A.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",qe.appendChild(R).appendChild(A);var F=t.getComputedStyle(A);u=F.top!=="1%",S=l(F.marginLeft)===12,A.style.right="60%",m=l(F.right)===36,f=l(F.width)===36,A.style.position="absolute",_=l(A.offsetWidth/3)===12,qe.removeChild(R),A=null}}function l(F){return Math.round(parseFloat(F))}var u,f,_,m,x,S,R=I.createElement("div"),A=I.createElement("div");A.style&&(A.style.backgroundClip="content-box",A.cloneNode(!0).style.backgroundClip="",E.clearCloneStyle=A.style.backgroundClip==="content-box",d.extend(E,{boxSizingReliable:function(){return o(),f},pixelBoxStyles:function(){return o(),m},pixelPosition:function(){return o(),u},reliableMarginLeft:function(){return o(),S},scrollboxSize:function(){return o(),_},reliableTrDimensions:function(){var F,j,O,X;return x==null&&(F=I.createElement("table"),j=I.createElement("tr"),O=I.createElement("div"),F.style.cssText="position:absolute;left:-11111px;border-collapse:separate",j.style.cssText="border:1px solid",j.style.height="1px",O.style.height="9px",O.style.display="block",qe.appendChild(F).appendChild(j).appendChild(O),X=t.getComputedStyle(j),x=parseInt(X.height,10)+parseInt(X.borderTopWidth,10)+parseInt(X.borderBottomWidth,10)===j.offsetHeight,qe.removeChild(F)),x}}))})();function bn(o,l,u){var f,_,m,x,S=ur.test(l),R=o.style;return u=u||us(o),u&&(x=u.getPropertyValue(l)||u[l],S&&x&&(x=x.replace(At,"$1")||void 0),x===""&&!$e(o)&&(x=d.style(o,l)),!E.pixelBoxStyles()&&cr.test(x)&&Wh.test(l)&&(f=R.width,_=R.minWidth,m=R.maxWidth,R.minWidth=R.maxWidth=R.width=x,x=u.width,R.width=f,R.minWidth=_,R.maxWidth=m)),x!==void 0?x+"":x}function Qo(o,l){return{get:function(){if(o()){delete this.get;return}return(this.get=l).apply(this,arguments)}}}var ta=["Webkit","Moz","ms"],ea=I.createElement("div").style,ia={};function Xh(o){for(var l=o[0].toUpperCase()+o.slice(1),u=ta.length;u--;)if(o=ta[u]+l,o in ea)return o}function dr(o){var l=d.cssProps[o]||ia[o];return l||(o in ea?o:ia[o]=Xh(o)||o)}var Yh=/^(none|table(?!-c[ea]).+)/,zh={position:"absolute",visibility:"hidden",display:"block"},na={letterSpacing:"0",fontWeight:"400"};function sa(o,l,u){var f=Ze.exec(l);return f?Math.max(0,f[2]-(u||0))+(f[3]||"px"):l}function fr(o,l,u,f,_,m){var x=l==="width"?1:0,S=0,R=0,A=0;if(u===(f?"border":"content"))return 0;for(;x<4;x+=2)u==="margin"&&(A+=d.css(o,u+Re[x],!0,_)),f?(u==="content"&&(R-=d.css(o,"padding"+Re[x],!0,_)),u!=="margin"&&(R-=d.css(o,"border"+Re[x]+"Width",!0,_))):(R+=d.css(o,"padding"+Re[x],!0,_),u!=="padding"?R+=d.css(o,"border"+Re[x]+"Width",!0,_):S+=d.css(o,"border"+Re[x]+"Width",!0,_));return!f&&m>=0&&(R+=Math.max(0,Math.ceil(o["offset"+l[0].toUpperCase()+l.slice(1)]-m-R-S-.5))||0),R+A}function ra(o,l,u){var f=us(o),_=!E.boxSizingReliable()||u,m=_&&d.css(o,"boxSizing",!1,f)==="border-box",x=m,S=bn(o,l,f),R="offset"+l[0].toUpperCase()+l.slice(1);if(cr.test(S)){if(!u)return S;S="auto"}return(!E.boxSizingReliable()&&m||!E.reliableTrDimensions()&&B(o,"tr")||S==="auto"||!parseFloat(S)&&d.css(o,"display",!1,f)==="inline")&&o.getClientRects().length&&(m=d.css(o,"boxSizing",!1,f)==="border-box",x=R in o,x&&(S=o[R])),S=parseFloat(S)||0,S+fr(o,l,u||(m?"border":"content"),x,f,S)+"px"}d.extend({cssHooks:{opacity:{get:function(o,l){if(l){var u=bn(o,"opacity");return u===""?"1":u}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(o,l,u,f){if(!(!o||o.nodeType===3||o.nodeType===8||!o.style)){var _,m,x,S=Mt(l),R=ur.test(l),A=o.style;if(R||(l=dr(S)),x=d.cssHooks[l]||d.cssHooks[S],u!==void 0){if(m=typeof u,m==="string"&&(_=Ze.exec(u))&&_[1]&&(u=wn(o,l,_),m="number"),u==null||u!==u)return;m==="number"&&!R&&(u+=_&&_[3]||(d.cssNumber[S]?"":"px")),!E.clearCloneStyle&&u===""&&l.indexOf("background")===0&&(A[l]="inherit"),(!x||!("set"in x)||(u=x.set(o,u,f))!==void 0)&&(R?A.setProperty(l,u):A[l]=u)}else return x&&"get"in x&&(_=x.get(o,!1,f))!==void 0?_:A[l]}},css:function(o,l,u,f){var _,m,x,S=Mt(l),R=ur.test(l);return R||(l=dr(S)),x=d.cssHooks[l]||d.cssHooks[S],x&&"get"in x&&(_=x.get(o,!0,u)),_===void 0&&(_=bn(o,l,f)),_==="normal"&&l in na&&(_=na[l]),u===""||u?(m=parseFloat(_),u===!0||isFinite(m)?m||0:_):_}}),d.each(["height","width"],function(o,l){d.cssHooks[l]={get:function(u,f,_){if(f)return Yh.test(d.css(u,"display"))&&(!u.getClientRects().length||!u.getBoundingClientRect().width)?Jo(u,zh,function(){return ra(u,l,_)}):ra(u,l,_)},set:function(u,f,_){var m,x=us(u),S=!E.scrollboxSize()&&x.position==="absolute",R=S||_,A=R&&d.css(u,"boxSizing",!1,x)==="border-box",F=_?fr(u,l,_,A,x):0;return A&&S&&(F-=Math.ceil(u["offset"+l[0].toUpperCase()+l.slice(1)]-parseFloat(x[l])-fr(u,l,"border",!1,x)-.5)),F&&(m=Ze.exec(f))&&(m[3]||"px")!=="px"&&(u.style[l]=f,f=d.css(u,l)),sa(u,f,F)}}}),d.cssHooks.marginLeft=Qo(E.reliableMarginLeft,function(o,l){if(l)return(parseFloat(bn(o,"marginLeft"))||o.getBoundingClientRect().left-Jo(o,{marginLeft:0},function(){return o.getBoundingClientRect().left}))+"px"}),d.each({margin:"",padding:"",border:"Width"},function(o,l){d.cssHooks[o+l]={expand:function(u){for(var f=0,_={},m=typeof u=="string"?u.split(" "):[u];f<4;f++)_[o+Re[f]+l]=m[f]||m[f-2]||m[0];return _}},o!=="margin"&&(d.cssHooks[o+l].set=sa)}),d.fn.extend({css:function(o,l){return le(this,function(u,f,_){var m,x,S={},R=0;if(Array.isArray(f)){for(m=us(u),x=f.length;R<x;R++)S[f[R]]=d.css(u,f[R],!1,m);return S}return _!==void 0?d.style(u,f,_):d.css(u,f)},o,l,arguments.length>1)}});function ce(o,l,u,f,_){return new ce.prototype.init(o,l,u,f,_)}d.Tween=ce,ce.prototype={constructor:ce,init:function(o,l,u,f,_,m){this.elem=o,this.prop=u,this.easing=_||d.easing._default,this.options=l,this.start=this.now=this.cur(),this.end=f,this.unit=m||(d.cssNumber[u]?"":"px")},cur:function(){var o=ce.propHooks[this.prop];return o&&o.get?o.get(this):ce.propHooks._default.get(this)},run:function(o){var l,u=ce.propHooks[this.prop];return this.options.duration?this.pos=l=d.easing[this.easing](o,this.options.duration*o,0,1,this.options.duration):this.pos=l=o,this.now=(this.end-this.start)*l+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),u&&u.set?u.set(this):ce.propHooks._default.set(this),this}},ce.prototype.init.prototype=ce.prototype,ce.propHooks={_default:{get:function(o){var l;return o.elem.nodeType!==1||o.elem[o.prop]!=null&&o.elem.style[o.prop]==null?o.elem[o.prop]:(l=d.css(o.elem,o.prop,""),!l||l==="auto"?0:l)},set:function(o){d.fx.step[o.prop]?d.fx.step[o.prop](o):o.elem.nodeType===1&&(d.cssHooks[o.prop]||o.elem.style[dr(o.prop)]!=null)?d.style(o.elem,o.prop,o.now+o.unit):o.elem[o.prop]=o.now}}},ce.propHooks.scrollTop=ce.propHooks.scrollLeft={set:function(o){o.elem.nodeType&&o.elem.parentNode&&(o.elem[o.prop]=o.now)}},d.easing={linear:function(o){return o},swing:function(o){return .5-Math.cos(o*Math.PI)/2},_default:"swing"},d.fx=ce.prototype.init,d.fx.step={};var sn,ds,Bh=/^(?:toggle|show|hide)$/,Hh=/queueHooks$/;function gr(){ds&&(I.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(gr):t.setTimeout(gr,d.fx.interval),d.fx.tick())}function oa(){return t.setTimeout(function(){sn=void 0}),sn=Date.now()}function fs(o,l){var u,f=0,_={height:o};for(l=l?1:0;f<4;f+=2-l)u=Re[f],_["margin"+u]=_["padding"+u]=o;return l&&(_.opacity=_.width=o),_}function aa(o,l,u){for(var f,_=(be.tweeners[l]||[]).concat(be.tweeners["*"]),m=0,x=_.length;m<x;m++)if(f=_[m].call(u,l,o))return f}function Uh(o,l,u){var f,_,m,x,S,R,A,F,j="width"in l||"height"in l,O=this,X={},at=o.style,yt=o.nodeType&&ci(o),ut=q.get(o,"fxshow");u.queue||(x=d._queueHooks(o,"fx"),x.unqueued==null&&(x.unqueued=0,S=x.empty.fire,x.empty.fire=function(){x.unqueued||S()}),x.unqueued++,O.always(function(){O.always(function(){x.unqueued--,d.queue(o,"fx").length||x.empty.fire()})}));for(f in l)if(_=l[f],Bh.test(_)){if(delete l[f],m=m||_==="toggle",_===(yt?"hide":"show"))if(_==="show"&&ut&&ut[f]!==void 0)yt=!0;else continue;X[f]=ut&&ut[f]||d.style(o,f)}if(R=!d.isEmptyObject(l),!(!R&&d.isEmptyObject(X))){j&&o.nodeType===1&&(u.overflow=[at.overflow,at.overflowX,at.overflowY],A=ut&&ut.display,A==null&&(A=q.get(o,"display")),F=d.css(o,"display"),F==="none"&&(A?F=A:(Ce([o],!0),A=o.style.display||A,F=d.css(o,"display"),Ce([o]))),(F==="inline"||F==="inline-block"&&A!=null)&&d.css(o,"float")==="none"&&(R||(O.done(function(){at.display=A}),A==null&&(F=at.display,A=F==="none"?"":F)),at.display="inline-block")),u.overflow&&(at.overflow="hidden",O.always(function(){at.overflow=u.overflow[0],at.overflowX=u.overflow[1],at.overflowY=u.overflow[2]})),R=!1;for(f in X)R||(ut?"hidden"in ut&&(yt=ut.hidden):ut=q.access(o,"fxshow",{display:A}),m&&(ut.hidden=!yt),yt&&Ce([o],!0),O.done(function(){yt||Ce([o]),q.remove(o,"fxshow");for(f in X)d.style(o,f,X[f])})),R=aa(yt?ut[f]:0,f,O),f in ut||(ut[f]=R.start,yt&&(R.end=R.start,R.start=0))}}function Vh(o,l){var u,f,_,m,x;for(u in o)if(f=Mt(u),_=l[f],m=o[u],Array.isArray(m)&&(_=m[1],m=o[u]=m[0]),u!==f&&(o[f]=m,delete o[u]),x=d.cssHooks[f],x&&"expand"in x){m=x.expand(m),delete o[f];for(u in m)u in o||(o[u]=m[u],l[u]=_)}else l[f]=_}function be(o,l,u){var f,_,m=0,x=be.prefilters.length,S=d.Deferred().always(function(){delete R.elem}),R=function(){if(_)return!1;for(var j=sn||oa(),O=Math.max(0,A.startTime+A.duration-j),X=O/A.duration||0,at=1-X,yt=0,ut=A.tweens.length;yt<ut;yt++)A.tweens[yt].run(at);return S.notifyWith(o,[A,at,O]),at<1&&ut?O:(ut||S.notifyWith(o,[A,1,0]),S.resolveWith(o,[A]),!1)},A=S.promise({elem:o,props:d.extend({},l),opts:d.extend(!0,{specialEasing:{},easing:d.easing._default},u),originalProperties:l,originalOptions:u,startTime:sn||oa(),duration:u.duration,tweens:[],createTween:function(j,O){var X=d.Tween(o,A.opts,j,O,A.opts.specialEasing[j]||A.opts.easing);return A.tweens.push(X),X},stop:function(j){var O=0,X=j?A.tweens.length:0;if(_)return this;for(_=!0;O<X;O++)A.tweens[O].run(1);return j?(S.notifyWith(o,[A,1,0]),S.resolveWith(o,[A,j])):S.rejectWith(o,[A,j]),this}}),F=A.props;for(Vh(F,A.opts.specialEasing);m<x;m++)if(f=be.prefilters[m].call(A,o,F,A.opts),f)return w(f.stop)&&(d._queueHooks(A.elem,A.opts.queue).stop=f.stop.bind(f)),f;return d.map(F,aa,A),w(A.opts.start)&&A.opts.start.call(o,A),A.progress(A.opts.progress).done(A.opts.done,A.opts.complete).fail(A.opts.fail).always(A.opts.always),d.fx.timer(d.extend(R,{elem:o,anim:A,queue:A.opts.queue})),A}d.Animation=d.extend(be,{tweeners:{"*":[function(o,l){var u=this.createTween(o,l);return wn(u.elem,o,Ze.exec(l),u),u}]},tweener:function(o,l){w(o)?(l=o,o=["*"]):o=o.match(qt);for(var u,f=0,_=o.length;f<_;f++)u=o[f],be.tweeners[u]=be.tweeners[u]||[],be.tweeners[u].unshift(l)},prefilters:[Uh],prefilter:function(o,l){l?be.prefilters.unshift(o):be.prefilters.push(o)}}),d.speed=function(o,l,u){var f=o&&typeof o=="object"?d.extend({},o):{complete:u||!u&&l||w(o)&&o,duration:o,easing:u&&l||l&&!w(l)&&l};return d.fx.off?f.duration=0:typeof f.duration!="number"&&(f.duration in d.fx.speeds?f.duration=d.fx.speeds[f.duration]:f.duration=d.fx.speeds._default),(f.queue==null||f.queue===!0)&&(f.queue="fx"),f.old=f.complete,f.complete=function(){w(f.old)&&f.old.call(this),f.queue&&d.dequeue(this,f.queue)},f},d.fn.extend({fadeTo:function(o,l,u,f){return this.filter(ci).css("opacity",0).show().end().animate({opacity:l},o,u,f)},animate:function(o,l,u,f){var _=d.isEmptyObject(o),m=d.speed(l,u,f),x=function(){var S=be(this,d.extend({},o),m);(_||q.get(this,"finish"))&&S.stop(!0)};return x.finish=x,_||m.queue===!1?this.each(x):this.queue(m.queue,x)},stop:function(o,l,u){var f=function(_){var m=_.stop;delete _.stop,m(u)};return typeof o!="string"&&(u=l,l=o,o=void 0),l&&this.queue(o||"fx",[]),this.each(function(){var _=!0,m=o!=null&&o+"queueHooks",x=d.timers,S=q.get(this);if(m)S[m]&&S[m].stop&&f(S[m]);else for(m in S)S[m]&&S[m].stop&&Hh.test(m)&&f(S[m]);for(m=x.length;m--;)x[m].elem===this&&(o==null||x[m].queue===o)&&(x[m].anim.stop(u),_=!1,x.splice(m,1));(_||!u)&&d.dequeue(this,o)})},finish:function(o){return o!==!1&&(o=o||"fx"),this.each(function(){var l,u=q.get(this),f=u[o+"queue"],_=u[o+"queueHooks"],m=d.timers,x=f?f.length:0;for(u.finish=!0,d.queue(this,o,[]),_&&_.stop&&_.stop.call(this,!0),l=m.length;l--;)m[l].elem===this&&m[l].queue===o&&(m[l].anim.stop(!0),m.splice(l,1));for(l=0;l<x;l++)f[l]&&f[l].finish&&f[l].finish.call(this);delete u.finish})}}),d.each(["toggle","show","hide"],function(o,l){var u=d.fn[l];d.fn[l]=function(f,_,m){return f==null||typeof f=="boolean"?u.apply(this,arguments):this.animate(fs(l,!0),f,_,m)}}),d.each({slideDown:fs("show"),slideUp:fs("hide"),slideToggle:fs("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(o,l){d.fn[o]=function(u,f,_){return this.animate(l,u,f,_)}}),d.timers=[],d.fx.tick=function(){var o,l=0,u=d.timers;for(sn=Date.now();l<u.length;l++)o=u[l],!o()&&u[l]===o&&u.splice(l--,1);u.length||d.fx.stop(),sn=void 0},d.fx.timer=function(o){d.timers.push(o),d.fx.start()},d.fx.interval=13,d.fx.start=function(){ds||(ds=!0,gr())},d.fx.stop=function(){ds=null},d.fx.speeds={slow:600,fast:200,_default:400},d.fn.delay=function(o,l){return o=d.fx&&d.fx.speeds[o]||o,l=l||"fx",this.queue(l,function(u,f){var _=t.setTimeout(u,o);f.stop=function(){t.clearTimeout(_)}})},function(){var o=I.createElement("input"),l=I.createElement("select"),u=l.appendChild(I.createElement("option"));o.type="checkbox",E.checkOn=o.value!=="",E.optSelected=u.selected,o=I.createElement("input"),o.value="t",o.type="radio",E.radioValue=o.value==="t"}();var la,Ln=d.expr.attrHandle;d.fn.extend({attr:function(o,l){return le(this,d.attr,o,l,arguments.length>1)},removeAttr:function(o){return this.each(function(){d.removeAttr(this,o)})}}),d.extend({attr:function(o,l,u){var f,_,m=o.nodeType;if(!(m===3||m===8||m===2)){if(typeof o.getAttribute>"u")return d.prop(o,l,u);if((m!==1||!d.isXMLDoc(o))&&(_=d.attrHooks[l.toLowerCase()]||(d.expr.match.bool.test(l)?la:void 0)),u!==void 0){if(u===null){d.removeAttr(o,l);return}return _&&"set"in _&&(f=_.set(o,u,l))!==void 0?f:(o.setAttribute(l,u+""),u)}return _&&"get"in _&&(f=_.get(o,l))!==null?f:(f=d.find.attr(o,l),f??void 0)}},attrHooks:{type:{set:function(o,l){if(!E.radioValue&&l==="radio"&&B(o,"input")){var u=o.value;return o.setAttribute("type",l),u&&(o.value=u),l}}}},removeAttr:function(o,l){var u,f=0,_=l&&l.match(qt);if(_&&o.nodeType===1)for(;u=_[f++];)o.removeAttribute(u)}}),la={set:function(o,l,u){return l===!1?d.removeAttr(o,u):o.setAttribute(u,u),u}},d.each(d.expr.match.bool.source.match(/\w+/g),function(o,l){var u=Ln[l]||d.find.attr;Ln[l]=function(f,_,m){var x,S,R=_.toLowerCase();return m||(S=Ln[R],Ln[R]=x,x=u(f,_,m)!=null?R:null,Ln[R]=S),x}});var Kh=/^(?:input|select|textarea|button)$/i,Zh=/^(?:a|area)$/i;d.fn.extend({prop:function(o,l){return le(this,d.prop,o,l,arguments.length>1)},removeProp:function(o){return this.each(function(){delete this[d.propFix[o]||o]})}}),d.extend({prop:function(o,l,u){var f,_,m=o.nodeType;if(!(m===3||m===8||m===2))return(m!==1||!d.isXMLDoc(o))&&(l=d.propFix[l]||l,_=d.propHooks[l]),u!==void 0?_&&"set"in _&&(f=_.set(o,u,l))!==void 0?f:o[l]=u:_&&"get"in _&&(f=_.get(o,l))!==null?f:o[l]},propHooks:{tabIndex:{get:function(o){var l=d.find.attr(o,"tabindex");return l?parseInt(l,10):Kh.test(o.nodeName)||Zh.test(o.nodeName)&&o.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),E.optSelected||(d.propHooks.selected={get:function(o){var l=o.parentNode;return l&&l.parentNode&&l.parentNode.selectedIndex,null},set:function(o){var l=o.parentNode;l&&(l.selectedIndex,l.parentNode&&l.parentNode.selectedIndex)}}),d.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){d.propFix[this.toLowerCase()]=this});function Mi(o){var l=o.match(qt)||[];return l.join(" ")}function Pi(o){return o.getAttribute&&o.getAttribute("class")||""}function pr(o){return Array.isArray(o)?o:typeof o=="string"?o.match(qt)||[]:[]}d.fn.extend({addClass:function(o){var l,u,f,_,m,x;return w(o)?this.each(function(S){d(this).addClass(o.call(this,S,Pi(this)))}):(l=pr(o),l.length?this.each(function(){if(f=Pi(this),u=this.nodeType===1&&" "+Mi(f)+" ",u){for(m=0;m<l.length;m++)_=l[m],u.indexOf(" "+_+" ")<0&&(u+=_+" ");x=Mi(u),f!==x&&this.setAttribute("class",x)}}):this)},removeClass:function(o){var l,u,f,_,m,x;return w(o)?this.each(function(S){d(this).removeClass(o.call(this,S,Pi(this)))}):arguments.length?(l=pr(o),l.length?this.each(function(){if(f=Pi(this),u=this.nodeType===1&&" "+Mi(f)+" ",u){for(m=0;m<l.length;m++)for(_=l[m];u.indexOf(" "+_+" ")>-1;)u=u.replace(" "+_+" "," ");x=Mi(u),f!==x&&this.setAttribute("class",x)}}):this):this.attr("class","")},toggleClass:function(o,l){var u,f,_,m,x=typeof o,S=x==="string"||Array.isArray(o);return w(o)?this.each(function(R){d(this).toggleClass(o.call(this,R,Pi(this),l),l)}):typeof l=="boolean"&&S?l?this.addClass(o):this.removeClass(o):(u=pr(o),this.each(function(){if(S)for(m=d(this),_=0;_<u.length;_++)f=u[_],m.hasClass(f)?m.removeClass(f):m.addClass(f);else(o===void 0||x==="boolean")&&(f=Pi(this),f&&q.set(this,"__className__",f),this.setAttribute&&this.setAttribute("class",f||o===!1?"":q.get(this,"__className__")||""))}))},hasClass:function(o){var l,u,f=0;for(l=" "+o+" ";u=this[f++];)if(u.nodeType===1&&(" "+Mi(Pi(u))+" ").indexOf(l)>-1)return!0;return!1}});var qh=/\r/g;d.fn.extend({val:function(o){var l,u,f,_=this[0];return arguments.length?(f=w(o),this.each(function(m){var x;this.nodeType===1&&(f?x=o.call(this,m,d(this).val()):x=o,x==null?x="":typeof x=="number"?x+="":Array.isArray(x)&&(x=d.map(x,function(S){return S==null?"":S+""})),l=d.valHooks[this.type]||d.valHooks[this.nodeName.toLowerCase()],(!l||!("set"in l)||l.set(this,x,"value")===void 0)&&(this.value=x))})):_?(l=d.valHooks[_.type]||d.valHooks[_.nodeName.toLowerCase()],l&&"get"in l&&(u=l.get(_,"value"))!==void 0?u:(u=_.value,typeof u=="string"?u.replace(qh,""):u??"")):void 0}}),d.extend({valHooks:{option:{get:function(o){var l=d.find.attr(o,"value");return l??Mi(d.text(o))}},select:{get:function(o){var l,u,f,_=o.options,m=o.selectedIndex,x=o.type==="select-one",S=x?null:[],R=x?m+1:_.length;for(m<0?f=R:f=x?m:0;f<R;f++)if(u=_[f],(u.selected||f===m)&&!u.disabled&&(!u.parentNode.disabled||!B(u.parentNode,"optgroup"))){if(l=d(u).val(),x)return l;S.push(l)}return S},set:function(o,l){for(var u,f,_=o.options,m=d.makeArray(l),x=_.length;x--;)f=_[x],(f.selected=d.inArray(d.valHooks.option.get(f),m)>-1)&&(u=!0);return u||(o.selectedIndex=-1),m}}}}),d.each(["radio","checkbox"],function(){d.valHooks[this]={set:function(o,l){if(Array.isArray(l))return o.checked=d.inArray(d(o).val(),l)>-1}},E.checkOn||(d.valHooks[this].get=function(o){return o.getAttribute("value")===null?"on":o.value})});var An=t.location,ha={guid:Date.now()},_r=/\?/;d.parseXML=function(o){var l,u;if(!o||typeof o!="string")return null;try{l=new t.DOMParser().parseFromString(o,"text/xml")}catch{}return u=l&&l.getElementsByTagName("parsererror")[0],(!l||u)&&d.error("Invalid XML: "+(u?d.map(u.childNodes,function(f){return f.textContent}).join(`
`):o)),l};var ca=/^(?:focusinfocus|focusoutblur)$/,ua=function(o){o.stopPropagation()};d.extend(d.event,{trigger:function(o,l,u,f){var _,m,x,S,R,A,F,j,O=[u||I],X=y.call(o,"type")?o.type:o,at=y.call(o,"namespace")?o.namespace.split("."):[];if(m=j=x=u=u||I,!(u.nodeType===3||u.nodeType===8)&&!ca.test(X+d.event.triggered)&&(X.indexOf(".")>-1&&(at=X.split("."),X=at.shift(),at.sort()),R=X.indexOf(":")<0&&"on"+X,o=o[d.expando]?o:new d.Event(X,typeof o=="object"&&o),o.isTrigger=f?2:3,o.namespace=at.join("."),o.rnamespace=o.namespace?new RegExp("(^|\\.)"+at.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,o.result=void 0,o.target||(o.target=u),l=l==null?[o]:d.makeArray(l,[o]),F=d.event.special[X]||{},!(!f&&F.trigger&&F.trigger.apply(u,l)===!1))){if(!f&&!F.noBubble&&!L(u)){for(S=F.delegateType||X,ca.test(S+X)||(m=m.parentNode);m;m=m.parentNode)O.push(m),x=m;x===(u.ownerDocument||I)&&O.push(x.defaultView||x.parentWindow||t)}for(_=0;(m=O[_++])&&!o.isPropagationStopped();)j=m,o.type=_>1?S:F.bindType||X,A=(q.get(m,"events")||Object.create(null))[o.type]&&q.get(m,"handle"),A&&A.apply(m,l),A=R&&m[R],A&&A.apply&&Ht(m)&&(o.result=A.apply(m,l),o.result===!1&&o.preventDefault());return o.type=X,!f&&!o.isDefaultPrevented()&&(!F._default||F._default.apply(O.pop(),l)===!1)&&Ht(u)&&R&&w(u[X])&&!L(u)&&(x=u[R],x&&(u[R]=null),d.event.triggered=X,o.isPropagationStopped()&&j.addEventListener(X,ua),u[X](),o.isPropagationStopped()&&j.removeEventListener(X,ua),d.event.triggered=void 0,x&&(u[R]=x)),o.result}},simulate:function(o,l,u){var f=d.extend(new d.Event,u,{type:o,isSimulated:!0});d.event.trigger(f,null,l)}}),d.fn.extend({trigger:function(o,l){return this.each(function(){d.event.trigger(o,l,this)})},triggerHandler:function(o,l){var u=this[0];if(u)return d.event.trigger(o,l,u,!0)}});var $h=/\[\]$/,da=/\r?\n/g,Jh=/^(?:submit|button|image|reset|file)$/i,Qh=/^(?:input|select|textarea|keygen)/i;function mr(o,l,u,f){var _;if(Array.isArray(l))d.each(l,function(m,x){u||$h.test(o)?f(o,x):mr(o+"["+(typeof x=="object"&&x!=null?m:"")+"]",x,u,f)});else if(!u&&N(l)==="object")for(_ in l)mr(o+"["+_+"]",l[_],u,f);else f(o,l)}d.param=function(o,l){var u,f=[],_=function(m,x){var S=w(x)?x():x;f[f.length]=encodeURIComponent(m)+"="+encodeURIComponent(S??"")};if(o==null)return"";if(Array.isArray(o)||o.jquery&&!d.isPlainObject(o))d.each(o,function(){_(this.name,this.value)});else for(u in o)mr(u,o[u],l,_);return f.join("&")},d.fn.extend({serialize:function(){return d.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var o=d.prop(this,"elements");return o?d.makeArray(o):this}).filter(function(){var o=this.type;return this.name&&!d(this).is(":disabled")&&Qh.test(this.nodeName)&&!Jh.test(o)&&(this.checked||!we.test(o))}).map(function(o,l){var u=d(this).val();return u==null?null:Array.isArray(u)?d.map(u,function(f){return{name:l.name,value:f.replace(da,`\r
`)}}):{name:l.name,value:u.replace(da,`\r
`)}}).get()}});var tc=/%20/g,ec=/#.*$/,ic=/([?&])_=[^&]*/,nc=/^(.*?):[ \t]*([^\r\n]*)$/mg,sc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rc=/^(?:GET|HEAD)$/,oc=/^\/\//,fa={},yr={},ga="*/".concat("*"),xr=I.createElement("a");xr.href=An.href;function pa(o){return function(l,u){typeof l!="string"&&(u=l,l="*");var f,_=0,m=l.toLowerCase().match(qt)||[];if(w(u))for(;f=m[_++];)f[0]==="+"?(f=f.slice(1)||"*",(o[f]=o[f]||[]).unshift(u)):(o[f]=o[f]||[]).push(u)}}function _a(o,l,u,f){var _={},m=o===yr;function x(S){var R;return _[S]=!0,d.each(o[S]||[],function(A,F){var j=F(l,u,f);if(typeof j=="string"&&!m&&!_[j])return l.dataTypes.unshift(j),x(j),!1;if(m)return!(R=j)}),R}return x(l.dataTypes[0])||!_["*"]&&x("*")}function Cr(o,l){var u,f,_=d.ajaxSettings.flatOptions||{};for(u in l)l[u]!==void 0&&((_[u]?o:f||(f={}))[u]=l[u]);return f&&d.extend(!0,o,f),o}function ac(o,l,u){for(var f,_,m,x,S=o.contents,R=o.dataTypes;R[0]==="*";)R.shift(),f===void 0&&(f=o.mimeType||l.getResponseHeader("Content-Type"));if(f){for(_ in S)if(S[_]&&S[_].test(f)){R.unshift(_);break}}if(R[0]in u)m=R[0];else{for(_ in u){if(!R[0]||o.converters[_+" "+R[0]]){m=_;break}x||(x=_)}m=m||x}if(m)return m!==R[0]&&R.unshift(m),u[m]}function lc(o,l,u,f){var _,m,x,S,R,A={},F=o.dataTypes.slice();if(F[1])for(x in o.converters)A[x.toLowerCase()]=o.converters[x];for(m=F.shift();m;)if(o.responseFields[m]&&(u[o.responseFields[m]]=l),!R&&f&&o.dataFilter&&(l=o.dataFilter(l,o.dataType)),R=m,m=F.shift(),m){if(m==="*")m=R;else if(R!=="*"&&R!==m){if(x=A[R+" "+m]||A["* "+m],!x){for(_ in A)if(S=_.split(" "),S[1]===m&&(x=A[R+" "+S[0]]||A["* "+S[0]],x)){x===!0?x=A[_]:A[_]!==!0&&(m=S[0],F.unshift(S[1]));break}}if(x!==!0)if(x&&o.throws)l=x(l);else try{l=x(l)}catch(j){return{state:"parsererror",error:x?j:"No conversion from "+R+" to "+m}}}}return{state:"success",data:l}}d.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:An.href,type:"GET",isLocal:sc.test(An.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ga,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":d.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(o,l){return l?Cr(Cr(o,d.ajaxSettings),l):Cr(d.ajaxSettings,o)},ajaxPrefilter:pa(fa),ajaxTransport:pa(yr),ajax:function(o,l){typeof o=="object"&&(l=o,o=void 0),l=l||{};var u,f,_,m,x,S,R,A,F,j,O=d.ajaxSetup({},l),X=O.context||O,at=O.context&&(X.nodeType||X.jquery)?d(X):d.event,yt=d.Deferred(),ut=d.Callbacks("once memory"),Jt=O.statusCode||{},Yt={},De={},Fe="canceled",_t={readyState:0,getResponseHeader:function(Et){var Dt;if(R){if(!m)for(m={};Dt=nc.exec(_);)m[Dt[1].toLowerCase()+" "]=(m[Dt[1].toLowerCase()+" "]||[]).concat(Dt[2]);Dt=m[Et.toLowerCase()+" "]}return Dt==null?null:Dt.join(", ")},getAllResponseHeaders:function(){return R?_:null},setRequestHeader:function(Et,Dt){return R==null&&(Et=De[Et.toLowerCase()]=De[Et.toLowerCase()]||Et,Yt[Et]=Dt),this},overrideMimeType:function(Et){return R==null&&(O.mimeType=Et),this},statusCode:function(Et){var Dt;if(Et)if(R)_t.always(Et[_t.status]);else for(Dt in Et)Jt[Dt]=[Jt[Dt],Et[Dt]];return this},abort:function(Et){var Dt=Et||Fe;return u&&u.abort(Dt),Oi(0,Dt),this}};if(yt.promise(_t),O.url=((o||O.url||An.href)+"").replace(oc,An.protocol+"//"),O.type=l.method||l.type||O.method||O.type,O.dataTypes=(O.dataType||"*").toLowerCase().match(qt)||[""],O.crossDomain==null){S=I.createElement("a");try{S.href=O.url,S.href=S.href,O.crossDomain=xr.protocol+"//"+xr.host!=S.protocol+"//"+S.host}catch{O.crossDomain=!0}}if(O.data&&O.processData&&typeof O.data!="string"&&(O.data=d.param(O.data,O.traditional)),_a(fa,O,l,_t),R)return _t;A=d.event&&O.global,A&&d.active++===0&&d.event.trigger("ajaxStart"),O.type=O.type.toUpperCase(),O.hasContent=!rc.test(O.type),f=O.url.replace(ec,""),O.hasContent?O.data&&O.processData&&(O.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(O.data=O.data.replace(tc,"+")):(j=O.url.slice(f.length),O.data&&(O.processData||typeof O.data=="string")&&(f+=(_r.test(f)?"&":"?")+O.data,delete O.data),O.cache===!1&&(f=f.replace(ic,"$1"),j=(_r.test(f)?"&":"?")+"_="+ha.guid+++j),O.url=f+j),O.ifModified&&(d.lastModified[f]&&_t.setRequestHeader("If-Modified-Since",d.lastModified[f]),d.etag[f]&&_t.setRequestHeader("If-None-Match",d.etag[f])),(O.data&&O.hasContent&&O.contentType!==!1||l.contentType)&&_t.setRequestHeader("Content-Type",O.contentType),_t.setRequestHeader("Accept",O.dataTypes[0]&&O.accepts[O.dataTypes[0]]?O.accepts[O.dataTypes[0]]+(O.dataTypes[0]!=="*"?", "+ga+"; q=0.01":""):O.accepts["*"]);for(F in O.headers)_t.setRequestHeader(F,O.headers[F]);if(O.beforeSend&&(O.beforeSend.call(X,_t,O)===!1||R))return _t.abort();if(Fe="abort",ut.add(O.complete),_t.done(O.success),_t.fail(O.error),u=_a(yr,O,l,_t),!u)Oi(-1,"No Transport");else{if(_t.readyState=1,A&&at.trigger("ajaxSend",[_t,O]),R)return _t;O.async&&O.timeout>0&&(x=t.setTimeout(function(){_t.abort("timeout")},O.timeout));try{R=!1,u.send(Yt,Oi)}catch(Et){if(R)throw Et;Oi(-1,Et)}}function Oi(Et,Dt,Pn,vr){var ke,On,Ne,ui,di,Ee=Dt;R||(R=!0,x&&t.clearTimeout(x),u=void 0,_=vr||"",_t.readyState=Et>0?4:0,ke=Et>=200&&Et<300||Et===304,Pn&&(ui=ac(O,_t,Pn)),!ke&&d.inArray("script",O.dataTypes)>-1&&d.inArray("json",O.dataTypes)<0&&(O.converters["text script"]=function(){}),ui=lc(O,ui,_t,ke),ke?(O.ifModified&&(di=_t.getResponseHeader("Last-Modified"),di&&(d.lastModified[f]=di),di=_t.getResponseHeader("etag"),di&&(d.etag[f]=di)),Et===204||O.type==="HEAD"?Ee="nocontent":Et===304?Ee="notmodified":(Ee=ui.state,On=ui.data,Ne=ui.error,ke=!Ne)):(Ne=Ee,(Et||!Ee)&&(Ee="error",Et<0&&(Et=0))),_t.status=Et,_t.statusText=(Dt||Ee)+"",ke?yt.resolveWith(X,[On,Ee,_t]):yt.rejectWith(X,[_t,Ee,Ne]),_t.statusCode(Jt),Jt=void 0,A&&at.trigger(ke?"ajaxSuccess":"ajaxError",[_t,O,ke?On:Ne]),ut.fireWith(X,[_t,Ee]),A&&(at.trigger("ajaxComplete",[_t,O]),--d.active||d.event.trigger("ajaxStop")))}return _t},getJSON:function(o,l,u){return d.get(o,l,u,"json")},getScript:function(o,l){return d.get(o,void 0,l,"script")}}),d.each(["get","post"],function(o,l){d[l]=function(u,f,_,m){return w(f)&&(m=m||_,_=f,f=void 0),d.ajax(d.extend({url:u,type:l,dataType:m,data:f,success:_},d.isPlainObject(u)&&u))}}),d.ajaxPrefilter(function(o){var l;for(l in o.headers)l.toLowerCase()==="content-type"&&(o.contentType=o.headers[l]||"")}),d._evalUrl=function(o,l,u){return d.ajax({url:o,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(f){d.globalEval(f,l,u)}})},d.fn.extend({wrapAll:function(o){var l;return this[0]&&(w(o)&&(o=o.call(this[0])),l=d(o,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&l.insertBefore(this[0]),l.map(function(){for(var u=this;u.firstElementChild;)u=u.firstElementChild;return u}).append(this)),this},wrapInner:function(o){return w(o)?this.each(function(l){d(this).wrapInner(o.call(this,l))}):this.each(function(){var l=d(this),u=l.contents();u.length?u.wrapAll(o):l.append(o)})},wrap:function(o){var l=w(o);return this.each(function(u){d(this).wrapAll(l?o.call(this,u):o)})},unwrap:function(o){return this.parent(o).not("body").each(function(){d(this).replaceWith(this.childNodes)}),this}}),d.expr.pseudos.hidden=function(o){return!d.expr.pseudos.visible(o)},d.expr.pseudos.visible=function(o){return!!(o.offsetWidth||o.offsetHeight||o.getClientRects().length)},d.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var hc={0:200,1223:204},Mn=d.ajaxSettings.xhr();E.cors=!!Mn&&"withCredentials"in Mn,E.ajax=Mn=!!Mn,d.ajaxTransport(function(o){var l,u;if(E.cors||Mn&&!o.crossDomain)return{send:function(f,_){var m,x=o.xhr();if(x.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(m in o.xhrFields)x[m]=o.xhrFields[m];o.mimeType&&x.overrideMimeType&&x.overrideMimeType(o.mimeType),!o.crossDomain&&!f["X-Requested-With"]&&(f["X-Requested-With"]="XMLHttpRequest");for(m in f)x.setRequestHeader(m,f[m]);l=function(S){return function(){l&&(l=u=x.onload=x.onerror=x.onabort=x.ontimeout=x.onreadystatechange=null,S==="abort"?x.abort():S==="error"?typeof x.status!="number"?_(0,"error"):_(x.status,x.statusText):_(hc[x.status]||x.status,x.statusText,(x.responseType||"text")!=="text"||typeof x.responseText!="string"?{binary:x.response}:{text:x.responseText},x.getAllResponseHeaders()))}},x.onload=l(),u=x.onerror=x.ontimeout=l("error"),x.onabort!==void 0?x.onabort=u:x.onreadystatechange=function(){x.readyState===4&&t.setTimeout(function(){l&&u()})},l=l("abort");try{x.send(o.hasContent&&o.data||null)}catch(S){if(l)throw S}},abort:function(){l&&l()}}}),d.ajaxPrefilter(function(o){o.crossDomain&&(o.contents.script=!1)}),d.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(o){return d.globalEval(o),o}}}),d.ajaxPrefilter("script",function(o){o.cache===void 0&&(o.cache=!1),o.crossDomain&&(o.type="GET")}),d.ajaxTransport("script",function(o){if(o.crossDomain||o.scriptAttrs){var l,u;return{send:function(f,_){l=d("<script>").attr(o.scriptAttrs||{}).prop({charset:o.scriptCharset,src:o.url}).on("load error",u=function(m){l.remove(),u=null,m&&_(m.type==="error"?404:200,m.type)}),I.head.appendChild(l[0])},abort:function(){u&&u()}}}});var ma=[],Er=/(=)\?(?=&|$)|\?\?/;d.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var o=ma.pop()||d.expando+"_"+ha.guid++;return this[o]=!0,o}}),d.ajaxPrefilter("json jsonp",function(o,l,u){var f,_,m,x=o.jsonp!==!1&&(Er.test(o.url)?"url":typeof o.data=="string"&&(o.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Er.test(o.data)&&"data");if(x||o.dataTypes[0]==="jsonp")return f=o.jsonpCallback=w(o.jsonpCallback)?o.jsonpCallback():o.jsonpCallback,x?o[x]=o[x].replace(Er,"$1"+f):o.jsonp!==!1&&(o.url+=(_r.test(o.url)?"&":"?")+o.jsonp+"="+f),o.converters["script json"]=function(){return m||d.error(f+" was not called"),m[0]},o.dataTypes[0]="json",_=t[f],t[f]=function(){m=arguments},u.always(function(){_===void 0?d(t).removeProp(f):t[f]=_,o[f]&&(o.jsonpCallback=l.jsonpCallback,ma.push(f)),m&&w(_)&&_(m[0]),m=_=void 0}),"script"}),E.createHTMLDocument=function(){var o=I.implementation.createHTMLDocument("").body;return o.innerHTML="<form></form><form></form>",o.childNodes.length===2}(),d.parseHTML=function(o,l,u){if(typeof o!="string")return[];typeof l=="boolean"&&(u=l,l=!1);var f,_,m;return l||(E.createHTMLDocument?(l=I.implementation.createHTMLDocument(""),f=l.createElement("base"),f.href=I.location.href,l.head.appendChild(f)):l=I),_=Y.exec(o),m=!u&&[],_?[l.createElement(_[1])]:(_=te([o],l,m),m&&m.length&&d(m).remove(),d.merge([],_.childNodes))},d.fn.load=function(o,l,u){var f,_,m,x=this,S=o.indexOf(" ");return S>-1&&(f=Mi(o.slice(S)),o=o.slice(0,S)),w(l)?(u=l,l=void 0):l&&typeof l=="object"&&(_="POST"),x.length>0&&d.ajax({url:o,type:_||"GET",dataType:"html",data:l}).done(function(R){m=arguments,x.html(f?d("<div>").append(d.parseHTML(R)).find(f):R)}).always(u&&function(R,A){x.each(function(){u.apply(this,m||[R.responseText,A,R])})}),this},d.expr.pseudos.animated=function(o){return d.grep(d.timers,function(l){return o===l.elem}).length},d.offset={setOffset:function(o,l,u){var f,_,m,x,S,R,A,F=d.css(o,"position"),j=d(o),O={};F==="static"&&(o.style.position="relative"),S=j.offset(),m=d.css(o,"top"),R=d.css(o,"left"),A=(F==="absolute"||F==="fixed")&&(m+R).indexOf("auto")>-1,A?(f=j.position(),x=f.top,_=f.left):(x=parseFloat(m)||0,_=parseFloat(R)||0),w(l)&&(l=l.call(o,u,d.extend({},S))),l.top!=null&&(O.top=l.top-S.top+x),l.left!=null&&(O.left=l.left-S.left+_),"using"in l?l.using.call(o,O):j.css(O)}},d.fn.extend({offset:function(o){if(arguments.length)return o===void 0?this:this.each(function(_){d.offset.setOffset(this,o,_)});var l,u,f=this[0];if(f)return f.getClientRects().length?(l=f.getBoundingClientRect(),u=f.ownerDocument.defaultView,{top:l.top+u.pageYOffset,left:l.left+u.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var o,l,u,f=this[0],_={top:0,left:0};if(d.css(f,"position")==="fixed")l=f.getBoundingClientRect();else{for(l=this.offset(),u=f.ownerDocument,o=f.offsetParent||u.documentElement;o&&(o===u.body||o===u.documentElement)&&d.css(o,"position")==="static";)o=o.parentNode;o&&o!==f&&o.nodeType===1&&(_=d(o).offset(),_.top+=d.css(o,"borderTopWidth",!0),_.left+=d.css(o,"borderLeftWidth",!0))}return{top:l.top-_.top-d.css(f,"marginTop",!0),left:l.left-_.left-d.css(f,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var o=this.offsetParent;o&&d.css(o,"position")==="static";)o=o.offsetParent;return o||qe})}}),d.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(o,l){var u=l==="pageYOffset";d.fn[o]=function(f){return le(this,function(_,m,x){var S;if(L(_)?S=_:_.nodeType===9&&(S=_.defaultView),x===void 0)return S?S[l]:_[m];S?S.scrollTo(u?S.pageXOffset:x,u?x:S.pageYOffset):_[m]=x},o,f,arguments.length)}}),d.each(["top","left"],function(o,l){d.cssHooks[l]=Qo(E.pixelPosition,function(u,f){if(f)return f=bn(u,l),cr.test(f)?d(u).position()[l]+"px":f})}),d.each({Height:"height",Width:"width"},function(o,l){d.each({padding:"inner"+o,content:l,"":"outer"+o},function(u,f){d.fn[f]=function(_,m){var x=arguments.length&&(u||typeof _!="boolean"),S=u||(_===!0||m===!0?"margin":"border");return le(this,function(R,A,F){var j;return L(R)?f.indexOf("outer")===0?R["inner"+o]:R.document.documentElement["client"+o]:R.nodeType===9?(j=R.documentElement,Math.max(R.body["scroll"+o],j["scroll"+o],R.body["offset"+o],j["offset"+o],j["client"+o])):F===void 0?d.css(R,A,S):d.style(R,A,F,S)},l,x?_:void 0,x)}})}),d.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(o,l){d.fn[l]=function(u){return this.on(l,u)}}),d.fn.extend({bind:function(o,l,u){return this.on(o,null,l,u)},unbind:function(o,l){return this.off(o,null,l)},delegate:function(o,l,u,f){return this.on(l,o,u,f)},undelegate:function(o,l,u){return arguments.length===1?this.off(o,"**"):this.off(l,o||"**",u)},hover:function(o,l){return this.mouseenter(o).mouseleave(l||o)}}),d.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(o,l){d.fn[l]=function(u,f){return arguments.length>0?this.on(l,null,u,f):this.trigger(l)}});var cc=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;d.proxy=function(o,l){var u,f,_;if(typeof l=="string"&&(u=o[l],l=o,o=u),!!w(o))return f=r.call(arguments,2),_=function(){return o.apply(l||this,f.concat(r.call(arguments)))},_.guid=o.guid=o.guid||d.guid++,_},d.holdReady=function(o){o?d.readyWait++:d.ready(!0)},d.isArray=Array.isArray,d.parseJSON=JSON.parse,d.nodeName=B,d.isFunction=w,d.isWindow=L,d.camelCase=Mt,d.type=N,d.now=Date.now,d.isNumeric=function(o){var l=d.type(o);return(l==="number"||l==="string")&&!isNaN(o-parseFloat(o))},d.trim=function(o){return o==null?"":(o+"").replace(cc,"$1")};var uc=t.jQuery,dc=t.$;return d.noConflict=function(o){return t.$===d&&(t.$=dc),o&&t.jQuery===d&&(t.jQuery=uc),d},typeof e>"u"&&(t.jQuery=t.$=d),d})})(Ec);const vc={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection"};class Tc extends Error{constructor(t){const e=vc[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}const _l=Tc;class Rc{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const ai=Rc,yn={PROPERTYCHANGE:"propertychange"};class wc{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}const ho=wc;function Sc(s,t,e){let i,n;e=e||Ui;let r=0,a=s.length,h=!1;for(;r<a;)i=r+(a-r>>1),n=+e(s[i],t),n<0?r=i+1:(a=i,h=!n);return h?r:~r}function Ui(s,t){return s>t?1:s<t?-1:0}function co(s,t,e){const i=s.length;if(s[0]<=t)return 0;if(t<=s[i-1])return i-1;{let n;if(e>0){for(n=1;n<i;++n)if(s[n]<t)return n-1}else if(e<0){for(n=1;n<i;++n)if(s[n]<=t)return n}else for(n=1;n<i;++n){if(s[n]==t)return n;if(s[n]<t)return typeof e=="function"?e(t,s[n-1],s[n])>0?n-1:n:s[n-1]-t<t-s[n]?n-1:n}return i-1}}function Ic(s,t,e){for(;t<e;){const i=s[t];s[t]=s[e],s[e]=i,++t,--e}}function ri(s,t){const e=Array.isArray(t)?t:[t],i=e.length;for(let n=0;n<i;n++)s[s.length]=e[n]}function Zi(s,t){const e=s.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(s[i]!==t[i])return!1;return!0}function bc(s,t,e){const i=t||Ui;return s.every(function(n,r){if(r===0)return!0;const a=i(s[r-1],n);return!(a>0||e&&a===0)})}function Xn(){return!0}function Zs(){return!1}function Vi(){}function Lc(s){let t=!1,e,i,n;return function(){const r=Array.prototype.slice.call(arguments);return(!t||this!==n||!Zi(r,i))&&(t=!0,n=this,i=r,e=s.apply(this,arguments)),e}}function is(s){for(const t in s)delete s[t]}function xn(s){let t;for(t in s)return!1;return!t}class Ac extends ho{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){const e=typeof t=="string",i=e?t:t.type,n=this.listeners_&&this.listeners_[i];if(!n)return;const r=e?new ai(t):t;r.target||(r.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),h=this.pendingRemovals_||(this.pendingRemovals_={});i in a||(a[i]=0,h[i]=0),++a[i];let c;for(let g=0,p=n.length;g<p;++g)if("handleEvent"in n[g]?c=n[g].handleEvent(r):c=n[g].call(this,r),c===!1||r.propagationStopped){c=!1;break}if(--a[i]===0){let g=h[i];for(delete h[i];g--;)this.removeEventListener(i,Vi);delete a[i]}return c}disposeInternal(){this.listeners_&&is(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){const i=this.listeners_&&this.listeners_[t];if(i){const n=i.indexOf(e);n!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=Vi,++this.pendingRemovals_[t]):(i.splice(n,1),i.length===0&&delete this.listeners_[t]))}}}const qs=Ac,ct={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function xt(s,t,e,i,n){if(i&&i!==s&&(e=e.bind(i)),n){const a=e;e=function(){s.removeEventListener(t,e),a.apply(this,arguments)}}const r={target:s,type:t,listener:e};return s.addEventListener(t,e),r}function Os(s,t,e,i){return xt(s,t,e,i,!0)}function Ot(s){s&&s.target&&(s.target.removeEventListener(s.type,s.listener),is(s))}class $s extends qs{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ct.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=xt(this,t[r],e);return n}else return xt(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const n=t.length;i=new Array(n);for(let r=0;r<n;++r)i[r]=Os(this,t[r],e)}else i=Os(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)Mc(i);else if(Array.isArray(t))for(let n=0,r=t.length;n<r;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}$s.prototype.on;$s.prototype.once;$s.prototype.un;function Mc(s){if(Array.isArray(s))for(let t=0,e=s.length;t<e;++t)Ot(s[t]);else Ot(s)}const ml=$s;function rt(){throw new Error("Unimplemented abstract method.")}let Pc=0;function vt(s){return s.ol_uid||(s.ol_uid=String(++Pc))}class va extends ai{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class Oc extends ml{constructor(t){super(),this.on,this.once,this.un,vt(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new va(i,t,e)),i=yn.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new va(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const n=this.values_||(this.values_={});if(i)n[t]=e;else{const r=n[t];n[t]=e,r!==e&&this.notify(t,r)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],xn(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}const He=Oc,de={ADD:"add",REMOVE:"remove"},Ta={LENGTH:"length"};class xs extends ai{constructor(t,e,i){super(t),this.element=e,this.index=i}}class Dc extends He{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,n=this.array_.length;i<n;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Ta.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new xs(de.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new xs(de.REMOVE,e,t)),e}setAt(t,e){const i=this.getLength();if(t>=i){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new xs(de.REMOVE,n,t)),this.dispatchEvent(new xs(de.ADD,e,t))}updateLength_(){this.set(Ta.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new _l(58)}}const We=Dc;function ft(s,t){if(!s)throw new _l(t)}class uo extends He{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new uo(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(Ot(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=xt(t,ct.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?Fc(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function Fc(s){if(typeof s=="function")return s;{let t;return Array.isArray(s)?t=s:(ft(typeof s.getZIndex=="function",41),t=[s]),function(){return t}}}const kc=uo,wi=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Nc=wi.includes("firefox"),Gc=wi.includes("safari")&&!wi.includes("chrom");Gc&&(wi.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(wi));const jc=wi.includes("webkit")&&!wi.includes("edge"),Wc=wi.includes("macintosh"),yl=typeof devicePixelRatio<"u"?devicePixelRatio:1,fo=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Xc=typeof Image<"u"&&Image.prototype.decode,xl=function(){let s=!1;try{const t=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return s}();new Array(6);function Ye(){return[1,0,0,1,0,0]}function Yc(s,t,e,i,n,r,a){return s[0]=t,s[1]=e,s[2]=i,s[3]=n,s[4]=r,s[5]=a,s}function zc(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s}function Kt(s,t){const e=t[0],i=t[1];return t[0]=s[0]*e+s[2]*i+s[4],t[1]=s[1]*e+s[3]*i+s[5],t}function Bc(s,t,e){return Yc(s,t,0,0,e,0,0)}function Si(s,t,e,i,n,r,a,h){const c=Math.sin(r),g=Math.cos(r);return s[0]=i*g,s[1]=n*c,s[2]=-i*c,s[3]=n*g,s[4]=a*i*g-h*i*c+t,s[5]=a*n*c+h*n*g+e,s}function go(s,t){const e=Hc(t);ft(e!==0,32);const i=t[0],n=t[1],r=t[2],a=t[3],h=t[4],c=t[5];return s[0]=a/e,s[1]=-n/e,s[2]=-r/e,s[3]=i/e,s[4]=(r*c-a*h)/e,s[5]=-(i*c-n*h)/e,s}function Hc(s){return s[0]*s[3]-s[1]*s[2]}let Ra;function Cl(s){const t="matrix("+s.join(", ")+")";if(fo)return t;const e=Ra||(Ra=document.createElement("div"));return e.style.transform=t,e.style.transform}const Vt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function wa(s){const t=pe();for(let e=0,i=s.length;e<i;++e)Gn(t,s[e]);return t}function Uc(s,t,e){const i=Math.min.apply(null,s),n=Math.min.apply(null,t),r=Math.max.apply(null,s),a=Math.max.apply(null,t);return ze(i,n,r,a,e)}function Yn(s,t,e){return e?(e[0]=s[0]-t,e[1]=s[1]-t,e[2]=s[2]+t,e[3]=s[3]+t,e):[s[0]-t,s[1]-t,s[2]+t,s[3]+t]}function El(s,t){return t?(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t):s.slice()}function qi(s,t,e){let i,n;return t<s[0]?i=s[0]-t:s[2]<t?i=t-s[2]:i=0,e<s[1]?n=s[1]-e:s[3]<e?n=e-s[3]:n=0,i*i+n*n}function Js(s,t){return po(s,t[0],t[1])}function pn(s,t){return s[0]<=t[0]&&t[2]<=s[2]&&s[1]<=t[1]&&t[3]<=s[3]}function po(s,t,e){return s[0]<=t&&t<=s[2]&&s[1]<=e&&e<=s[3]}function Yr(s,t){const e=s[0],i=s[1],n=s[2],r=s[3],a=t[0],h=t[1];let c=Vt.UNKNOWN;return a<e?c=c|Vt.LEFT:a>n&&(c=c|Vt.RIGHT),h<i?c=c|Vt.BELOW:h>r&&(c=c|Vt.ABOVE),c===Vt.UNKNOWN&&(c=Vt.INTERSECTING),c}function pe(){return[1/0,1/0,-1/0,-1/0]}function ze(s,t,e,i,n){return n?(n[0]=s,n[1]=t,n[2]=e,n[3]=i,n):[s,t,e,i]}function ns(s){return ze(1/0,1/0,-1/0,-1/0,s)}function Vc(s,t){const e=s[0],i=s[1];return ze(e,i,e,i,t)}function vl(s,t,e,i,n){const r=ns(n);return Rl(r,s,t,e,i)}function zn(s,t){return s[0]==t[0]&&s[2]==t[2]&&s[1]==t[1]&&s[3]==t[3]}function Tl(s,t){return t[0]<s[0]&&(s[0]=t[0]),t[2]>s[2]&&(s[2]=t[2]),t[1]<s[1]&&(s[1]=t[1]),t[3]>s[3]&&(s[3]=t[3]),s}function Gn(s,t){t[0]<s[0]&&(s[0]=t[0]),t[0]>s[2]&&(s[2]=t[0]),t[1]<s[1]&&(s[1]=t[1]),t[1]>s[3]&&(s[3]=t[1])}function Rl(s,t,e,i,n){for(;e<i;e+=n)Kc(s,t[e],t[e+1]);return s}function Kc(s,t,e){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}function wl(s,t){let e;return e=t(Qs(s)),e||(e=t(tr(s)),e)||(e=t(er(s)),e)||(e=t($i(s)),e)?e:!1}function zr(s){let t=0;return _o(s)||(t=Pt(s)*Be(s)),t}function Qs(s){return[s[0],s[1]]}function tr(s){return[s[2],s[1]]}function Ki(s){return[(s[0]+s[2])/2,(s[1]+s[3])/2]}function Zc(s,t){let e;return t==="bottom-left"?e=Qs(s):t==="bottom-right"?e=tr(s):t==="top-left"?e=$i(s):t==="top-right"?e=er(s):ft(!1,13),e}function Br(s,t,e,i,n){const[r,a,h,c,g,p,y,C]=Hr(s,t,e,i);return ze(Math.min(r,h,g,y),Math.min(a,c,p,C),Math.max(r,h,g,y),Math.max(a,c,p,C),n)}function Hr(s,t,e,i){const n=t*i[0]/2,r=t*i[1]/2,a=Math.cos(e),h=Math.sin(e),c=n*a,g=n*h,p=r*a,y=r*h,C=s[0],T=s[1];return[C-c+y,T-g-p,C-c-y,T-g+p,C+c-y,T+g+p,C+c+y,T+g-p,C-c+y,T-g-p]}function Be(s){return s[3]-s[1]}function jn(s,t,e){const i=e||pe();return fe(s,t)?(s[0]>t[0]?i[0]=s[0]:i[0]=t[0],s[1]>t[1]?i[1]=s[1]:i[1]=t[1],s[2]<t[2]?i[2]=s[2]:i[2]=t[2],s[3]<t[3]?i[3]=s[3]:i[3]=t[3]):ns(i),i}function $i(s){return[s[0],s[3]]}function er(s){return[s[2],s[3]]}function Pt(s){return s[2]-s[0]}function fe(s,t){return s[0]<=t[2]&&s[2]>=t[0]&&s[1]<=t[3]&&s[3]>=t[1]}function _o(s){return s[2]<s[0]||s[3]<s[1]}function qc(s,t){return t?(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t):s}function $c(s,t,e){let i=!1;const n=Yr(s,t),r=Yr(s,e);if(n===Vt.INTERSECTING||r===Vt.INTERSECTING)i=!0;else{const a=s[0],h=s[1],c=s[2],g=s[3],p=t[0],y=t[1],C=e[0],T=e[1],E=(T-y)/(C-p);let w,L;r&Vt.ABOVE&&!(n&Vt.ABOVE)&&(w=C-(T-g)/E,i=w>=a&&w<=c),!i&&r&Vt.RIGHT&&!(n&Vt.RIGHT)&&(L=T-(C-c)*E,i=L>=h&&L<=g),!i&&r&Vt.BELOW&&!(n&Vt.BELOW)&&(w=C-(T-h)/E,i=w>=a&&w<=c),!i&&r&Vt.LEFT&&!(n&Vt.LEFT)&&(L=T-(C-a)*E,i=L>=h&&L<=g)}return i}function Jc(s,t,e,i){let n=[];if(i>1){const h=s[2]-s[0],c=s[3]-s[1];for(let g=0;g<i;++g)n.push(s[0]+h*g/i,s[1],s[2],s[1]+c*g/i,s[2]-h*g/i,s[3],s[0],s[3]-c*g/i)}else n=[s[0],s[1],s[2],s[1],s[2],s[3],s[0],s[3]];t(n,n,2);const r=[],a=[];for(let h=0,c=n.length;h<c;h+=2)r.push(n[h]),a.push(n[h+1]);return Uc(r,a,e)}function Sl(s,t){const e=t.getExtent(),i=Ki(s);if(t.canWrapX()&&(i[0]<e[0]||i[0]>=e[2])){const n=Pt(e),a=Math.floor((i[0]-e[0])/n)*n;s[0]-=a,s[2]-=a}return s}function Qc(s,t){if(t.canWrapX()){const e=t.getExtent();if(!isFinite(s[0])||!isFinite(s[2]))return[[e[0],s[1],e[2],s[3]]];Sl(s,t);const i=Pt(e);if(Pt(s)>i)return[[e[0],s[1],e[2],s[3]]];if(s[0]<e[0])return[[s[0]+i,s[1],e[2],s[3]],[e[0],s[1],s[2],s[3]]];if(s[2]>e[2])return[[s[0],s[1],e[2],s[3]],[e[0],s[1],s[2]-i,s[3]]]}return[s]}const Bn={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class tu{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Bn[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Il=tu,ss=6378137,_n=Math.PI*ss,eu=[-_n,-_n,_n,_n],iu=[-180,-85,180,85],Cs=ss*Math.log(Math.tan(Math.PI/2));class an extends Il{constructor(t){super({code:t,units:"m",extent:eu,global:!0,worldExtent:iu,getPointResolution:function(e,i){return e/Math.cosh(i[1]/ss)}})}}const Sa=[new an("EPSG:3857"),new an("EPSG:102100"),new an("EPSG:102113"),new an("EPSG:900913"),new an("http://www.opengis.net/def/crs/EPSG/0/3857"),new an("http://www.opengis.net/gml/srs/epsg.xml#3857")];function nu(s,t,e){const i=s.length;e=e>1?e:2,t===void 0&&(e>2?t=s.slice():t=new Array(i));for(let n=0;n<i;n+=e){t[n]=_n*s[n]/180;let r=ss*Math.log(Math.tan(Math.PI*(+s[n+1]+90)/360));r>Cs?r=Cs:r<-Cs&&(r=-Cs),t[n+1]=r}return t}function su(s,t,e){const i=s.length;e=e>1?e:2,t===void 0&&(e>2?t=s.slice():t=new Array(i));for(let n=0;n<i;n+=e)t[n]=180*s[n]/_n,t[n+1]=360*Math.atan(Math.exp(s[n+1]/ss))/Math.PI-90;return t}const ru=6378137,Ia=[-180,-90,180,90],ou=Math.PI*ru/180;class Fi extends Il{constructor(t,e){super({code:t,units:"degrees",extent:Ia,axisOrientation:e,global:!0,metersPerUnit:ou,worldExtent:Ia})}}const ba=[new Fi("CRS:84"),new Fi("EPSG:4326","neu"),new Fi("urn:ogc:def:crs:OGC:1.3:CRS84"),new Fi("urn:ogc:def:crs:OGC:2:84"),new Fi("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Fi("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Fi("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Ur={};function au(s){return Ur[s]||Ur[s.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function lu(s,t){Ur[s]=t}let mn={};function Ds(s,t,e){const i=s.getCode(),n=t.getCode();i in mn||(mn[i]={}),mn[i][n]=e}function hu(s,t){let e;return s in mn&&t in mn[s]&&(e=mn[s][t]),e}function Wt(s,t,e){return Math.min(Math.max(s,t),e)}function cu(s,t,e,i,n,r){const a=n-e,h=r-i;if(a!==0||h!==0){const c=((s-e)*a+(t-i)*h)/(a*a+h*h);c>1?(e=n,i=r):c>0&&(e+=a*c,i+=h*c)}return zi(s,t,e,i)}function zi(s,t,e,i){const n=e-s,r=i-t;return n*n+r*r}function uu(s){const t=s.length;for(let i=0;i<t;i++){let n=i,r=Math.abs(s[i][i]);for(let h=i+1;h<t;h++){const c=Math.abs(s[h][i]);c>r&&(r=c,n=h)}if(r===0)return null;const a=s[n];s[n]=s[i],s[i]=a;for(let h=i+1;h<t;h++){const c=-s[h][i]/s[i][i];for(let g=i;g<t+1;g++)i==g?s[h][g]=0:s[h][g]+=c*s[i][g]}}const e=new Array(t);for(let i=t-1;i>=0;i--){e[i]=s[i][t]/s[i][i];for(let n=i-1;n>=0;n--)s[n][t]-=s[n][i]*e[i]}return e}function Ps(s){return s*Math.PI/180}function Bi(s,t){const e=s%t;return e*t<0?e+t:e}function si(s,t,e){return s+e*(t-s)}function bl(s,t){const e=Math.pow(10,t);return Math.round(s*e)/e}function Es(s,t){return Math.floor(bl(s,t))}function vs(s,t){return Math.ceil(bl(s,t))}function du(s,t){const e=(""+s).split("."),i=(""+t).split(".");for(let n=0;n<Math.max(e.length,i.length);n++){const r=parseInt(e[n]||"0",10),a=parseInt(i[n]||"0",10);if(r>a)return 1;if(a>r)return-1}return 0}function fu(s,t){return s[0]+=+t[0],s[1]+=+t[1],s}function Fs(s,t){let e=!0;for(let i=s.length-1;i>=0;--i)if(s[i]!=t[i]){e=!1;break}return e}function mo(s,t){const e=Math.cos(t),i=Math.sin(t),n=s[0]*e-s[1]*i,r=s[1]*e+s[0]*i;return s[0]=n,s[1]=r,s}function gu(s,t){return s[0]*=t,s[1]*=t,s}function Ll(s,t){if(t.canWrapX()){const e=Pt(t.getExtent()),i=pu(s,t,e);i&&(s[0]-=i*e)}return s}function pu(s,t,e){const i=t.getExtent();let n=0;return t.canWrapX()&&(s[0]<i[0]||s[0]>i[2])&&(e=e||Pt(i),n=Math.floor((s[0]-i[0])/e)),n}const _u=63710088e-1;function La(s,t,e){e=e||_u;const i=Ps(s[1]),n=Ps(t[1]),r=(n-i)/2,a=Ps(t[0]-s[0])/2,h=Math.sin(r)*Math.sin(r)+Math.sin(a)*Math.sin(a)*Math.cos(i)*Math.cos(n);return 2*e*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}let Vr=!0;function mu(s){Vr=!(s===void 0?!0:s)}function yo(s,t,e){if(t!==void 0){for(let i=0,n=s.length;i<n;++i)t[i]=s[i];t=t}else t=s.slice();return t}function Al(s,t,e){if(t!==void 0&&s!==t){for(let i=0,n=s.length;i<n;++i)t[i]=s[i];s=t}return s}function yu(s){lu(s.getCode(),s),Ds(s,s,yo)}function xu(s){s.forEach(yu)}function Bt(s){return typeof s=="string"?au(s):s||null}function Aa(s,t,e,i){s=Bt(s);let n;const r=s.getPointResolutionFunc();if(r){if(n=r(t,e),i&&i!==s.getUnits()){const a=s.getMetersPerUnit();a&&(n=n*a/Bn[i])}}else{const a=s.getUnits();if(a=="degrees"&&!i||i=="degrees")n=t;else{const h=Co(s,Bt("EPSG:4326"));if(h===Al&&a!=="degrees")n=t*s.getMetersPerUnit();else{let g=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];g=h(g,g,2);const p=La(g.slice(0,2),g.slice(2,4)),y=La(g.slice(4,6),g.slice(6,8));n=(p+y)/2}const c=i?Bn[i]:s.getMetersPerUnit();c!==void 0&&(n/=c)}}return n}function Ma(s){xu(s),s.forEach(function(t){s.forEach(function(e){t!==e&&Ds(t,e,yo)})})}function Cu(s,t,e,i){s.forEach(function(n){t.forEach(function(r){Ds(n,r,e),Ds(r,n,i)})})}function xo(s,t){return s?typeof s=="string"?Bt(s):s:Bt(t)}function Gi(s,t){if(s===t)return!0;const e=s.getUnits()===t.getUnits();return(s.getCode()===t.getCode()||Co(s,t)===yo)&&e}function Co(s,t){const e=s.getCode(),i=t.getCode();let n=hu(e,i);return n||(n=Al),n}function Hn(s,t){const e=Bt(s),i=Bt(t);return Co(e,i)}function Ml(s,t,e){return Hn(t,e)(s,void 0,s.length)}function Eu(s,t,e,i){const n=Hn(t,e);return Jc(s,n,void 0,i)}function Kr(s,t){return s}function ii(s,t){return Vr&&!Fs(s,[0,0])&&s[0]>=-180&&s[0]<=180&&s[1]>=-90&&s[1]<=90&&(Vr=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),s}function Pl(s,t){return s}function ji(s,t){return s}function vu(){Ma(Sa),Ma(ba),Cu(ba,Sa,nu,su)}vu();function Hi(s,t,e,i,n,r){r=r||[];let a=0;for(let h=t;h<e;h+=i){const c=s[h],g=s[h+1];r[a++]=n[0]*c+n[2]*g+n[4],r[a++]=n[1]*c+n[3]*g+n[5]}return r&&r.length!=a&&(r.length=a),r}function Ol(s,t,e,i,n,r,a){a=a||[];const h=Math.cos(n),c=Math.sin(n),g=r[0],p=r[1];let y=0;for(let C=t;C<e;C+=i){const T=s[C]-g,E=s[C+1]-p;a[y++]=g+T*h-E*c,a[y++]=p+T*c+E*h;for(let w=C+2;w<C+i;++w)a[y++]=s[w]}return a&&a.length!=y&&(a.length=y),a}function Tu(s,t,e,i,n,r,a,h){h=h||[];const c=a[0],g=a[1];let p=0;for(let y=t;y<e;y+=i){const C=s[y]-c,T=s[y+1]-g;h[p++]=c+n*C,h[p++]=g+r*T;for(let E=y+2;E<y+i;++E)h[p++]=s[E]}return h&&h.length!=p&&(h.length=p),h}function Ru(s,t,e,i,n,r,a){a=a||[];let h=0;for(let c=t;c<e;c+=i){a[h++]=s[c]+n,a[h++]=s[c+1]+r;for(let g=c+2;g<c+i;++g)a[h++]=s[g]}return a&&a.length!=h&&(a.length=h),a}const Pa=Ye();class wu extends He{constructor(){super(),this.extent_=pe(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Lc(function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return rt()}closestPointXY(t,e,i,n){return rt()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return rt()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&ns(e),this.extentRevision_=this.getRevision()}return qc(this.extent_,t)}rotate(t,e){rt()}scale(t,e,i){rt()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return rt()}getType(){return rt()}applyTransform(t){rt()}intersectsExtent(t){return rt()}translate(t,e){rt()}transform(t,e){const i=Bt(t),n=i.getUnits()=="tile-pixels"?function(r,a,h){const c=i.getExtent(),g=i.getWorldExtent(),p=Be(g)/Be(c);return Si(Pa,g[0],g[3],p,-p,0,0,0),Hi(r,0,r.length,h,Pa,a),Hn(i,e)(r,a,h)}:Hn(i,e);return this.applyTransform(n),this}}const Dl=wu;class Su extends Dl{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return vl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return rt()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Oa(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){rt()}setLayout(t,e,i){let n;if(t)n=Oa(t);else{for(let r=0;r<i;++r)if(e.length===0){this.layout="XY",this.stride=2;return}else e=e[0];n=e.length,t=Iu(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();Ol(i,0,i.length,n,t,e,i),this.changed()}}scale(t,e,i){e===void 0&&(e=t),i||(i=Ki(this.getExtent()));const n=this.getFlatCoordinates();if(n){const r=this.getStride();Tu(n,0,n.length,r,t,e,i,n),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();Ru(i,0,i.length,n,t,e,i),this.changed()}}}function Iu(s){let t;return s==2?t="XY":s==3?t="XYZ":s==4&&(t="XYZM"),t}function Oa(s){let t;return s=="XY"?t=2:s=="XYZ"||s=="XYM"?t=3:s=="XYZM"&&(t=4),t}function bu(s,t,e){const i=s.getFlatCoordinates();if(i){const n=s.getStride();return Hi(i,0,i.length,n,t,e)}else return null}const Ji=Su;function Da(s,t,e,i,n,r,a){const h=s[t],c=s[t+1],g=s[e]-h,p=s[e+1]-c;let y;if(g===0&&p===0)y=t;else{const C=((n-h)*g+(r-c)*p)/(g*g+p*p);if(C>1)y=e;else if(C>0){for(let T=0;T<i;++T)a[T]=si(s[t+T],s[e+T],C);a.length=i;return}else y=t}for(let C=0;C<i;++C)a[C]=s[y+C];a.length=i}function Eo(s,t,e,i,n){let r=s[t],a=s[t+1];for(t+=i;t<e;t+=i){const h=s[t],c=s[t+1],g=zi(r,a,h,c);g>n&&(n=g),r=h,a=c}return n}function vo(s,t,e,i,n){for(let r=0,a=e.length;r<a;++r){const h=e[r];n=Eo(s,t,h,i,n),t=h}return n}function Lu(s,t,e,i,n){for(let r=0,a=e.length;r<a;++r){const h=e[r];n=vo(s,t,h,i,n),t=h[h.length-1]}return n}function To(s,t,e,i,n,r,a,h,c,g,p){if(t==e)return g;let y,C;if(n===0)if(C=zi(a,h,s[t],s[t+1]),C<g){for(y=0;y<i;++y)c[y]=s[t+y];return c.length=i,C}else return g;p=p||[NaN,NaN];let T=t+i;for(;T<e;)if(Da(s,T-i,T,i,a,h,p),C=zi(a,h,p[0],p[1]),C<g){for(g=C,y=0;y<i;++y)c[y]=p[y];c.length=i,T+=i}else T+=i*Math.max((Math.sqrt(C)-Math.sqrt(g))/n|0,1);if(r&&(Da(s,e-i,t,i,a,h,p),C=zi(a,h,p[0],p[1]),C<g)){for(g=C,y=0;y<i;++y)c[y]=p[y];c.length=i}return g}function Ro(s,t,e,i,n,r,a,h,c,g,p){p=p||[NaN,NaN];for(let y=0,C=e.length;y<C;++y){const T=e[y];g=To(s,t,T,i,n,r,a,h,c,g,p),t=T}return g}function Au(s,t,e,i,n,r,a,h,c,g,p){p=p||[NaN,NaN];for(let y=0,C=e.length;y<C;++y){const T=e[y];g=Ro(s,t,T,i,n,r,a,h,c,g,p),t=T[T.length-1]}return g}function Mu(s,t,e,i){for(let n=0,r=e.length;n<r;++n)s[t++]=e[n];return t}function ir(s,t,e,i){for(let n=0,r=e.length;n<r;++n){const a=e[n];for(let h=0;h<i;++h)s[t++]=a[h]}return t}function wo(s,t,e,i,n){n=n||[];let r=0;for(let a=0,h=e.length;a<h;++a){const c=ir(s,t,e[a],i);n[r++]=c,t=c}return n.length=r,n}function Pu(s,t,e,i,n){n=n||[];let r=0;for(let a=0,h=e.length;a<h;++a){const c=wo(s,t,e[a],i,n[r]);c.length===0&&(c[0]=t),n[r++]=c,t=c[c.length-1]}return n.length=r,n}function So(s,t,e,i,n,r,a){const h=(e-t)/i;if(h<3){for(;t<e;t+=i)r[a++]=s[t],r[a++]=s[t+1];return a}const c=new Array(h);c[0]=1,c[h-1]=1;const g=[t,e-i];let p=0;for(;g.length>0;){const y=g.pop(),C=g.pop();let T=0;const E=s[C],w=s[C+1],L=s[y],I=s[y+1];for(let P=C+i;P<y;P+=i){const k=s[P],N=s[P+1],W=cu(k,N,E,w,L,I);W>T&&(p=P,T=W)}T>n&&(c[(p-t)/i]=1,C+i<p&&g.push(C,p),p+i<y&&g.push(p,y))}for(let y=0;y<h;++y)c[y]&&(r[a++]=s[t+y*i],r[a++]=s[t+y*i+1]);return a}function Ou(s,t,e,i,n,r,a,h){for(let c=0,g=e.length;c<g;++c){const p=e[c];a=So(s,t,p,i,n,r,a),h.push(a),t=p}return a}function Ni(s,t){return t*Math.round(s/t)}function Du(s,t,e,i,n,r,a){if(t==e)return a;let h=Ni(s[t],n),c=Ni(s[t+1],n);t+=i,r[a++]=h,r[a++]=c;let g,p;do if(g=Ni(s[t],n),p=Ni(s[t+1],n),t+=i,t==e)return r[a++]=g,r[a++]=p,a;while(g==h&&p==c);for(;t<e;){const y=Ni(s[t],n),C=Ni(s[t+1],n);if(t+=i,y==g&&C==p)continue;const T=g-h,E=p-c,w=y-h,L=C-c;if(T*L==E*w&&(T<0&&w<T||T==w||T>0&&w>T)&&(E<0&&L<E||E==L||E>0&&L>E)){g=y,p=C;continue}r[a++]=g,r[a++]=p,h=g,c=p,g=y,p=C}return r[a++]=g,r[a++]=p,a}function Fl(s,t,e,i,n,r,a,h){for(let c=0,g=e.length;c<g;++c){const p=e[c];a=Du(s,t,p,i,n,r,a),h.push(a),t=p}return a}function Fu(s,t,e,i,n,r,a,h){for(let c=0,g=e.length;c<g;++c){const p=e[c],y=[];a=Fl(s,t,p,i,n,r,a,y),h.push(y),t=p[p.length-1]}return a}function vi(s,t,e,i,n){n=n!==void 0?n:[];let r=0;for(let a=t;a<e;a+=i)n[r++]=s.slice(a,a+i);return n.length=r,n}function Un(s,t,e,i,n){n=n!==void 0?n:[];let r=0;for(let a=0,h=e.length;a<h;++a){const c=e[a];n[r++]=vi(s,t,c,i,n[r]),t=c}return n.length=r,n}function Zr(s,t,e,i,n){n=n!==void 0?n:[];let r=0;for(let a=0,h=e.length;a<h;++a){const c=e[a];n[r++]=c.length===1&&c[0]===t?[]:Un(s,t,c,i,n[r]),t=c[c.length-1]}return n.length=r,n}function kl(s,t,e,i){let n=0,r=s[e-i],a=s[e-i+1];for(;t<e;t+=i){const h=s[t],c=s[t+1];n+=a*h-r*c,r=h,a=c}return n/2}function Nl(s,t,e,i){let n=0;for(let r=0,a=e.length;r<a;++r){const h=e[r];n+=kl(s,t,h,i),t=h}return n}function ku(s,t,e,i){let n=0;for(let r=0,a=e.length;r<a;++r){const h=e[r];n+=Nl(s,t,h,i),t=h[h.length-1]}return n}class ks extends Ji{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new ks(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,n){return n<qi(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Eo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),To(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))}getArea(){return kl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return vi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=So(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new ks(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ir(this.flatCoordinates,0,t,this.stride),this.changed()}}const Fa=ks;class Io extends Ji{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new Io(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const r=this.flatCoordinates,a=zi(t,e,r[0],r[1]);if(a<n){const h=this.stride;for(let c=0;c<h;++c)i[c]=r[c];return i.length=h,a}else return n}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return Vc(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return po(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Mu(this.flatCoordinates,0,t,this.stride),this.changed()}}const Ns=Io;function Nu(s,t,e,i,n){return!wl(n,function(a){return!Wi(s,t,e,i,a[0],a[1])})}function Wi(s,t,e,i,n,r){let a=0,h=s[e-i],c=s[e-i+1];for(;t<e;t+=i){const g=s[t],p=s[t+1];c<=r?p>r&&(g-h)*(r-c)-(n-h)*(p-c)>0&&a++:p<=r&&(g-h)*(r-c)-(n-h)*(p-c)<0&&a--,h=g,c=p}return a!==0}function bo(s,t,e,i,n,r){if(e.length===0||!Wi(s,t,e[0],i,n,r))return!1;for(let a=1,h=e.length;a<h;++a)if(Wi(s,e[a-1],e[a],i,n,r))return!1;return!0}function Gu(s,t,e,i,n,r){if(e.length===0)return!1;for(let a=0,h=e.length;a<h;++a){const c=e[a];if(bo(s,t,c,i,n,r))return!0;t=c[c.length-1]}return!1}function Gl(s,t,e,i,n,r,a){let h,c,g,p,y,C,T;const E=n[r+1],w=[];for(let P=0,k=e.length;P<k;++P){const N=e[P];for(p=s[N-i],C=s[N-i+1],h=t;h<N;h+=i)y=s[h],T=s[h+1],(E<=C&&T<=E||C<=E&&E<=T)&&(g=(E-C)/(T-C)*(y-p)+p,w.push(g)),p=y,C=T}let L=NaN,I=-1/0;for(w.sort(Ui),p=w[0],h=1,c=w.length;h<c;++h){y=w[h];const P=Math.abs(y-p);P>I&&(g=(p+y)/2,bo(s,t,e,i,g,E)&&(L=g,I=P)),p=y}return isNaN(L)&&(L=n[r]),a?(a.push(L,E,I),a):[L,E,I]}function ju(s,t,e,i,n){let r=[];for(let a=0,h=e.length;a<h;++a){const c=e[a];r=Gl(s,t,c,i,n,2*a,r),t=c[c.length-1]}return r}function jl(s,t,e,i,n){let r;for(t+=i;t<e;t+=i)if(r=n(s.slice(t-i,t),s.slice(t,t+i)),r)return r;return!1}function nr(s,t,e,i,n){const r=Rl(pe(),s,t,e,i);return fe(n,r)?pn(n,r)||r[0]>=n[0]&&r[2]<=n[2]||r[1]>=n[1]&&r[3]<=n[3]?!0:jl(s,t,e,i,function(a,h){return $c(n,a,h)}):!1}function Wu(s,t,e,i,n){for(let r=0,a=e.length;r<a;++r){if(nr(s,t,e[r],i,n))return!0;t=e[r]}return!1}function Wl(s,t,e,i,n){return!!(nr(s,t,e,i,n)||Wi(s,t,e,i,n[0],n[1])||Wi(s,t,e,i,n[0],n[3])||Wi(s,t,e,i,n[2],n[1])||Wi(s,t,e,i,n[2],n[3]))}function Xl(s,t,e,i,n){if(!Wl(s,t,e[0],i,n))return!1;if(e.length===1)return!0;for(let r=1,a=e.length;r<a;++r)if(Nu(s,e[r-1],e[r],i,n)&&!nr(s,e[r-1],e[r],i,n))return!1;return!0}function Xu(s,t,e,i,n){for(let r=0,a=e.length;r<a;++r){const h=e[r];if(Xl(s,t,h,i,n))return!0;t=h[h.length-1]}return!1}function Yu(s,t,e,i){for(;t<e-i;){for(let n=0;n<i;++n){const r=s[t+n];s[t+n]=s[e-i+n],s[e-i+n]=r}t+=i,e-=i}}function Yl(s,t,e,i){let n=0,r=s[e-i],a=s[e-i+1];for(;t<e;t+=i){const h=s[t],c=s[t+1];n+=(h-r)*(c+a),r=h,a=c}return n===0?void 0:n>0}function zl(s,t,e,i,n){n=n!==void 0?n:!1;for(let r=0,a=e.length;r<a;++r){const h=e[r],c=Yl(s,t,h,i);if(r===0){if(n&&c||!n&&!c)return!1}else if(n&&!c||!n&&c)return!1;t=h}return!0}function zu(s,t,e,i,n){for(let r=0,a=e.length;r<a;++r){const h=e[r];if(!zl(s,t,h,i,n))return!1;h.length&&(t=h[h.length-1])}return!0}function qr(s,t,e,i,n){n=n!==void 0?n:!1;for(let r=0,a=e.length;r<a;++r){const h=e[r],c=Yl(s,t,h,i);(r===0?n&&c||!n&&!c:n&&!c||!n&&c)&&Yu(s,t,h,i),t=h}return t}function ka(s,t,e,i,n){for(let r=0,a=e.length;r<a;++r)t=qr(s,t,e[r],i,n);return t}class Vn extends Ji{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?ri(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Vn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<qi(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vo(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ro(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return bo(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return Nl(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),qr(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Un(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Ki(this.getExtent());this.flatInteriorPoint_=Gl(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ns(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Fa(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[];let r=0;for(let a=0,h=i.length;a<h;++a){const c=i[a],g=new Fa(e.slice(r,c),t);n.push(g),r=c}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;zl(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=qr(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Fl(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new Vn(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return Xl(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=wo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const Gs=Vn;function Na(s){const t=s[0],e=s[1],i=s[2],n=s[3],r=[t,e,t,n,i,n,i,e,t,e];return new Vn(r,"XY",[r.length])}const Ri={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class Lo{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null}clone(){const t=this.getColor();return new Lo({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const vn=Lo;function Bl(s,t,e,i,n,r,a){let h,c;const g=(e-t)/i;if(g===1)h=t;else if(g===2)h=t,c=n;else if(g!==0){let p=s[t],y=s[t+1],C=0;const T=[0];for(let L=t+i;L<e;L+=i){const I=s[L],P=s[L+1];C+=Math.sqrt((I-p)*(I-p)+(P-y)*(P-y)),T.push(C),p=I,y=P}const E=n*C,w=Sc(T,E);w<0?(c=(E-T[-w-2])/(T[-w-1]-T[-w-2]),h=t+(-w-2)*i):h=t+w*i}a=a>1?a:2,r=r||new Array(a);for(let p=0;p<a;++p)r[p]=h===void 0?NaN:c===void 0?s[h+p]:si(s[h+p],s[h+i+p],c);return r}function $r(s,t,e,i,n,r){if(e==t)return null;let a;if(n<s[t+i-1])return r?(a=s.slice(t,t+i),a[i-1]=n,a):null;if(s[e-1]<n)return r?(a=s.slice(e-i,e),a[i-1]=n,a):null;if(n==s[t+i-1])return s.slice(t,t+i);let h=t/i,c=e/i;for(;h<c;){const C=h+c>>1;n<s[(C+1)*i-1]?c=C:h=C+1}const g=s[h*i-1];if(n==g)return s.slice((h-1)*i,(h-1)*i+i);const p=s[(h+1)*i-1],y=(n-g)/(p-g);a=[];for(let C=0;C<i-1;++C)a.push(si(s[(h-1)*i+C],s[h*i+C],y));return a.push(n),a}function Bu(s,t,e,i,n,r,a){if(a)return $r(s,t,e[e.length-1],i,n,r);let h;if(n<s[i-1])return r?(h=s.slice(0,i),h[i-1]=n,h):null;if(s[s.length-1]<n)return r?(h=s.slice(s.length-i),h[i-1]=n,h):null;for(let c=0,g=e.length;c<g;++c){const p=e[c];if(t!=p){if(n<s[t+i-1])return null;if(n<=s[p-1])return $r(s,t,p,i,n,!1);t=p}}return null}function Hl(s,t,e,i){let n=s[t],r=s[t+1],a=0;for(let h=t+i;h<e;h+=i){const c=s[h],g=s[h+1];a+=Math.sqrt((c-n)*(c-n)+(g-r)*(g-r)),n=c,r=g}return a}class js extends Ji{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){this.flatCoordinates?ri(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new js(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<qi(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Eo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),To(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))}forEachSegment(t){return jl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,$r(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return vi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Bl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return Hl(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=So(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new js(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return nr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ir(this.flatCoordinates,0,t,this.stride),this.changed()}}const Jr=js;class Ao{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Ao({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const rs=Ao,zt={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Ga(s,t,e){return e===void 0&&(e=[0,0]),e[0]=s[0]+2*t,e[1]=s[1]+2*t,e}function ja(s){return s[0]>0&&s[1]>0}function Ul(s,t,e){return e===void 0&&(e=[0,0]),e[0]=s[0]*t+.5|0,e[1]=s[1]*t+.5|0,e}function ae(s,t){return Array.isArray(s)?s:(t===void 0?t=[s,s]:(t[0]=s,t[1]=s),t)}class Mo{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=ae(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Mo({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return rt()}getImage(t){return rt()}getHitDetectionImage(){return rt()}getPixelRatio(t){return 1}getImageState(){return rt()}getImageSize(){return rt()}getOrigin(){return rt()}getSize(){return rt()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ae(t)}listenImageChange(t){rt()}load(){rt()}unlistenImageChange(t){rt()}}const Vl=Mo,Hu=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,Uu=/^([a-z]*)$|^hsla?\(.*\)$/i;function Kl(s){return typeof s=="string"?s:Zl(s)}function Vu(s){const t=document.createElement("div");if(t.style.color=s,t.style.color!==""){document.body.appendChild(t);const e=getComputedStyle(t).color;return document.body.removeChild(t),e}else return""}const Ku=function(){const t={};let e=0;return function(i){let n;if(t.hasOwnProperty(i))n=t[i];else{if(e>=1024){let r=0;for(const a in t)r++&3||(delete t[a],--e)}n=Zu(i),t[i]=n,++e}return n}}();function Ws(s){return Array.isArray(s)?s:Ku(s)}function Zu(s){let t,e,i,n,r;if(Uu.exec(s)&&(s=Vu(s)),Hu.exec(s)){const a=s.length-1;let h;a<=4?h=1:h=2;const c=a===4||a===8;t=parseInt(s.substr(1+0*h,h),16),e=parseInt(s.substr(1+1*h,h),16),i=parseInt(s.substr(1+2*h,h),16),c?n=parseInt(s.substr(1+3*h,h),16):n=255,h==1&&(t=(t<<4)+t,e=(e<<4)+e,i=(i<<4)+i,c&&(n=(n<<4)+n)),r=[t,e,i,n/255]}else s.startsWith("rgba(")?(r=s.slice(5,-1).split(",").map(Number),Wa(r)):s.startsWith("rgb(")?(r=s.slice(4,-1).split(",").map(Number),r.push(1),Wa(r)):ft(!1,14);return r}function Wa(s){return s[0]=Wt(s[0]+.5|0,0,255),s[1]=Wt(s[1]+.5|0,0,255),s[2]=Wt(s[2]+.5|0,0,255),s[3]=Wt(s[3],0,1),s}function Zl(s){let t=s[0];t!=(t|0)&&(t=t+.5|0);let e=s[1];e!=(e|0)&&(e=e+.5|0);let i=s[2];i!=(i|0)&&(i=i+.5|0);const n=s[3]===void 0?1:Math.round(s[3]*100)/100;return"rgba("+t+","+e+","+i+","+n+")"}function Xe(s){return Array.isArray(s)?Zl(s):s}function _e(s,t,e,i){let n;return e&&e.length?n=e.shift():fo?n=new OffscreenCanvas(s||300,t||300):n=document.createElement("canvas"),s&&(n.width=s),t&&(n.height=t),n.getContext("2d",i)}function ql(s){const t=s.canvas;t.width=1,t.height=1,s.clearRect(0,0,1,1)}function Xa(s,t){const e=t.parentNode;e&&e.replaceChild(s,t)}function Qr(s){return s&&s.parentNode?s.parentNode.removeChild(s):null}function qu(s){for(;s.lastChild;)s.removeChild(s.lastChild)}function $u(s,t){const e=s.childNodes;for(let i=0;;++i){const n=e[i],r=t[i];if(!n&&!r)break;if(n!==r){if(!n){s.appendChild(r);continue}if(!r){s.removeChild(n),--i;continue}s.insertBefore(r,n)}}}const Ts="ol-hidden",sr="ol-unselectable",Po="ol-control",Ya="ol-collapsed",Ju=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),za=["style","variant","weight","size","lineHeight","family"],$l=function(s){const t=s.match(Ju);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,n=za.length;i<n;++i){const r=t[i+1];r!==void 0&&(e[za[i]]=r)}return e.families=e.family.split(/,\s?/),e},Jl="10px sans-serif",oi="#000",Xs="round",Kn=[],Zn=0,Cn="round",qn=10,$n="#000",Jn="center",Ys="middle",Xi=[0,0,0,0],Qn=1,ni=new He;let un=null,to;const eo={},Qu=function(){const t="32px ",e=["monospace","serif"],i=e.length,n="wmytzilWMYTZIL@#/&?$%10ï";let r,a;function h(g,p,y){let C=!0;for(let T=0;T<i;++T){const E=e[T];if(a=zs(g+" "+p+" "+t+E,n),y!=E){const w=zs(g+" "+p+" "+t+y+","+E,n);C=C&&w!=a}}return!!C}function c(){let g=!0;const p=ni.getKeys();for(let y=0,C=p.length;y<C;++y){const T=p[y];ni.get(T)<100&&(h.apply(this,T.split(`
`))?(is(eo),un=null,to=void 0,ni.set(T,100)):(ni.set(T,ni.get(T)+1,!0),g=!1))}g&&(clearInterval(r),r=void 0)}return function(g){const p=$l(g);if(!p)return;const y=p.families;for(let C=0,T=y.length;C<T;++C){const E=y[C],w=p.style+`
`+p.weight+`
`+E;ni.get(w)===void 0&&(ni.set(w,100,!0),h(p.style,p.weight,E)||(ni.set(w,0,!0),r===void 0&&(r=setInterval(c,32))))}}}(),td=function(){let s;return function(t){let e=eo[t];if(e==null){if(fo){const i=$l(t),n=Ql(t,"Å½g");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else s||(s=document.createElement("div"),s.innerHTML="M",s.style.minHeight="0",s.style.maxHeight="none",s.style.height="auto",s.style.padding="0",s.style.border="none",s.style.position="absolute",s.style.display="block",s.style.left="-99999px"),s.style.font=t,document.body.appendChild(s),e=s.offsetHeight,document.body.removeChild(s);eo[t]=e}return e}}();function Ql(s,t){return un||(un=_e(1,1)),s!=to&&(un.font=s,to=un.font),un.measureText(t)}function zs(s,t){return Ql(s,t).width}function Ba(s,t,e){if(t in e)return e[t];const i=t.split(`
`).reduce((n,r)=>Math.max(n,zs(s,r)),0);return e[t]=i,i}function ed(s,t){const e=[],i=[],n=[];let r=0,a=0,h=0,c=0;for(let g=0,p=t.length;g<=p;g+=2){const y=t[g];if(y===`
`||g===p){r=Math.max(r,a),n.push(a),a=0,h+=c;continue}const C=t[g+1]||s.font,T=zs(C,y);e.push(T),a+=T;const E=td(C);i.push(E),c=Math.max(c,E)}return{width:r,height:h,widths:e,heights:i,lineWidths:n}}function id(s,t,e,i,n,r,a,h,c,g,p){s.save(),e!==1&&(s.globalAlpha*=e),t&&s.setTransform.apply(s,t),i.contextInstructions?(s.translate(c,g),s.scale(p[0],p[1]),nd(i,s)):p[0]<0||p[1]<0?(s.translate(c,g),s.scale(p[0],p[1]),s.drawImage(i,n,r,a,h,0,0,a,h)):s.drawImage(i,n,r,a,h,c,g,a*p[0],h*p[1]),s.restore()}function nd(s,t){const e=s.contextInstructions;for(let i=0,n=e.length;i<n;i+=2)Array.isArray(e[i+1])?t[e[i]].apply(t,e[i+1]):t[e[i]]=e[i+1]}class Oo extends Vl{constructor(t){const e=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:1,rotateWithView:e,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius!==void 0?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new Oo({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const i=this.renderOptions_,n=_e(i.size*t,i.size*t);this.draw_(i,n,t),e=n.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return zt.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let n=this.radius_,r=this.radius2_===void 0?n:this.radius2_;if(n<r){const K=n;n=r,r=K}const a=this.radius2_===void 0?this.points_:this.points_*2,h=2*Math.PI/a,c=r*Math.sin(h),g=Math.sqrt(r*r-c*c),p=n-g,y=Math.sqrt(c*c+p*p),C=y/c;if(t==="miter"&&C<=i)return C*e;const T=e/2/C,E=e/2*(p/y),L=Math.sqrt((n+T)*(n+T)+E*E)-n;if(this.radius2_===void 0||t==="bevel")return L*2;const I=n*Math.sin(h),P=Math.sqrt(n*n-I*I),k=r-P,W=Math.sqrt(I*I+k*k)/I;if(W<=i){const K=W*e/2-r-n;return 2*Math.max(L,K)}return L*2}createRenderOptions(){let t=Cn,e=0,i=null,n=0,r,a=0;this.stroke_&&(r=this.stroke_.getColor(),r===null&&(r=$n),r=Xe(r),a=this.stroke_.getWidth(),a===void 0&&(a=Qn),i=this.stroke_.getLineDash(),n=this.stroke_.getLineDashOffset(),t=this.stroke_.getLineJoin(),t===void 0&&(t=Cn),e=this.stroke_.getMiterLimit(),e===void 0&&(e=qn));const h=this.calculateLineJoinSize_(t,a,e),c=Math.max(this.radius_,this.radius2_||0),g=Math.ceil(2*c+h);return{strokeStyle:r,strokeWidth:a,size:g,lineDash:i,lineDashOffset:n,lineJoin:t,miterLimit:e}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let n=this.fill_.getColor();n===null&&(n=oi),e.fillStyle=Xe(n),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if(typeof e=="string"&&(e=Ws(e)),e===null?i=1:Array.isArray(e)&&(i=e.length===4?e[3]:1),i===0){const n=_e(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const n=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(e*=2);const r=this.angle_-Math.PI/2,a=2*Math.PI/e;for(let h=0;h<e;h++){const c=r+h*a,g=h%2===0?i:n;t.lineTo(g*Math.cos(c),g*Math.sin(c))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=oi,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const th=Oo;class Do extends th{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new Do({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const Fo=Do;class rr{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Ha,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new rr({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Ha,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function sd(s){let t;if(typeof s=="function")t=s;else{let e;Array.isArray(s)?e=s:(ft(typeof s.getZIndex=="function",41),e=[s]),t=function(){return e}}return t}let Lr=null;function rd(s,t){if(!Lr){const e=new vn({color:"rgba(255,255,255,0.4)"}),i=new rs({color:"#3399CC",width:1.25});Lr=[new rr({image:new Fo({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return Lr}function Ha(s){return s.getGeometry()}const En=rr,od="#333";class ko{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=ae(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new vn({color:od}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding}clone(){const t=this.getScale();return new ko({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=ae(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const ad=ko,St={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class ld extends He{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[St.OPACITY]=t.opacity!==void 0?t.opacity:1,ft(typeof e[St.OPACITY]=="number",64),e[St.VISIBLE]=t.visible!==void 0?t.visible:!0,e[St.Z_INDEX]=t.zIndex,e[St.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[St.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[St.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[St.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return e.opacity=Wt(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=i===void 0&&!e.managed?1/0:i,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return rt()}getLayerStatesArray(t){return rt()}getExtent(){return this.get(St.EXTENT)}getMaxResolution(){return this.get(St.MAX_RESOLUTION)}getMinResolution(){return this.get(St.MIN_RESOLUTION)}getMinZoom(){return this.get(St.MIN_ZOOM)}getMaxZoom(){return this.get(St.MAX_ZOOM)}getOpacity(){return this.get(St.OPACITY)}getSourceState(){return rt()}getVisible(){return this.get(St.VISIBLE)}getZIndex(){return this.get(St.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(St.EXTENT,t)}setMaxResolution(t){this.set(St.MAX_RESOLUTION,t)}setMinResolution(t){this.set(St.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(St.MAX_ZOOM,t)}setMinZoom(t){this.set(St.MIN_ZOOM,t)}setOpacity(t){ft(typeof t=="number",64),this.set(St.OPACITY,t)}setVisible(t){this.set(St.VISIBLE,t)}setZIndex(t){this.set(St.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const eh=ld;class hd extends eh{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(St.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(St.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed()}handleSourcePropertyChange_(){this.sourceChangeKey_&&(Ot(this.sourceChangeKey_),this.sourceChangeKey_=null);const t=this.getSource();t&&(this.sourceChangeKey_=xt(t,ct.CHANGE,this.handleSourceChange_,this)),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):new Promise(e=>e([]))}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}render(t,e){const i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(St.MAP,t)}getMapInternal(){return this.get(St.MAP)}setMap(t){this.mapPrecomposeKey_&&(Ot(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Ot(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=xt(t,Ri.PRECOMPOSE,function(e){const n=e.frameState.layerStatesArray,r=this.getLayerState(!1);ft(!n.some(function(a){return a.layer===r.layer}),67),n.push(r)},this),this.mapRenderKey_=xt(this,ct.CHANGE,t.render,t),this.changed())}setSource(t){this.set(St.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function No(s,t){if(!s.visible)return!1;const e=t.resolution;if(e<s.minResolution||e>=s.maxResolution)return!1;const i=t.zoom;return i>s.minZoom&&i<=s.maxZoom}const or=hd;function cd(s,t,e,i,n){ih(s,t,e||0,i||s.length-1,n||ud)}function ih(s,t,e,i,n){for(;i>e;){if(i-e>600){var r=i-e+1,a=t-e+1,h=Math.log(r),c=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*c*(r-c)/r)*(a-r/2<0?-1:1),p=Math.max(e,Math.floor(t-a*c/r+g)),y=Math.min(i,Math.floor(t+(r-a)*c/r+g));ih(s,t,p,y,n)}var C=s[t],T=e,E=i;for(Dn(s,e,t),n(s[i],C)>0&&Dn(s,e,i);T<E;){for(Dn(s,T,E),T++,E--;n(s[T],C)<0;)T++;for(;n(s[E],C)>0;)E--}n(s[e],C)===0?Dn(s,e,E):(E++,Dn(s,E,i)),E<=t&&(e=E+1),t<=E&&(i=E-1)}}function Dn(s,t,e){var i=s[t];s[t]=s[e],s[e]=i}function ud(s,t){return s<t?-1:s>t?1:0}let nh=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const i=[];if(!ws(t,e))return i;const n=this.toBBox,r=[];for(;e;){for(let a=0;a<e.children.length;a++){const h=e.children[a],c=e.leaf?n(h):h;ws(t,c)&&(e.leaf?i.push(h):Mr(t,c)?this._all(h,i):r.push(h))}e=r.pop()}return i}collides(t){let e=this.data;if(!ws(t,e))return!1;const i=[];for(;e;){for(let n=0;n<e.children.length;n++){const r=e.children[n],a=e.leaf?this.toBBox(r):r;if(ws(t,a)){if(e.leaf||Mr(t,a))return!0;i.push(r)}}e=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const i=this.data;this.data=e,e=i}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=dn([]),this}remove(t,e){if(!t)return this;let i=this.data;const n=this.toBBox(t),r=[],a=[];let h,c,g;for(;i||r.length;){if(i||(i=r.pop(),c=r[r.length-1],h=a.pop(),g=!0),i.leaf){const p=dd(t,i.children,e);if(p!==-1)return i.children.splice(p,1),r.push(i),this._condense(r),this}!g&&!i.leaf&&Mr(i,n)?(r.push(i),a.push(h),h=0,c=i,i=i.children[0]):c?(h++,i=c.children[h],g=!1):i=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const i=[];for(;t;)t.leaf?e.push(...t.children):i.push(...t.children),t=i.pop();return e}_build(t,e,i,n){const r=i-e+1;let a=this._maxEntries,h;if(r<=a)return h=dn(t.slice(e,i+1)),ln(h,this.toBBox),h;n||(n=Math.ceil(Math.log(r)/Math.log(a)),a=Math.ceil(r/Math.pow(a,n-1))),h=dn([]),h.leaf=!1,h.height=n;const c=Math.ceil(r/a),g=c*Math.ceil(Math.sqrt(a));Ua(t,e,i,g,this.compareMinX);for(let p=e;p<=i;p+=g){const y=Math.min(p+g-1,i);Ua(t,p,y,c,this.compareMinY);for(let C=p;C<=y;C+=c){const T=Math.min(C+c-1,y);h.children.push(this._build(t,C,T,n-1))}}return ln(h,this.toBBox),h}_chooseSubtree(t,e,i,n){for(;n.push(e),!(e.leaf||n.length-1===i);){let r=1/0,a=1/0,h;for(let c=0;c<e.children.length;c++){const g=e.children[c],p=Ar(g),y=pd(t,g)-p;y<a?(a=y,r=p<r?p:r,h=g):y===a&&p<r&&(r=p,h=g)}e=h||e.children[0]}return e}_insert(t,e,i){const n=i?t:this.toBBox(t),r=[],a=this._chooseSubtree(n,this.data,e,r);for(a.children.push(t),Nn(a,n);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(n,r,e)}_split(t,e){const i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);const a=this._chooseSplitIndex(i,r,n),h=dn(i.children.splice(a,i.children.length-a));h.height=i.height,h.leaf=i.leaf,ln(i,this.toBBox),ln(h,this.toBBox),e?t[e-1].children.push(h):this._splitRoot(i,h)}_splitRoot(t,e){this.data=dn([t,e]),this.data.height=t.height+1,this.data.leaf=!1,ln(this.data,this.toBBox)}_chooseSplitIndex(t,e,i){let n,r=1/0,a=1/0;for(let h=e;h<=i-e;h++){const c=kn(t,0,h,this.toBBox),g=kn(t,h,i,this.toBBox),p=_d(c,g),y=Ar(c)+Ar(g);p<r?(r=p,n=h,a=y<a?y:a):p===r&&y<a&&(a=y,n=h)}return n||i-e}_chooseSplitAxis(t,e,i){const n=t.leaf?this.compareMinX:fd,r=t.leaf?this.compareMinY:gd,a=this._allDistMargin(t,e,i,n),h=this._allDistMargin(t,e,i,r);a<h&&t.children.sort(n)}_allDistMargin(t,e,i,n){t.children.sort(n);const r=this.toBBox,a=kn(t,0,e,r),h=kn(t,i-e,i,r);let c=Rs(a)+Rs(h);for(let g=e;g<i-e;g++){const p=t.children[g];Nn(a,t.leaf?r(p):p),c+=Rs(a)}for(let g=i-e-1;g>=e;g--){const p=t.children[g];Nn(h,t.leaf?r(p):p),c+=Rs(h)}return c}_adjustParentBBoxes(t,e,i){for(let n=i;n>=0;n--)Nn(e[n],t)}_condense(t){for(let e=t.length-1,i;e>=0;e--)t[e].children.length===0?e>0?(i=t[e-1].children,i.splice(i.indexOf(t[e]),1)):this.clear():ln(t[e],this.toBBox)}};function dd(s,t,e){if(!e)return t.indexOf(s);for(let i=0;i<t.length;i++)if(e(s,t[i]))return i;return-1}function ln(s,t){kn(s,0,s.children.length,t,s)}function kn(s,t,e,i,n){n||(n=dn(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let r=t;r<e;r++){const a=s.children[r];Nn(n,s.leaf?i(a):a)}return n}function Nn(s,t){return s.minX=Math.min(s.minX,t.minX),s.minY=Math.min(s.minY,t.minY),s.maxX=Math.max(s.maxX,t.maxX),s.maxY=Math.max(s.maxY,t.maxY),s}function fd(s,t){return s.minX-t.minX}function gd(s,t){return s.minY-t.minY}function Ar(s){return(s.maxX-s.minX)*(s.maxY-s.minY)}function Rs(s){return s.maxX-s.minX+(s.maxY-s.minY)}function pd(s,t){return(Math.max(t.maxX,s.maxX)-Math.min(t.minX,s.minX))*(Math.max(t.maxY,s.maxY)-Math.min(t.minY,s.minY))}function _d(s,t){const e=Math.max(s.minX,t.minX),i=Math.max(s.minY,t.minY),n=Math.min(s.maxX,t.maxX),r=Math.min(s.maxY,t.maxY);return Math.max(0,n-e)*Math.max(0,r-i)}function Mr(s,t){return s.minX<=t.minX&&s.minY<=t.minY&&t.maxX<=s.maxX&&t.maxY<=s.maxY}function ws(s,t){return t.minX<=s.maxX&&t.minY<=s.maxY&&t.maxX>=s.minX&&t.maxY>=s.minY}function dn(s){return{children:s,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Ua(s,t,e,i,n){const r=[t,e];for(;r.length;){if(e=r.pop(),t=r.pop(),e-t<=i)continue;const a=t+Math.ceil((e-t)/i/2)*i;cd(s,a,t,e,n),r.push(t,a,a,e)}}class md{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];!(t++&3)&&!i.hasListener()&&(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){const n=Va(t,e,i);return n in this.cache_?this.cache_[n]:null}set(t,e,i,n){const r=Va(t,e,i);this.cache_[r]=n,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Va(s,t,e){const i=e?Kl(e):"null";return t+":"+s+":"+i}const Bs=new md;function sh(s,t,e){const i=s;let n=!0,r=!1,a=!1;const h=[Os(i,ct.LOAD,function(){a=!0,r||t()})];return i.src&&Xc?(r=!0,i.decode().then(function(){n&&t()}).catch(function(c){n&&(a?t():e())})):h.push(Os(i,ct.ERROR,e)),function(){n=!1,h.forEach(Ot)}}let Fn=null;class yd extends qs{constructor(t,e,i,n,r,a){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=a,this.unlisten_=null,this.imageState_=r,this.size_=i,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===zt.LOADED){Fn||(Fn=_e(1,1)),Fn.drawImage(this.image_,0,0);try{Fn.getImageData(0,0,1,1),this.tainted_=!1}catch{Fn=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ct.CHANGE)}handleImageError_(){this.imageState_=zt.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=zt.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=_e(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===zt.IDLE){this.image_||this.initializeImage_(),this.imageState_=zt.LOADING;try{this.image_.src=this.src_}catch{this.handleImageError_()}this.unlisten_=sh(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==zt.LOADED)return;const e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const n=i.getContext("2d");n.scale(t,t),n.drawImage(e,0,0),n.globalCompositeOperation="multiply",n.fillStyle=Kl(this.color_),n.fillRect(0,0,i.width/t,i.height/t),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),this.canvas_[t]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function xd(s,t,e,i,n,r){let a=Bs.get(t,i,r);return a||(a=new yd(s,t,e,i,n,r),Bs.set(t,i,r,a)),a}class Go extends Vl{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,n=t.scale!==void 0?t.scale:1,r=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:i,scale:n,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const a=t.img!==void 0?t.img:null;this.imgSize_=t.imgSize;let h=t.src;ft(!(h!==void 0&&a),4),ft(!a||a&&this.imgSize_,5),(h===void 0||h.length===0)&&a&&(h=a.src||vt(a)),ft(h!==void 0&&h.length>0,6);const c=t.src!==void 0?zt.IDLE:zt.LOADED;this.color_=t.color!==void 0?Ws(t.color):null,this.iconImage_=xd(a,h,this.imgSize_!==void 0?this.imgSize_:null,this.crossOrigin_,c,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null}clone(){const t=this.getScale();return new Go({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:Array.isArray(t)?t.slice():t,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const n=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!n)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=n[0]),this.anchorYUnits_=="fraction"&&(t[1]*=n[1])}if(this.anchorOrigin_!="top-left"){if(!n)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+n[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+n[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(t){this.iconImage_.addEventListener(ct.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(ct.CHANGE,t)}}const rh=Go;function Ka(s){return new En({fill:ts(s,""),stroke:es(s,""),text:Cd(s),image:Ed(s)})}function ts(s,t){const e=s[t+"fill-color"];if(e)return new vn({color:e})}function es(s,t){const e=s[t+"stroke-width"],i=s[t+"stroke-color"];if(!(!e&&!i))return new rs({width:e,color:i,lineCap:s[t+"stroke-line-cap"],lineJoin:s[t+"stroke-line-join"],lineDash:s[t+"stroke-line-dash"],lineDashOffset:s[t+"stroke-line-dash-offset"],miterLimit:s[t+"stroke-miter-limit"]})}function Cd(s){const t=s["text-value"];return t?new ad({text:t,font:s["text-font"],maxAngle:s["text-max-angle"],offsetX:s["text-offset-x"],offsetY:s["text-offset-y"],overflow:s["text-overflow"],placement:s["text-placement"],scale:s["text-scale"],rotateWithView:s["text-rotate-with-view"],rotation:s["text-rotation"],textAlign:s["text-align"],justify:s["text-justify"],textBaseline:s["text-baseline"],padding:s["text-padding"],fill:ts(s,"text-"),backgroundFill:ts(s,"text-background-"),stroke:es(s,"text-"),backgroundStroke:es(s,"text-background-")}):void 0}function Ed(s){const t=s["icon-src"],e=s["icon-img"];if(t||e)return new rh({src:t,img:e,imgSize:s["icon-img-size"],anchor:s["icon-anchor"],anchorOrigin:s["icon-anchor-origin"],anchorXUnits:s["icon-anchor-x-units"],anchorYUnits:s["icon-anchor-y-units"],color:s["icon-color"],crossOrigin:s["icon-cross-origin"],offset:s["icon-offset"],displacement:s["icon-displacement"],opacity:s["icon-opacity"],scale:s["icon-scale"],rotation:s["icon-rotation"],rotateWithView:s["icon-rotate-with-view"],size:s["icon-size"],declutterMode:s["icon-declutter-mode"]});const i=s["shape-points"];if(i){const r="shape-";return new th({points:i,fill:ts(s,r),stroke:es(s,r),radius:s["shape-radius"],radius1:s["shape-radius1"],radius2:s["shape-radius2"],angle:s["shape-angle"],displacement:s["shape-displacement"],rotation:s["shape-rotation"],rotateWithView:s["shape-rotate-with-view"],scale:s["shape-scale"],declutterMode:s["shape-declutter-mode"]})}const n=s["circle-radius"];if(n){const r="circle-";return new Fo({radius:n,fill:ts(s,r),stroke:es(s,r),displacement:s["circle-displacement"],scale:s["circle-scale"],rotation:s["circle-rotation"],rotateWithView:s["circle-rotate-with-view"],declutterMode:s["circle-declutter-mode"]})}}const Za={RENDER_ORDER:"renderOrder"};class vd extends or{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter!==void 0?t.declutter:!1,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Za.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new nh(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(Za.RENDER_ORDER,t)}setStyle(t){let e;if(t===void 0)e=rd;else if(t===null)e=null;else if(typeof t=="function")e=t;else if(t instanceof En)e=t;else if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let r=0;r<i;++r){const a=t[r];a instanceof En?n[r]=a:n[r]=Ka(a)}e=n}else e=Ka(t);this.style_=e,this.styleFunction_=t===null?void 0:sd(this.style_),this.changed()}}const Td=vd,os={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Ss=[os.FILL],Ti=[os.STROKE],Yi=[os.BEGIN_PATH],qa=[os.CLOSE_PATH],nt=os;class Rd{drawCustom(t,e,i,n){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const oh=Rd;class wd extends oh{constructor(t,e,i,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,r=this.coordinates;let a=r.length;for(let h=0,c=t.length;h<c;h+=e)n[0]=t[h],n[1]=t[h+1],Js(i,n)&&(r[a++]=n[0],r[a++]=n[1]);return a}appendFlatLineCoordinates(t,e,i,n,r,a){const h=this.coordinates;let c=h.length;const g=this.getBufferedMaxExtent();a&&(e+=n);let p=t[e],y=t[e+1];const C=this.tmpCoordinate_;let T=!0,E,w,L;for(E=e+n;E<i;E+=n)C[0]=t[E],C[1]=t[E+1],L=Yr(g,C),L!==w?(T&&(h[c++]=p,h[c++]=y,T=!1),h[c++]=C[0],h[c++]=C[1]):L===Vt.INTERSECTING?(h[c++]=C[0],h[c++]=C[1],T=!1):T=!0,p=C[0],y=C[1],w=L;return(r&&T||E===e+n)&&(h[c++]=p,h[c++]=y),c}drawCustomCoordinates_(t,e,i,n,r){for(let a=0,h=i.length;a<h;++a){const c=i[a],g=this.appendFlatLineCoordinates(t,e,c,n,!1,!1);r.push(g),e=c}return e}drawCustom(t,e,i,n){this.beginGeometry(t,e);const r=t.getType(),a=t.getStride(),h=this.coordinates.length;let c,g,p,y,C;switch(r){case"MultiPolygon":c=t.getOrientedFlatCoordinates(),y=[];const T=t.getEndss();C=0;for(let E=0,w=T.length;E<w;++E){const L=[];C=this.drawCustomCoordinates_(c,C,T[E],a,L),y.push(L)}this.instructions.push([nt.CUSTOM,h,y,t,i,Zr]),this.hitDetectionInstructions.push([nt.CUSTOM,h,y,t,n||i,Zr]);break;case"Polygon":case"MultiLineString":p=[],c=r=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),C=this.drawCustomCoordinates_(c,0,t.getEnds(),a,p),this.instructions.push([nt.CUSTOM,h,p,t,i,Un]),this.hitDetectionInstructions.push([nt.CUSTOM,h,p,t,n||i,Un]);break;case"LineString":case"Circle":c=t.getFlatCoordinates(),g=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([nt.CUSTOM,h,g,t,i,vi]),this.hitDetectionInstructions.push([nt.CUSTOM,h,g,t,n||i,vi]);break;case"MultiPoint":c=t.getFlatCoordinates(),g=this.appendFlatPointCoordinates(c,a),g>h&&(this.instructions.push([nt.CUSTOM,h,g,t,i,vi]),this.hitDetectionInstructions.push([nt.CUSTOM,h,g,t,n||i,vi]));break;case"Point":c=t.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),g=this.coordinates.length,this.instructions.push([nt.CUSTOM,h,g,t,i]),this.hitDetectionInstructions.push([nt.CUSTOM,h,g,t,n||i]);break}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[nt.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[nt.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const i=t.length;let n,r,a=-1;for(e=0;e<i;++e)n=t[e],r=n[0],r==nt.END_GEOMETRY?a=e:r==nt.BEGIN_GEOMETRY&&(n[2]=e,Ic(this.hitDetectionInstructions,a,e),a=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const n=t.getColor();i.fillStyle=Xe(n||oi)}else i.fillStyle=void 0;if(e){const n=e.getColor();i.strokeStyle=Xe(n||$n);const r=e.getLineCap();i.lineCap=r!==void 0?r:Xs;const a=e.getLineDash();i.lineDash=a?a.slice():Kn;const h=e.getLineDashOffset();i.lineDashOffset=h||Zn;const c=e.getLineJoin();i.lineJoin=c!==void 0?c:Cn;const g=e.getWidth();i.lineWidth=g!==void 0?g:Qn;const p=e.getMiterLimit();i.miterLimit=p!==void 0?p:qn,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[nt.SET_FILL_STYLE,e];return typeof e!="string"&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[nt.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,n=t.lineCap,r=t.lineDash,a=t.lineDashOffset,h=t.lineJoin,c=t.lineWidth,g=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!Zi(t.currentLineDash,r)||t.currentLineDashOffset!=a||t.currentLineJoin!=h||t.currentLineWidth!=c||t.currentMiterLimit!=g)&&(i!==void 0&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=a,t.currentLineJoin=h,t.currentLineWidth=c,t.currentMiterLimit=g)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[nt.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=El(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;Yn(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const as=wd;class Sd extends as{constructor(t,e,i,n){super(t,e,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,a=this.appendFlatPointCoordinates(i,n);this.instructions.push([nt.DRAW_IMAGE,r,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([nt.DRAW_IMAGE,r,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),r=this.coordinates.length,a=this.appendFlatPointCoordinates(i,n);this.instructions.push([nt.DRAW_IMAGE,r,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([nt.DRAW_IMAGE,r,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),n=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const Id=Sd;class bd extends as{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(t,e,i,n){const r=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),h=[nt.MOVE_TO_LINE_TO,r,a];return this.instructions.push(h),this.hitDetectionInstructions.push(h),i}drawLineString(t,e){const i=this.state,n=i.strokeStyle,r=i.lineWidth;if(n===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([nt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,Kn,Zn],Yi);const a=t.getFlatCoordinates(),h=t.getStride();this.drawFlatCoordinates_(a,0,a.length,h),this.hitDetectionInstructions.push(Ti),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state,n=i.strokeStyle,r=i.lineWidth;if(n===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([nt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],Yi);const a=t.getEnds(),h=t.getFlatCoordinates(),c=t.getStride();let g=0;for(let p=0,y=a.length;p<y;++p)g=this.drawFlatCoordinates_(h,g,a[p],c);this.hitDetectionInstructions.push(Ti),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(Ti),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(Ti),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(Yi)}}const Ld=bd;class Ad extends as{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinatess_(t,e,i,n){const r=this.state,a=r.fillStyle!==void 0,h=r.strokeStyle!==void 0,c=i.length;this.instructions.push(Yi),this.hitDetectionInstructions.push(Yi);for(let g=0;g<c;++g){const p=i[g],y=this.coordinates.length,C=this.appendFlatLineCoordinates(t,e,p,n,!0,!h),T=[nt.MOVE_TO_LINE_TO,y,C];this.instructions.push(T),this.hitDetectionInstructions.push(T),h&&(this.instructions.push(qa),this.hitDetectionInstructions.push(qa)),e=p}return a&&(this.instructions.push(Ss),this.hitDetectionInstructions.push(Ss)),h&&(this.instructions.push(Ti),this.hitDetectionInstructions.push(Ti)),e}drawCircle(t,e){const i=this.state,n=i.fillStyle,r=i.strokeStyle;if(n===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([nt.SET_FILL_STYLE,oi]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([nt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const a=t.getFlatCoordinates(),h=t.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,h,!1,!1);const g=[nt.CIRCLE,c];this.instructions.push(Yi,g),this.hitDetectionInstructions.push(Yi,g),i.fillStyle!==void 0&&(this.instructions.push(Ss),this.hitDetectionInstructions.push(Ss)),i.strokeStyle!==void 0&&(this.instructions.push(Ti),this.hitDetectionInstructions.push(Ti)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state,n=i.fillStyle,r=i.strokeStyle;if(n===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([nt.SET_FILL_STYLE,oi]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([nt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const a=t.getEnds(),h=t.getOrientedFlatCoordinates(),c=t.getStride();this.drawFlatCoordinatess_(h,0,a,c),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state,n=i.fillStyle,r=i.strokeStyle;if(n===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([nt.SET_FILL_STYLE,oi]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([nt.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const a=t.getEndss(),h=t.getOrientedFlatCoordinates(),c=t.getStride();let g=0;for(let p=0,y=a.length;p<y;++p)g=this.drawFlatCoordinatess_(h,g,a[p],c);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let i=0,n=e.length;i<n;++i)e[i]=Ni(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}const $a=Ad;function Md(s,t,e,i,n){let r=e,a=e,h=0,c=0,g=e,p,y,C,T,E,w,L,I,P,k;for(y=e;y<i;y+=n){const N=t[y],W=t[y+1];E!==void 0&&(P=N-E,k=W-w,T=Math.sqrt(P*P+k*k),L!==void 0&&(c+=C,p=Math.acos((L*P+I*k)/(C*T)),p>s&&(c>h&&(h=c,r=g,a=y),c=0,g=y-n)),C=T,L=P,I=k),E=N,w=W}return c+=T,c>h?[g,y]:[r,a]}const Wn={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class Pd extends as{constructor(t,e,i,n){super(t,e,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textFillState_,n=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!i&&!n)return;const a=this.coordinates;let h=a.length;const c=t.getType();let g=null,p=t.getStride();if(r.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!fe(this.getBufferedMaxExtent(),t.getExtent()))return;let y;if(g=t.getFlatCoordinates(),c=="LineString")y=[g.length];else if(c=="MultiLineString")y=t.getEnds();else if(c=="Polygon")y=t.getEnds().slice(0,1);else if(c=="MultiPolygon"){const w=t.getEndss();y=[];for(let L=0,I=w.length;L<I;++L)y.push(w[L][0])}this.beginGeometry(t,e);const C=r.textAlign;let T=0,E;for(let w=0,L=y.length;w<L;++w){if(C==null){const P=Md(r.maxAngle,g,T,y[w],p);T=P[0],E=P[1]}else E=y[w];for(let P=T;P<E;P+=p)a.push(g[P],g[P+1]);const I=a.length;T=y[w],this.drawChars_(h,I),h=I}this.endGeometry(e)}else{let y=r.overflow?null:[];switch(c){case"Point":case"MultiPoint":g=t.getFlatCoordinates();break;case"LineString":g=t.getFlatMidpoint();break;case"Circle":g=t.getCenter();break;case"MultiLineString":g=t.getFlatMidpoints(),p=2;break;case"Polygon":g=t.getFlatInteriorPoint(),r.overflow||y.push(g[2]/this.resolution),p=3;break;case"MultiPolygon":const L=t.getFlatInteriorPoints();g=[];for(let I=0,P=L.length;I<P;I+=3)r.overflow||y.push(L[I+2]/this.resolution),g.push(L[I],L[I+1]);if(g.length===0)return;p=2;break}const C=this.appendFlatPointCoordinates(g,p);if(C===h)return;if(y&&(C-h)/2!==g.length/p){let L=h/2;y=y.filter((I,P)=>{const k=a[(L+P)*2]===g[P*p]&&a[(L+P)*2+1]===g[P*p+1];return k||--L,k})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let T=r.padding;if(T!=Xi&&(r.scale[0]<0||r.scale[1]<0)){let L=r.padding[0],I=r.padding[1],P=r.padding[2],k=r.padding[3];r.scale[0]<0&&(I=-I,k=-k),r.scale[1]<0&&(L=-L,P=-P),T=[L,I,P,k]}const E=this.pixelRatio;this.instructions.push([nt.DRAW_IMAGE,h,C,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,T==Xi?Xi:T.map(function(L){return L*E}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const w=1/E;this.hitDetectionInstructions.push([nt.DRAW_IMAGE,h,C,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[w,w],NaN,void 0,this.declutterImageWithText_,T,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||Jn,justify:e.justify,textBaseline:e.textBaseline||Ys,scale:e.scale});const a=this.fillKey_;i&&(a in this.fillStates||(this.fillStates[a]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,n=this.textState_,r=this.strokeKey_,a=this.textKey_,h=this.fillKey_;this.saveTextStates_();const c=this.pixelRatio,g=Wn[n.textBaseline],p=this.textOffsetY_*c,y=this.text_,C=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([nt.DRAW_CHARS,t,e,g,n.overflow,h,n.maxAngle,c,p,r,C*c,y,a,1]),this.hitDetectionInstructions.push([nt.DRAW_CHARS,t,e,g,n.overflow,h,n.maxAngle,1,p,r,C,y,a,1/c])}setTextStyle(t,e){let i,n,r;if(!t)this.text_="";else{const a=t.getFill();a?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=Xe(a.getColor()||oi)):(n=null,this.textFillState_=n);const h=t.getStroke();if(!h)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const E=h.getLineDash(),w=h.getLineDashOffset(),L=h.getWidth(),I=h.getMiterLimit();r.lineCap=h.getLineCap()||Xs,r.lineDash=E?E.slice():Kn,r.lineDashOffset=w===void 0?Zn:w,r.lineJoin=h.getLineJoin()||Cn,r.lineWidth=L===void 0?Qn:L,r.miterLimit=I===void 0?qn:I,r.strokeStyle=Xe(h.getColor()||$n)}i=this.textState_;const c=t.getFont()||Jl;Qu(c);const g=t.getScaleArray();i.overflow=t.getOverflow(),i.font=c,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Ys,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||Xi,i.scale=g===void 0?[1,1]:g;const p=t.getOffsetX(),y=t.getOffsetY(),C=t.getRotateWithView(),T=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=p===void 0?0:p,this.textOffsetY_=y===void 0?0:y,this.textRotateWithView_=C===void 0?!1:C,this.textRotation_=T===void 0?0:T,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:vt(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n?typeof n.fillStyle=="string"?n.fillStyle:"|"+vt(n.fillStyle):""}this.declutterImageWithText_=e}}const Od={Circle:$a,Default:as,Image:Id,LineString:Ld,Polygon:$a,Text:Pd};class Dd{constructor(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const n in i){const r=i[n].finish();t[e][n]=r}}return t}getBuilder(t,e){const i=t!==void 0?t.toString():"0";let n=this.buildersByZIndex_[i];n===void 0&&(n={},this.buildersByZIndex_[i]=n);let r=n[e];if(r===void 0){const a=Od[e];r=new a(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=r}return r}}const Ja=Dd;class Fd extends ml{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return rt()}getData(t){return null}prepareFrame(t){return rt()}renderFrame(t,e){return rt()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return function(n,r){const a=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,r,a)}.bind(this)}forEachFeatureAtCoordinate(t,e,i,n,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===zt.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=zt.LOADED&&e!=zt.ERROR&&t.addEventListener(ct.CHANGE,this.boundHandleImageChange_),e==zt.IDLE&&(t.load(),e=t.getState()),e==zt.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const kd=Fd;class Nd extends ai{constructor(t,e,i,n){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=n}}const ah=Nd,Qa=[];let fn=null;function Gd(){const s=document.createElement("canvas");s.width=1,s.height=1,fn=s.getContext("2d")}class jd extends kd{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Ye(),this.pixelTransform=Ye(),this.inversePixelTransform=Ye(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){fn||Gd(),fn.clearRect(0,0,1,1);let n;try{fn.drawImage(t,e,i,1,1,0,0,1,1),n=fn.getImageData(0,0,1,1).data}catch{return fn=null,null}return n}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,e,i){const n=this.getLayer().getClassName();let r,a;if(t&&t.className===n&&(!i||t&&t.style.backgroundColor&&Zi(Ws(t.style.backgroundColor),Ws(i)))){const h=t.firstElementChild;h instanceof HTMLCanvasElement&&(a=h.getContext("2d"))}if(a&&a.canvas.style.transform===e?(this.container=t,this.context=a,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=n;let h=r.style;h.position="absolute",h.width="100%",h.height="100%",a=_e();const c=a.canvas;r.appendChild(c),h=c.style,h.position="absolute",h.left="0",h.transformOrigin="top left",this.container=r,this.context=a}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const n=$i(i),r=er(i),a=tr(i),h=Qs(i);Kt(e.coordinateToPixelTransform,n),Kt(e.coordinateToPixelTransform,r),Kt(e.coordinateToPixelTransform,a),Kt(e.coordinateToPixelTransform,h);const c=this.inversePixelTransform;Kt(c,n),Kt(c,r),Kt(c,a),Kt(c,h),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.lineTo(Math.round(h[0]),Math.round(h[1])),t.clip()}dispatchRenderEvent_(t,e,i){const n=this.getLayer();if(n.hasListener(t)){const r=new ah(t,this.inversePixelTransform,i,e);n.dispatchEvent(r)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(Ri.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(Ri.POSTRENDER,t,e)}getRenderTransform(t,e,i,n,r,a,h){const c=r/2,g=a/2,p=n/e,y=-p,C=-t[0]+h,T=-t[1];return Si(this.tempTransform,c,g,p,y,-i,C,T)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const lh=jd;function Wd(s,t,e,i,n,r,a,h,c,g,p,y){let C=s[t],T=s[t+1],E=0,w=0,L=0,I=0;function P(){E=C,w=T,t+=i,C=s[t],T=s[t+1],I+=L,L=Math.sqrt((C-E)*(C-E)+(T-w)*(T-w))}do P();while(t<e-i&&I+L<r);let k=L===0?0:(r-I)/L;const N=si(E,C,k),W=si(w,T,k),K=t-i,d=I,$=r+h*c(g,n,p);for(;t<e-i&&I+L<$;)P();k=L===0?0:($-I)/L;const B=si(E,C,k),ot=si(w,T,k);let mt;if(y){const tt=[N,W,B,ot];Ol(tt,0,4,2,y,tt,tt),mt=tt[0]>tt[2]}else mt=N>B;const dt=Math.PI,Z=[],At=K+i===t;t=K,L=0,I=d,C=s[t],T=s[t+1];let Q;if(At){P(),Q=Math.atan2(T-w,C-E),mt&&(Q+=Q>0?-dt:dt);const tt=(B+N)/2,H=(ot+W)/2;return Z[0]=[tt,H,($-r)/2,Q,n],Z}n=n.replace(/\n/g," ");for(let tt=0,H=n.length;tt<H;){P();let ht=Math.atan2(T-w,C-E);if(mt&&(ht+=ht>0?-dt:dt),Q!==void 0){let Ct=ht-Q;if(Ct+=Ct>dt?-2*dt:Ct<-dt?2*dt:0,Math.abs(Ct)>a)return null}Q=ht;const Tt=tt;let Rt=0;for(;tt<H;++tt){const Ct=mt?H-tt-1:tt,wt=h*c(g,n[Ct],p);if(t+i<e&&I+L<r+Rt+wt/2)break;Rt+=wt}if(tt===Tt)continue;const kt=mt?n.substring(H-Tt,H-tt):n.substring(Tt,tt);k=L===0?0:(r+Rt/2-I)/L;const Y=si(E,C,k),Zt=si(w,T,k);Z.push([Y,Zt,Rt/2,ht,kt]),r+=Rt}return Z}const hn=pe(),gi=[],ti=[],ei=[],pi=[];function tl(s){return s[3].declutterBox}const Xd=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function el(s,t){return(t==="start"||t==="end")&&!Xd.test(s)&&(t=t==="start"?"left":"right"),Wn[t]}function Yd(s,t,e){return e>0&&s.push(`
`,""),s.push(t,""),s}class zd{constructor(t,e,i,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=Ye(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,n){const r=t+e+i+n;if(this.labels_[r])return this.labels_[r];const a=n?this.strokeStates[n]:null,h=i?this.fillStates[i]:null,c=this.textStates[e],g=this.pixelRatio,p=[c.scale[0]*g,c.scale[1]*g],y=Array.isArray(t),C=c.justify?Wn[c.justify]:el(Array.isArray(t)?t[0]:t,c.textAlign||Jn),T=n&&a.lineWidth?a.lineWidth:0,E=y?t:t.split(`
`).reduce(Yd,[]),{width:w,height:L,widths:I,heights:P,lineWidths:k}=ed(c,E),N=w+T,W=[],K=(N+2)*p[0],d=(L+T)*p[1],$={width:K<0?Math.floor(K):Math.ceil(K),height:d<0?Math.floor(d):Math.ceil(d),contextInstructions:W};(p[0]!=1||p[1]!=1)&&W.push("scale",p),n&&(W.push("strokeStyle",a.strokeStyle),W.push("lineWidth",T),W.push("lineCap",a.lineCap),W.push("lineJoin",a.lineJoin),W.push("miterLimit",a.miterLimit),W.push("setLineDash",[a.lineDash]),W.push("lineDashOffset",a.lineDashOffset)),i&&W.push("fillStyle",h.fillStyle),W.push("textBaseline","middle"),W.push("textAlign","center");const B=.5-C;let ot=C*N+B*T;const mt=[],dt=[];let Z=0,At=0,Q=0,tt=0,H;for(let ht=0,Tt=E.length;ht<Tt;ht+=2){const Rt=E[ht];if(Rt===`
`){At+=Z,Z=0,ot=C*N+B*T,++tt;continue}const kt=E[ht+1]||c.font;kt!==H&&(n&&mt.push("font",kt),i&&dt.push("font",kt),H=kt),Z=Math.max(Z,P[Q]);const Y=[Rt,ot+B*I[Q]+C*(I[Q]-k[tt]),.5*(T+Z)+At];ot+=I[Q],n&&mt.push("strokeText",Y),i&&dt.push("fillText",Y),++Q}return Array.prototype.push.apply(W,mt),Array.prototype.push.apply(W,dt),this.labels_[r]=$,$}replayTextBackground_(t,e,i,n,r,a,h){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),a&&(this.alignFill_=a[2],this.fill_(t)),h&&(this.setStrokeStyle_(t,h),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,n,r,a,h,c,g,p,y,C,T,E,w,L){h*=C[0],c*=C[1];let I=i-h,P=n-c;const k=r+g>t?t-g:r,N=a+p>e?e-p:a,W=E[3]+k*C[0]+E[1],K=E[0]+N*C[1]+E[2],d=I-E[3],$=P-E[0];(w||y!==0)&&(gi[0]=d,pi[0]=d,gi[1]=$,ti[1]=$,ti[0]=d+W,ei[0]=ti[0],ei[1]=$+K,pi[1]=ei[1]);let B;return y!==0?(B=Si(Ye(),i,n,1,1,y,-i,-n),Kt(B,gi),Kt(B,ti),Kt(B,ei),Kt(B,pi),ze(Math.min(gi[0],ti[0],ei[0],pi[0]),Math.min(gi[1],ti[1],ei[1],pi[1]),Math.max(gi[0],ti[0],ei[0],pi[0]),Math.max(gi[1],ti[1],ei[1],pi[1]),hn)):ze(Math.min(d,d+W),Math.min($,$+K),Math.max(d,d+W),Math.max($,$+K),hn),T&&(I=Math.round(I),P=Math.round(P)),{drawImageX:I,drawImageY:P,drawImageW:k,drawImageH:N,originX:g,originY:p,declutterBox:{minX:hn[0],minY:hn[1],maxX:hn[2],maxY:hn[3],value:L},canvasTransform:B,scale:C}}replayImageOrLabel_(t,e,i,n,r,a,h){const c=!!(a||h),g=n.declutterBox,p=t.canvas,y=h?h[2]*n.scale[0]/2:0;return g.minX-y<=p.width/e&&g.maxX+y>=0&&g.minY-y<=p.height/e&&g.maxY+y>=0&&(c&&this.replayTextBackground_(t,gi,ti,ei,pi,a,h),id(t,n.canvasTransform,r,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(t){if(this.alignFill_){const e=Kt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,n){const r=this.textStates[e],a=this.createLabel(t,e,n,i),h=this.strokeStates[i],c=this.pixelRatio,g=el(Array.isArray(t)?t[0]:t,r.textAlign||Jn),p=Wn[r.textBaseline||Ys],y=h&&h.lineWidth?h.lineWidth:0,C=a.width/c-2*r.scale[0],T=g*C+2*(.5-g)*y,E=p*a.height/c+2*(.5-p)*y;return{label:a,anchorX:T,anchorY:E}}execute_(t,e,i,n,r,a,h,c){let g;this.pixelCoordinates_&&Zi(i,this.renderedTransform_)?g=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),g=Hi(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),zc(this.renderedTransform_,i));let p=0;const y=n.length;let C=0,T,E,w,L,I,P,k,N,W,K,d,$,B=0,ot=0,mt=null,dt=null;const Z=this.coordinateCache_,At=this.viewRotation_,Q=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,tt={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:At},H=this.instructions!=n||this.overlaps?0:200;let ht,Tt,Rt,kt;for(;p<y;){const Y=n[p];switch(Y[0]){case nt.BEGIN_GEOMETRY:ht=Y[1],kt=Y[3],ht.getGeometry()?h!==void 0&&!fe(h,kt.getExtent())?p=Y[2]+1:++p:p=Y[2];break;case nt.BEGIN_PATH:B>H&&(this.fill_(t),B=0),ot>H&&(t.stroke(),ot=0),!B&&!ot&&(t.beginPath(),L=NaN,I=NaN),++p;break;case nt.CIRCLE:C=Y[1];const Ct=g[C],wt=g[C+1],Pe=g[C+2],me=g[C+3],Xt=Pe-Ct,ye=me-wt,qt=Math.sqrt(Xt*Xt+ye*ye);t.moveTo(Ct+qt,wt),t.arc(Ct,wt,qt,0,2*Math.PI,!0),++p;break;case nt.CLOSE_PATH:t.closePath(),++p;break;case nt.CUSTOM:C=Y[1],T=Y[2];const Qi=Y[3],ge=Y[4],Ue=Y.length==6?Y[5]:void 0;tt.geometry=Qi,tt.feature=ht,p in Z||(Z[p]=[]);const Te=Z[p];Ue?Ue(g,C,T,2,Te):(Te[0]=g[C],Te[1]=g[C+1],Te.length=2),ge(Te,tt),++p;break;case nt.DRAW_IMAGE:C=Y[1],T=Y[2],N=Y[3],E=Y[4],w=Y[5];let Ii=Y[6];const xe=Y[7],Ve=Y[8],le=Y[9],tn=Y[10];let li=Y[11];const Rn=Y[12];let Mt=Y[13];const Ht=Y[14],$t=Y[15];if(!N&&Y.length>=20){W=Y[19],K=Y[20],d=Y[21],$=Y[22];const bt=this.drawLabelWithPointPlacement_(W,K,d,$);N=bt.label,Y[3]=N;const Gt=Y[23];E=(bt.anchorX-Gt)*this.pixelRatio,Y[4]=E;const Qt=Y[24];w=(bt.anchorY-Qt)*this.pixelRatio,Y[5]=w,Ii=N.height,Y[6]=Ii,Mt=N.width,Y[13]=Mt}let q;Y.length>25&&(q=Y[25]);let Nt,Ke,Oe;Y.length>17?(Nt=Y[16],Ke=Y[17],Oe=Y[18]):(Nt=Xi,Ke=!1,Oe=!1),tn&&Q?li+=At:!tn&&!Q&&(li-=At);let hi=0;for(;C<T;C+=2){if(q&&q[hi++]<Mt/this.pixelRatio)continue;const bt=this.calculateImageOrLabelDimensions_(N.width,N.height,g[C],g[C+1],Mt,Ii,E,w,Ve,le,li,Rn,r,Nt,Ke||Oe,ht),Gt=[t,e,N,bt,xe,Ke?mt:null,Oe?dt:null];if(c){if(Ht==="none")continue;if(Ht==="obstacle"){c.insert(bt.declutterBox);continue}else{let Qt,Se;if($t){const te=T-C;if(!$t[te]){$t[te]=Gt;continue}if(Qt=$t[te],delete $t[te],Se=tl(Qt),c.collides(Se))continue}if(c.collides(bt.declutterBox))continue;Qt&&(c.insert(Se),this.replayImageOrLabel_.apply(this,Qt)),c.insert(bt.declutterBox)}}this.replayImageOrLabel_.apply(this,Gt)}++p;break;case nt.DRAW_CHARS:const bi=Y[1],Ut=Y[2],Ze=Y[3],Re=Y[4];$=Y[5];const qe=Y[6],$e=Y[7],cs=Y[8];d=Y[9];const ci=Y[10];W=Y[11],K=Y[12];const wn=[Y[13],Y[13]],en=this.textStates[K],Li=en.font,Ce=[en.scale[0]*$e,en.scale[1]*$e];let we;Li in this.widths_?we=this.widths_[Li]:(we={},this.widths_[Li]=we);const Sn=Hl(g,bi,Ut,2),In=Math.abs(Ce[0])*Ba(Li,W,we);if(Re||In<=Sn){const bt=this.textStates[K].textAlign,Gt=(Sn-In)*Wn[bt],Qt=Wd(g,bi,Ut,2,W,Gt,qe,Math.abs(Ce[0]),Ba,Li,we,Q?0:this.viewRotation_);t:if(Qt){const Se=[];let te,Ai,Ie,jt,ee;if(d)for(te=0,Ai=Qt.length;te<Ai;++te){ee=Qt[te],Ie=ee[4],jt=this.createLabel(Ie,K,"",d),E=ee[2]+(Ce[0]<0?-ci:ci),w=Ze*jt.height+(.5-Ze)*2*ci*Ce[1]/Ce[0]-cs;const he=this.calculateImageOrLabelDimensions_(jt.width,jt.height,ee[0],ee[1],jt.width,jt.height,E,w,0,0,ee[3],wn,!1,Xi,!1,ht);if(c&&c.collides(he.declutterBox))break t;Se.push([t,e,jt,he,1,null,null])}if($)for(te=0,Ai=Qt.length;te<Ai;++te){ee=Qt[te],Ie=ee[4],jt=this.createLabel(Ie,K,$,""),E=ee[2],w=Ze*jt.height-cs;const he=this.calculateImageOrLabelDimensions_(jt.width,jt.height,ee[0],ee[1],jt.width,jt.height,E,w,0,0,ee[3],wn,!1,Xi,!1,ht);if(c&&c.collides(he.declutterBox))break t;Se.push([t,e,jt,he,1,null,null])}c&&c.load(Se.map(tl));for(let he=0,hr=Se.length;he<hr;++he)this.replayImageOrLabel_.apply(this,Se[he])}}++p;break;case nt.END_GEOMETRY:if(a!==void 0){ht=Y[1];const bt=a(ht,kt);if(bt)return bt}++p;break;case nt.FILL:H?B++:this.fill_(t),++p;break;case nt.MOVE_TO_LINE_TO:for(C=Y[1],T=Y[2],Tt=g[C],Rt=g[C+1],P=Tt+.5|0,k=Rt+.5|0,(P!==L||k!==I)&&(t.moveTo(Tt,Rt),L=P,I=k),C+=2;C<T;C+=2)Tt=g[C],Rt=g[C+1],P=Tt+.5|0,k=Rt+.5|0,(C==T-2||P!==L||k!==I)&&(t.lineTo(Tt,Rt),L=P,I=k);++p;break;case nt.SET_FILL_STYLE:mt=Y,this.alignFill_=Y[2],B&&(this.fill_(t),B=0,ot&&(t.stroke(),ot=0)),t.fillStyle=Y[1],++p;break;case nt.SET_STROKE_STYLE:dt=Y,ot&&(t.stroke(),ot=0),this.setStrokeStyle_(t,Y),++p;break;case nt.STROKE:H?ot++:t.stroke(),++p;break;default:++p;break}}B&&this.fill_(t),ot&&t.stroke()}execute(t,e,i,n,r,a){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,r,void 0,void 0,a)}executeHitDetection(t,e,i,n,r){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,r)}}const Bd=zd,Pr=["Polygon","Circle","LineString","Image","Text","Default"];class Hd{constructor(t,e,i,n,r,a){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=a,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ye(),this.createExecutors_(r)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];i===void 0&&(i={},this.executorsByZIndex_[e]=i);const n=t[e];for(const r in n){const a=n[r];i[r]=new Bd(this.resolution_,this.pixelRatio_,this.overlaps_,a)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let n=0,r=t.length;n<r;++n)if(t[n]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,n,r,a){n=Math.round(n);const h=n*2+1,c=Si(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),g=!this.hitDetectionContext_;g&&(this.hitDetectionContext_=_e(h,h));const p=this.hitDetectionContext_;p.canvas.width!==h||p.canvas.height!==h?(p.canvas.width=h,p.canvas.height=h):g||p.clearRect(0,0,h,h);let y;this.renderBuffer_!==void 0&&(y=pe(),Gn(y,t),Yn(y,e*(this.renderBuffer_+n),y));const C=Ud(n);let T;function E(W,K){const d=p.getImageData(0,0,h,h).data;for(let $=0,B=C.length;$<B;$++)if(d[C[$]]>0){if(!a||T!=="Image"&&T!=="Text"||a.includes(W)){const ot=(C[$]-3)/4,mt=n-ot%h,dt=n-(ot/h|0),Z=r(W,K,mt*mt+dt*dt);if(Z)return Z}p.clearRect(0,0,h,h);break}}const w=Object.keys(this.executorsByZIndex_).map(Number);w.sort(Ui);let L,I,P,k,N;for(L=w.length-1;L>=0;--L){const W=w[L].toString();for(P=this.executorsByZIndex_[W],I=Pr.length-1;I>=0;--I)if(T=Pr[I],k=P[T],k!==void 0&&(N=k.executeHitDetection(p,c,i,E,y),N))return N}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],n=e[1],r=e[2],a=e[3],h=[i,n,i,a,r,a,r,n];return Hi(h,0,8,2,t,h),h}isEmpty(){return xn(this.executorsByZIndex_)}execute(t,e,i,n,r,a,h){const c=Object.keys(this.executorsByZIndex_).map(Number);c.sort(Ui),this.maxExtent_&&(t.save(),this.clip(t,i)),a=a||Pr;let g,p,y,C,T,E;for(h&&c.reverse(),g=0,p=c.length;g<p;++g){const w=c[g].toString();for(T=this.executorsByZIndex_[w],y=0,C=a.length;y<C;++y){const L=a[y];E=T[L],E!==void 0&&E.execute(t,e,i,n,r,h)}}this.maxExtent_&&t.restore()}}const Or={};function Ud(s){if(Or[s]!==void 0)return Or[s];const t=s*2+1,e=s*s,i=new Array(e+1);for(let r=0;r<=s;++r)for(let a=0;a<=s;++a){const h=r*r+a*a;if(h>e)break;let c=i[h];c||(c=[],i[h]=c),c.push(((s+r)*t+(s+a))*4+3),r>0&&c.push(((s-r)*t+(s+a))*4+3),a>0&&(c.push(((s+r)*t+(s-a))*4+3),r>0&&c.push(((s-r)*t+(s-a))*4+3))}const n=[];for(let r=0,a=i.length;r<a;++r)i[r]&&n.push(...i[r]);return Or[s]=n,n}const il=Hd,re={ANIMATING:0,INTERACTING:1};class Vd extends oh{constructor(t,e,i,n,r,a,h){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=n,this.viewRotation_=r,this.squaredTolerance_=a,this.userTransform_=h,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ye()}drawImages_(t,e,i,n){if(!this.image_)return;const r=Hi(t,e,i,n,this.transform_,this.pixelCoordinates_),a=this.context_,h=this.tmpLocalTransform_,c=a.globalAlpha;this.imageOpacity_!=1&&(a.globalAlpha=c*this.imageOpacity_);let g=this.imageRotation_;this.imageRotateWithView_&&(g+=this.viewRotation_);for(let p=0,y=r.length;p<y;p+=2){const C=r[p]-this.imageAnchorX_,T=r[p+1]-this.imageAnchorY_;if(g!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const E=C+this.imageAnchorX_,w=T+this.imageAnchorY_;Si(h,E,w,1,1,g,-E,-w),a.setTransform.apply(a,h),a.translate(E,w),a.scale(this.imageScale_[0],this.imageScale_[1]),a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),a.setTransform(1,0,0,1,0,0)}else a.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,C,T,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(a.globalAlpha=c)}drawText_(t,e,i,n){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=Hi(t,e,i,n,this.transform_,this.pixelCoordinates_),a=this.context_;let h=this.textRotation_;for(this.textRotateWithView_&&(h+=this.viewRotation_);e<i;e+=n){const c=r[e]+this.textOffsetX_,g=r[e+1]+this.textOffsetY_;h!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(a.translate(c-this.textOffsetX_,g-this.textOffsetY_),a.rotate(h),a.translate(this.textOffsetX_,this.textOffsetY_),a.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&a.strokeText(this.text_,0,0),this.textFillState_&&a.fillText(this.text_,0,0),a.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&a.strokeText(this.text_,c,g),this.textFillState_&&a.fillText(this.text_,c,g))}}moveToLineTo_(t,e,i,n,r){const a=this.context_,h=Hi(t,e,i,n,this.transform_,this.pixelCoordinates_);a.moveTo(h[0],h[1]);let c=h.length;r&&(c-=2);for(let g=2;g<c;g+=2)a.lineTo(h[g],h[g+1]);return r&&a.closePath(),i}drawRings_(t,e,i,n){for(let r=0,a=i.length;r<a;++r)e=this.moveToLineTo_(t,e,i[r],n,!0);return e}drawCircle(t){if(fe(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=bu(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),a=this.context_;a.beginPath(),a.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const i=e.getGeometryFunction()(t);!i||!fe(this.extent_,i.getExtent())||(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!fe(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(fe(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=t.getFlatCoordinates();let r=0;const a=t.getEnds(),h=t.getStride();i.beginPath();for(let c=0,g=a.length;c<g;++c)r=this.moveToLineTo_(n,r,a[c],h,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!fe(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!fe(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let n=0;const r=t.getEndss(),a=t.getStride();e.beginPath();for(let h=0,c=r.length;h<c;++h){const g=r[h];n=this.drawRings_(i,n,g,a)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),Zi(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:Jn;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:Xe(i||oi)}}if(!e)this.strokeState_=null;else{const i=e.getColor(),n=e.getLineCap(),r=e.getLineDash(),a=e.getLineDashOffset(),h=e.getLineJoin(),c=e.getWidth(),g=e.getMiterLimit(),p=r||Kn;this.strokeState_={lineCap:n!==void 0?n:Xs,lineDash:this.pixelRatio_===1?p:p.map(y=>y*this.pixelRatio_),lineDashOffset:(a||Zn)*this.pixelRatio_,lineJoin:h!==void 0?h:Cn,lineWidth:(c!==void 0?c:Qn)*this.pixelRatio_,miterLimit:g!==void 0?g:qn,strokeStyle:Xe(i||$n)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const a=t.getScaleArray();this.imageScale_=[a[0]*this.pixelRatio_/i,a[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const T=e.getColor();this.textFillState_={fillStyle:Xe(T||oi)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const T=i.getColor(),E=i.getLineCap(),w=i.getLineDash(),L=i.getLineDashOffset(),I=i.getLineJoin(),P=i.getWidth(),k=i.getMiterLimit();this.textStrokeState_={lineCap:E!==void 0?E:Xs,lineDash:w||Kn,lineDashOffset:L||Zn,lineJoin:I!==void 0?I:Cn,lineWidth:P!==void 0?P:Qn,miterLimit:k!==void 0?k:qn,strokeStyle:Xe(T||$n)}}const n=t.getFont(),r=t.getOffsetX(),a=t.getOffsetY(),h=t.getRotateWithView(),c=t.getRotation(),g=t.getScaleArray(),p=t.getText(),y=t.getTextAlign(),C=t.getTextBaseline();this.textState_={font:n!==void 0?n:Jl,textAlign:y!==void 0?y:Jn,textBaseline:C!==void 0?C:Ys},this.text_=p!==void 0?Array.isArray(p)?p.reduce((T,E,w)=>T+=w%2?" ":E,""):p:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=a!==void 0?this.pixelRatio_*a:0,this.textRotateWithView_=h!==void 0?h:!1,this.textRotation_=c!==void 0?c:0,this.textScale_=[this.pixelRatio_*g[0],this.pixelRatio_*g[1]]}}}const Kd=Vd,je=.5;function Zd(s,t,e,i,n,r,a){const h=s[0]*je,c=s[1]*je,g=_e(h,c);g.imageSmoothingEnabled=!1;const p=g.canvas,y=new Kd(g,je,n,null,a),C=e.length,T=Math.floor((256*256*256-1)/C),E={};for(let L=1;L<=C;++L){const I=e[L-1],P=I.getStyleFunction()||i;if(!i)continue;let k=P(I,r);if(!k)continue;Array.isArray(k)||(k=[k]);const W="#"+("000000"+(L*T).toString(16)).slice(-6);for(let K=0,d=k.length;K<d;++K){const $=k[K],B=$.getGeometryFunction()(I);if(!B||!fe(n,B.getExtent()))continue;const ot=$.clone(),mt=ot.getFill();mt&&mt.setColor(W);const dt=ot.getStroke();dt&&(dt.setColor(W),dt.setLineDash(null)),ot.setText(void 0);const Z=$.getImage();if(Z&&Z.getOpacity()!==0){const tt=Z.getImageSize();if(!tt)continue;const H=_e(tt[0],tt[1],void 0,{alpha:!1}),ht=H.canvas;H.fillStyle=W,H.fillRect(0,0,ht.width,ht.height),ot.setImage(new rh({img:ht,imgSize:tt,anchor:Z.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Z.getOrigin(),opacity:1,size:Z.getSize(),scale:Z.getScale(),rotation:Z.getRotation(),rotateWithView:Z.getRotateWithView()}))}const At=ot.getZIndex()||0;let Q=E[At];Q||(Q={},E[At]=Q,Q.Polygon=[],Q.Circle=[],Q.LineString=[],Q.Point=[]),Q[B.getType().replace("Multi","")].push(B,ot)}}const w=Object.keys(E).map(Number).sort(Ui);for(let L=0,I=w.length;L<I;++L){const P=E[w[L]];for(const k in P){const N=P[k];for(let W=0,K=N.length;W<K;W+=2){y.setStyle(N[W+1]);for(let d=0,$=t.length;d<$;++d)y.setTransform(t[d]),y.drawGeometry(N[W])}}}return g.getImageData(0,0,p.width,p.height)}function qd(s,t,e){const i=[];if(e){const n=Math.floor(Math.round(s[0])*je),r=Math.floor(Math.round(s[1])*je),a=(Wt(n,0,e.width-1)+Wt(r,0,e.height-1)*e.width)*4,h=e.data[a],c=e.data[a+1],p=e.data[a+2]+256*(c+256*h),y=Math.floor((256*256*256-1)/t.length);p&&p%y===0&&i.push(t[p/y-1])}return i}const $d=.5,hh={Point:af,LineString:sf,Polygon:hf,MultiPoint:lf,MultiLineString:rf,MultiPolygon:of,GeometryCollection:nf,Circle:tf};function Jd(s,t){return parseInt(vt(s),10)-parseInt(vt(t),10)}function Qd(s,t){const e=io(s,t);return e*e}function io(s,t){return $d*s/t}function tf(s,t,e,i,n){const r=e.getFill(),a=e.getStroke();if(r||a){const c=s.getBuilder(e.getZIndex(),"Circle");c.setFillStrokeStyle(r,a),c.drawCircle(t,i)}const h=e.getText();if(h&&h.getText()){const c=(n||s).getBuilder(e.getZIndex(),"Text");c.setTextStyle(h),c.drawText(t,i)}}function nl(s,t,e,i,n,r,a){let h=!1;const c=e.getImage();if(c){const g=c.getImageState();g==zt.LOADED||g==zt.ERROR?c.unlistenImageChange(n):(g==zt.IDLE&&c.load(),c.listenImageChange(n),h=!0)}return ef(s,t,e,i,r,a),h}function ef(s,t,e,i,n,r){const a=e.getGeometryFunction()(t);if(!a)return;const h=a.simplifyTransformed(i,n);if(e.getRenderer())ch(s,h,e,t);else{const g=hh[h.getType()];g(s,h,e,t,r)}}function ch(s,t,e,i){if(t.getType()=="GeometryCollection"){const r=t.getGeometries();for(let a=0,h=r.length;a<h;++a)ch(s,r[a],e,i);return}s.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer())}function nf(s,t,e,i,n){const r=t.getGeometriesArray();let a,h;for(a=0,h=r.length;a<h;++a){const c=hh[r[a].getType()];c(s,r[a],e,i,n)}}function sf(s,t,e,i,n){const r=e.getStroke();if(r){const h=s.getBuilder(e.getZIndex(),"LineString");h.setFillStrokeStyle(null,r),h.drawLineString(t,i)}const a=e.getText();if(a&&a.getText()){const h=(n||s).getBuilder(e.getZIndex(),"Text");h.setTextStyle(a),h.drawText(t,i)}}function rf(s,t,e,i,n){const r=e.getStroke();if(r){const h=s.getBuilder(e.getZIndex(),"LineString");h.setFillStrokeStyle(null,r),h.drawMultiLineString(t,i)}const a=e.getText();if(a&&a.getText()){const h=(n||s).getBuilder(e.getZIndex(),"Text");h.setTextStyle(a),h.drawText(t,i)}}function of(s,t,e,i,n){const r=e.getFill(),a=e.getStroke();if(a||r){const c=s.getBuilder(e.getZIndex(),"Polygon");c.setFillStrokeStyle(r,a),c.drawMultiPolygon(t,i)}const h=e.getText();if(h&&h.getText()){const c=(n||s).getBuilder(e.getZIndex(),"Text");c.setTextStyle(h),c.drawText(t,i)}}function af(s,t,e,i,n){const r=e.getImage(),a=e.getText();let h;if(r){if(r.getImageState()!=zt.LOADED)return;let c=s;if(n){const p=r.getDeclutterMode();if(p!=="none")if(c=n,p==="obstacle"){const y=s.getBuilder(e.getZIndex(),"Image");y.setImageStyle(r,h),y.drawPoint(t,i)}else a&&a.getText()&&(h={})}const g=c.getBuilder(e.getZIndex(),"Image");g.setImageStyle(r,h),g.drawPoint(t,i)}if(a&&a.getText()){let c=s;n&&(c=n);const g=c.getBuilder(e.getZIndex(),"Text");g.setTextStyle(a,h),g.drawText(t,i)}}function lf(s,t,e,i,n){const r=e.getImage(),a=e.getText();let h;if(r){if(r.getImageState()!=zt.LOADED)return;let c=s;if(n){const p=r.getDeclutterMode();if(p!=="none")if(c=n,p==="obstacle"){const y=s.getBuilder(e.getZIndex(),"Image");y.setImageStyle(r,h),y.drawMultiPoint(t,i)}else a&&a.getText()&&(h={})}const g=c.getBuilder(e.getZIndex(),"Image");g.setImageStyle(r,h),g.drawMultiPoint(t,i)}if(a&&a.getText()){let c=s;n&&(c=n);const g=c.getBuilder(e.getZIndex(),"Text");g.setTextStyle(a,h),g.drawText(t,i)}}function hf(s,t,e,i,n){const r=e.getFill(),a=e.getStroke();if(r||a){const c=s.getBuilder(e.getZIndex(),"Polygon");c.setFillStrokeStyle(r,a),c.drawPolygon(t,i)}const h=e.getText();if(h&&h.getText()){const c=(n||s).getBuilder(e.getZIndex(),"Text");c.setTextStyle(h),c.drawText(t,i)}}class cf extends lh{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=pe(),this.wrappedRenderedExtent_=pe(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const n=e.extent,r=e.viewState,a=r.center,h=r.resolution,c=r.projection,g=r.rotation,p=c.getExtent(),y=this.getLayer().getSource(),C=e.pixelRatio,T=e.viewHints,E=!(T[re.ANIMATING]||T[re.INTERACTING]),w=this.compositionContext_,L=Math.round(e.size[0]*C),I=Math.round(e.size[1]*C),P=y.getWrapX()&&c.canWrapX(),k=P?Pt(p):null,N=P?Math.ceil((n[2]-p[2])/k)+1:1;let W=P?Math.floor((n[0]-p[0])/k):0;do{const K=this.getRenderTransform(a,h,g,C,L,I,W*k);t.execute(w,1,K,g,E,void 0,i)}while(++W<N)}setupCompositionContext_(){if(this.opacity_!==1){const t=_e(this.context.canvas.width,this.context.canvas.height,Qa);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,ql(this.compositionContext_),Qa.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];Bc(this.pixelTransform,1/i,1/i),go(this.inversePixelTransform,this.pixelTransform);const r=Cl(this.pixelTransform);this.useContainer(e,r,this.getBackground(t));const a=this.context,h=a.canvas,c=this.replayGroup_,g=this.declutterExecutorGroup;if((!c||c.isEmpty())&&(!g||g.isEmpty()))return null;const p=Math.round(t.size[0]*i),y=Math.round(t.size[1]*i);h.width!=p||h.height!=y?(h.width=p,h.height=y,h.style.transform!==r&&(h.style.transform=r)):this.containerReused||a.clearRect(0,0,p,y),this.preRender(a,t);const C=t.viewState;C.projection,this.opacity_=n.opacity,this.setupCompositionContext_();let T=!1,E=!0;if(n.extent&&this.clipping){const w=ji(n.extent);E=fe(w,t.extent),T=E&&!pn(w,t.extent),T&&this.clipUnrotated(this.compositionContext_,t,w)}return E&&this.renderWorlds(c,t),T&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(a,t),this.renderedRotation_!==C.rotation&&(this.renderedRotation_=C.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(function(e){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];Kt(this.pixelTransform,i);const n=this.renderedCenter_,r=this.renderedResolution_,a=this.renderedRotation_,h=this.renderedProjection_,c=this.wrappedRenderedExtent_,g=this.getLayer(),p=[],y=i[0]*je,C=i[1]*je;p.push(this.getRenderTransform(n,r,a,je,y,C,0).slice());const T=g.getSource(),E=h.getExtent();if(T.getWrapX()&&h.canWrapX()&&!pn(E,c)){let w=c[0];const L=Pt(E);let I=0,P;for(;w<E[0];)--I,P=L*I,p.push(this.getRenderTransform(n,r,a,je,y,C,P).slice()),w+=L;for(I=0,w=c[2];w>E[2];)++I,P=L*I,p.push(this.getRenderTransform(n,r,a,je,y,C,P).slice()),w-=L}this.hitDetectionImageData_=Zd(i,p,this.renderedFeatures_,g.getStyleFunction(),c,r,a)}e(qd(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))}forEachFeatureAtCoordinate(t,e,i,n,r){if(!this.replayGroup_)return;const a=e.viewState.resolution,h=e.viewState.rotation,c=this.getLayer(),g={},p=function(T,E,w){const L=vt(T),I=g[L];if(I){if(I!==!0&&w<I.distanceSq){if(w===0)return g[L]=!0,r.splice(r.lastIndexOf(I),1),n(T,c,E);I.geometry=E,I.distanceSq=w}}else{if(w===0)return g[L]=!0,n(T,c,E);r.push(g[L]={feature:T,layer:c,geometry:E,distanceSq:w,callback:n})}};let y;const C=[this.replayGroup_];return this.declutterExecutorGroup&&C.push(this.declutterExecutorGroup),C.some(T=>y=T.forEachFeatureAtCoordinate(t,a,h,i,p,T===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(E=>E.value):null)),y}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const n=t.viewHints[re.ANIMATING],r=t.viewHints[re.INTERACTING],a=e.getUpdateWhileAnimating(),h=e.getUpdateWhileInteracting();if(this.ready&&!a&&n||!h&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const c=t.extent,g=t.viewState,p=g.projection,y=g.resolution,C=t.pixelRatio,T=e.getRevision(),E=e.getRenderBuffer();let w=e.getRenderOrder();w===void 0&&(w=Jd);const L=g.center.slice(),I=Yn(c,E*y),P=I.slice(),k=[I.slice()],N=p.getExtent();if(i.getWrapX()&&p.canWrapX()&&!pn(N,t.extent)){const Q=Pt(N),tt=Math.max(Pt(I)/2,Q);I[0]=N[0]-tt,I[2]=N[2]+tt,Ll(L,p);const H=Sl(k[0],p);H[0]<N[0]&&H[2]<N[2]?k.push([H[0]+Q,H[1],H[2]+Q,H[3]]):H[0]>N[0]&&H[2]>N[2]&&k.push([H[0]-Q,H[1],H[2]-Q,H[3]])}if(this.ready&&this.renderedResolution_==y&&this.renderedRevision_==T&&this.renderedRenderOrder_==w&&pn(this.wrappedRenderedExtent_,I))return Zi(this.renderedExtent_,P)||(this.hitDetectionImageData_=null,this.renderedExtent_=P),this.renderedCenter_=L,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const W=new Ja(io(y,C),I,y,C);let K;this.getLayer().getDeclutter()&&(K=new Ja(io(y,C),I,y,C));let d;for(let Q=0,tt=k.length;Q<tt;++Q)i.loadFeatures(k[Q],y,p);const $=Qd(y,C);let B=!0;const ot=function(Q){let tt;const H=Q.getStyleFunction()||e.getStyleFunction();if(H&&(tt=H(Q,y)),tt){const ht=this.renderFeature(Q,$,tt,W,d,K);B=B&&!ht}}.bind(this),mt=Pl(I),dt=i.getFeaturesInExtent(mt);w&&dt.sort(w);for(let Q=0,tt=dt.length;Q<tt;++Q)ot(dt[Q]);this.renderedFeatures_=dt,this.ready=B;const Z=W.finish(),At=new il(I,y,C,i.getOverlaps(),Z,e.getRenderBuffer());return K&&(this.declutterExecutorGroup=new il(I,y,C,i.getOverlaps(),K.finish(),e.getRenderBuffer())),this.renderedResolution_=y,this.renderedRevision_=T,this.renderedRenderOrder_=w,this.renderedExtent_=P,this.wrappedRenderedExtent_=I,this.renderedCenter_=L,this.renderedProjection_=p,this.replayGroup_=At,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,n,r,a){if(!i)return!1;let h=!1;if(Array.isArray(i))for(let c=0,g=i.length;c<g;++c)h=nl(n,t,i[c],e,this.boundHandleStyleImageChange_,r,a)||h;else h=nl(n,t,i,e,this.boundHandleStyleImageChange_,r,a);return h}}const uf=cf;class df extends Td{constructor(t){super(t)}createRenderer(){return new uf(this)}}const uh=df;class ff{constructor(t){this.rbush_=new nh(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[vt(e)]=i}load(t,e){const i=new Array(e.length);for(let n=0,r=e.length;n<r;n++){const a=t[n],h=e[n],c={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:h};i[n]=c,this.items_[vt(h)]=c}this.rbush_.load(i)}remove(t){const e=vt(t),i=this.items_[e];return delete this.items_[e],this.rbush_.remove(i)!==null}update(t,e){const i=this.items_[vt(e)],n=[i.minX,i.minY,i.maxX,i.maxY];zn(n,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(n){return n.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let n=0,r=t.length;n<r;n++)if(i=e(t[n]),i)return i;return i}isEmpty(){return xn(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return ze(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}const sl=ff;class gf extends He{constructor(t){super(),this.projection=Bt(t.projection),this.attributions_=rl(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible!==void 0?t.attributionsCollapsible:!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(i,n){e.viewResolver=i,e.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(){return rt()}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=rl(t),this.changed()}setState(t){this.state_=t,this.changed()}}function rl(s){return s?Array.isArray(s)?function(t){return s}:typeof s=="function"?s:function(t){return[s]}:null}const dh=gf,Ae={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function pf(s,t){return[[-1/0,-1/0,1/0,1/0]]}let _f=!1;function mf(s,t,e,i,n,r,a){const h=new XMLHttpRequest;h.open("GET",typeof s=="function"?s(e,i,n):s,!0),t.getType()=="arraybuffer"&&(h.responseType="arraybuffer"),h.withCredentials=_f,h.onload=function(c){if(!h.status||h.status>=200&&h.status<300){const g=t.getType();let p;g=="json"||g=="text"?p=h.responseText:g=="xml"?(p=h.responseXML,p||(p=new DOMParser().parseFromString(h.responseText,"application/xml"))):g=="arraybuffer"&&(p=h.response),p?r(t.readFeatures(p,{extent:e,featureProjection:n}),t.readProjection(p)):a()}else a()},h.onerror=a,h.send()}function ol(s,t){return function(e,i,n,r,a){const h=this;mf(s,t,e,i,n,function(c,g){h.addFeatures(c),r!==void 0&&r(c)},a||Vi)}}class _i extends ai{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class yf extends dh{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=Vi,this.format_=t.format,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(ft(this.format_,7),this.loader_=ol(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:pf;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new sl:null,this.loadedExtentsRtree_=new sl,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,n;Array.isArray(t.features)?n=t.features:t.features&&(i=t.features,n=i.getArray()),!e&&i===void 0&&(i=new We(n)),n!==void 0&&this.addFeaturesInternal(n),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=vt(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new _i(Ae.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[xt(e,ct.CHANGE,this.handleFeatureChange_,this),xt(e,yn.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0;const n=e.getId();return n!==void 0&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&(ft(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],n=[];for(let r=0,a=t.length;r<a;r++){const h=t[r],c=vt(h);this.addToIndex_(c,h)&&i.push(h)}for(let r=0,a=i.length;r<a;r++){const h=i[r],c=vt(h);this.setupChangeEvents_(c,h);const g=h.getGeometry();if(g){const p=g.getExtent();e.push(p),n.push(h)}else this.nullGeometryFeatures_[c]=h}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(Ae.ADDFEATURE))for(let r=0,a=i.length;r<a;r++)this.dispatchEvent(new _i(Ae.ADDFEATURE,i[r]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(Ae.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(Ae.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(de.ADD,function(i){e||(e=!0,this.addFeature(i.element),e=!1)}.bind(this)),t.addEventListener(de.REMOVE,function(i){e||(e=!0,this.removeFeature(i.element),e=!1)}.bind(this)),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(Ot);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=function(n){this.removeFeatureInternal(n)}.bind(this);this.featuresRtree_.forEach(i);for(const n in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[n])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new _i(Ae.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(n){if(n.getGeometry().intersectsCoordinate(t))return e(n)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){const r=e(i);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),xn(this.nullGeometryFeatures_)||ri(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const n=Qc(t,e);return[].concat(...n.map(r=>this.featuresRtree_.getInExtent(r)))}else return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],n=t[1];let r=null;const a=[NaN,NaN];let h=1/0;const c=[-1/0,-1/0,1/0,1/0];return e=e||Xn,this.featuresRtree_.forEachInExtent(c,function(g){if(e(g)){const p=g.getGeometry(),y=h;if(h=p.closestPointXY(i,n,a,h),h<y){r=g;const C=Math.sqrt(h);c[0]=i-C,c[1]=n-C,c[2]=i+C,c[3]=n+C}}}),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=vt(e),n=e.getGeometry();if(!n)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);else{const a=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(a,e)):this.featuresRtree_&&this.featuresRtree_.update(a,e)}const r=e.getId();if(r!==void 0){const a=r.toString();this.idIndex_[a]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[a]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new _i(Ae.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:vt(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&xn(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,i){const n=this.loadedExtentsRtree_,r=this.strategy_(t,e,i);for(let a=0,h=r.length;a<h;++a){const c=r[a];n.forEachInExtent(c,function(p){return pn(p.extent,c)})||(++this.loadingExtentsCount_,this.dispatchEvent(new _i(Ae.FEATURESLOADSTART)),this.loader_.call(this,c,e,i,function(p){--this.loadingExtentsCount_,this.dispatchEvent(new _i(Ae.FEATURESLOADEND,void 0,p))}.bind(this),function(){--this.loadingExtentsCount_,this.dispatchEvent(new _i(Ae.FEATURESLOADERROR))}.bind(this)),n.insert(c,{extent:c.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,function(n){if(zn(n.extent,t))return i=n,!0}),i&&e.remove(i)}removeFeature(t){if(!t)return;const e=vt(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=vt(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(Ot),delete this.featureChangeKeys_[e];const n=t.getId();return n!==void 0&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new _i(Ae.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){ft(this.format_,7),this.url_=t,this.setLoader(ol(t,this.format_))}}const fh=yf,it={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function gh(s){return Math.pow(s,3)}function Tn(s){return 1-gh(1-s)}function xf(s){return 3*s*s-2*s*s*s}function Cf(s){return s}class Ef extends qs{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(ct.CHANGE)}release(){this.state===it.ERROR&&this.setState(it.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==it.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==it.LOADED){t.interimTile=null;break}else t.getState()==it.LOADING?e=t:t.getState()==it.IDLE?e.interimTile=t.interimTile:e=t;t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==it.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){rt()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=e,this.transitionStarts_[t]=i;else if(i===-1)return 1;const n=e-i+1e3/60;return n>=this.transition_?1:gh(n/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const ph=Ef;class vf extends ph{constructor(t,e,i,n,r,a){super(t,e,a),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,n!==null&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=it.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=it.ERROR,this.unlistenImage_(),this.image_=Tf(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=it.LOADED:this.state=it.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==it.ERROR&&(this.state=it.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==it.IDLE&&(this.state=it.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=sh(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function Tf(){const s=_e(1,1);return s.fillStyle="rgba(0,0,0,0)",s.fillRect(0,0,1,1),s.canvas}const _h=vf;class Rf{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;const r=this.points_[e]-this.points_[i],a=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(a,r),this.initialVelocity_=Math.sqrt(r*r+a*a)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const wf=Rf;class Sf extends ho{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){rt()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;Si(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),go(n,i)}forEachFeatureAtCoordinate(t,e,i,n,r,a,h,c){let g;const p=e.viewState;function y(N,W,K,d){return r.call(a,W,N?K:null,d)}const C=p.projection,T=Ll(t.slice(),C),E=[[0,0]];if(C.canWrapX()&&n){const N=C.getExtent(),W=Pt(N);E.push([-W,0],[W,0])}const w=e.layerStatesArray,L=w.length,I=[],P=[];for(let N=0;N<E.length;N++)for(let W=L-1;W>=0;--W){const K=w[W],d=K.layer;if(d.hasRenderer()&&No(K,p)&&h.call(c,d)){const $=d.getRenderer(),B=d.getSource();if($&&B){const ot=B.getWrapX()?T:t,mt=y.bind(null,K.managed);P[0]=ot[0]+E[N][0],P[1]=ot[1]+E[N][1],g=$.forEachFeatureAtCoordinate(P,e,i,mt,I)}if(g)return g}}if(I.length===0)return;const k=1/I.length;return I.forEach((N,W)=>N.distanceSq+=W*k),I.sort((N,W)=>N.distanceSq-W.distanceSq),I.some(N=>g=N.callback(N.feature,N.layer,N.geometry)),g}hasFeatureAtCoordinate(t,e,i,n,r,a){return this.forEachFeatureAtCoordinate(t,e,i,n,Xn,this,r,a)!==void 0}getMap(){return this.map_}renderFrame(t){rt()}scheduleExpireIconCache(t){Bs.canExpireCache()&&t.postRenderFunctions.push(If)}}function If(s,t){Bs.expire()}const bf=Sf;class Lf extends bf{constructor(t){super(t),this.fontChangeListenerKey_=xt(ni,yn.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=sr+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const n=new ah(t,void 0,e);i.dispatchEvent(n)}}disposeInternal(){Ot(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Ri.PRECOMPOSE,t);const e=t.layerStatesArray.sort(function(a,h){return a.zIndex-h.zIndex}),i=t.viewState;this.children_.length=0;const n=[];let r=null;for(let a=0,h=e.length;a<h;++a){const c=e[a];t.layerIndex=a;const g=c.layer,p=g.getSourceState();if(!No(c,i)||p!="ready"&&p!="undefined"){g.unrender();continue}const y=g.render(t,r);y&&(y!==r&&(this.children_.push(y),r=y),"getDeclutter"in g&&n.push(g))}for(let a=n.length-1;a>=0;--a)n[a].renderDeclutter(t);$u(this.element_,this.children_),this.dispatchRenderEvent(Ri.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}}const Af=Lf;class Ci extends ai{constructor(t,e){super(t),this.layer=e}}const Dr={LAYERS:"layers"};class jo extends eh{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Dr.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new We(i.slice(),{unique:!0}):ft(typeof i.getArray=="function",43):i=new We(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(Ot),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(xt(t,de.ADD,this.handleLayersAdd_,this),xt(t,de.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(Ot);is(this.listenerKeys_);const e=t.getArray();for(let i=0,n=e.length;i<n;i++){const r=e[i];this.registerLayerListeners_(r),this.dispatchEvent(new Ci("addlayer",r))}this.changed()}registerLayerListeners_(t){const e=[xt(t,yn.PROPERTYCHANGE,this.handleLayerChange_,this),xt(t,ct.CHANGE,this.handleLayerChange_,this)];t instanceof jo&&e.push(xt(t,"addlayer",this.handleLayerGroupAdd_,this),xt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[vt(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Ci("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Ci("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Ci("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=vt(e);this.listenerKeys_[i].forEach(Ot),delete this.listenerKeys_[i],this.dispatchEvent(new Ci("removelayer",e)),this.changed()}getLayers(){return this.get(Dr.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const i=e.getArray();for(let n=0,r=i.length;n<r;++n)this.dispatchEvent(new Ci("removelayer",i[n]))}this.set(Dr.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],i=e.length;this.getLayers().forEach(function(a){a.getLayerStatesArray(e)});const n=this.getLayerState();let r=n.zIndex;!t&&n.zIndex===void 0&&(r=0);for(let a=i,h=e.length;a<h;a++){const c=e[a];c.opacity*=n.opacity,c.visible=c.visible&&n.visible,c.maxResolution=Math.min(c.maxResolution,n.maxResolution),c.minResolution=Math.max(c.minResolution,n.minResolution),c.minZoom=Math.max(c.minZoom,n.minZoom),c.maxZoom=Math.min(c.maxZoom,n.maxZoom),n.extent!==void 0&&(c.extent!==void 0?c.extent=jn(c.extent,n.extent):c.extent=n.extent),c.zIndex===void 0&&(c.zIndex=r)}return e}getSourceState(){return"ready"}}const ar=jo;class Mf extends ai{constructor(t,e,i){super(t),this.map=e,this.frameState=i!==void 0?i:null}}const gn=Mf;class Pf extends gn{constructor(t,e,i,n,r,a){super(t,e,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=n!==void 0?n:!1,this.activePointers=a}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const yi=Pf,Ft={SINGLECLICK:"singleclick",CLICK:ct.CLICK,DBLCLICK:ct.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},no={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Of extends qs{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=xt(i,no.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=xt(i,no.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ct.TOUCHMOVE,this.boundHandleTouchMove_,xl?{passive:!1}:!1)}emulateClick_(t){let e=new yi(Ft.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new yi(Ft.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;const i=new yi(Ft.SINGLECLICK,this.map_,t);this.dispatchEvent(i)}.bind(this),250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==Ft.POINTERUP||e.type==Ft.POINTERCANCEL){delete this.trackedTouches_[i];for(const n in this.trackedTouches_)if(this.trackedTouches_[n].target!==e.target){delete this.trackedTouches_[n];break}}else(e.type==Ft.POINTERDOWN||e.type==Ft.POINTERMOVE)&&(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new yi(Ft.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(Ot),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new yi(Ft.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.down_={};for(const i in t){const n=t[i];this.down_[i]=typeof n=="function"?Vi:n}if(this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(xt(i,Ft.POINTERMOVE,this.handlePointerMove_,this),xt(i,Ft.POINTERUP,this.handlePointerUp_,this),xt(this.element_,Ft.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(xt(this.element_.getRootNode(),Ft.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new yi(Ft.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new yi(Ft.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(Ot(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ct.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(Ot(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(Ot),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Df=Of,xi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},se={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Hs=1/0;class Ff{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,is(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(t){ft(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=Hs?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,n=e.length,r=e[t],a=i[t],h=t;for(;t<n>>1;){const c=this.getLeftChildIndex_(t),g=this.getRightChildIndex_(t),p=g<n&&i[g]<i[c]?g:c;e[t]=e[p],i[t]=i[p],t=p}e[t]=r,i[t]=a,this.siftDown_(h,t)}siftDown_(t,e){const i=this.elements_,n=this.priorities_,r=i[e],a=n[e];for(;e>t;){const h=this.getParentIndex_(e);if(n[h]>a)i[e]=i[h],n[e]=n[h],e=h;else break}i[e]=r,n[e]=a}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let n=0;const r=e.length;let a,h,c;for(h=0;h<r;++h)a=e[h],c=t(a),c==Hs?delete this.queuedElements_[this.keyFunction_(a)]:(i[n]=c,e[n++]=a);e.length=n,i.length=n,this.heapify_()}}const kf=Ff;class Nf extends kf{constructor(t,e){super(function(i){return t.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(ct.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(i===it.LOADED||i===it.ERROR||i===it.EMPTY){i!==it.ERROR&&e.removeEventListener(ct.CHANGE,this.boundHandleTileChange_);const n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i=0,n,r,a;for(;this.tilesLoading_<t&&i<e&&this.getCount()>0;)r=this.dequeue()[0],a=r.getKey(),n=r.getState(),n===it.IDLE&&!(a in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[a]=!0,++this.tilesLoading_,++i,r.load())}}const Gf=Nf;function jf(s,t,e,i,n){if(!s||!(e in s.wantedTiles)||!s.wantedTiles[e][t.getKey()])return Hs;const r=s.viewState.center,a=i[0]-r[0],h=i[1]-r[1];return 65536*Math.log(n)+Math.sqrt(a*a+h*h)/n}const Me={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},Wf=42,Wo=256;function al(s,t,e){return function(i,n,r,a,h){if(!i)return;if(!n&&!t)return i;const c=t?0:r[0]*n,g=t?0:r[1]*n,p=h?h[0]:0,y=h?h[1]:0;let C=s[0]+c/2+p,T=s[2]-c/2+p,E=s[1]+g/2+y,w=s[3]-g/2+y;C>T&&(C=(T+C)/2,T=C),E>w&&(E=(w+E)/2,w=E);let L=Wt(i[0],C,T),I=Wt(i[1],E,w);if(a&&e&&n){const P=30*n;L+=-P*Math.log(1+Math.max(0,C-i[0])/P)+P*Math.log(1+Math.max(0,i[0]-T)/P),I+=-P*Math.log(1+Math.max(0,E-i[1])/P)+P*Math.log(1+Math.max(0,i[1]-w)/P)}return[L,I]}}function Xf(s){return s}function Xo(s,t,e,i){const n=Pt(t)/e[0],r=Be(t)/e[1];return i?Math.min(s,Math.max(n,r)):Math.min(s,Math.min(n,r))}function Yo(s,t,e){let i=Math.min(s,t);const n=50;return i*=Math.log(1+n*Math.max(0,s/t-1))/n+1,e&&(i=Math.max(i,e),i/=Math.log(1+n*Math.max(0,e/s-1))/n+1),Wt(i,e/2,t*2)}function Yf(s,t,e,i){return t=t!==void 0?t:!0,function(n,r,a,h){if(n!==void 0){const c=s[0],g=s[s.length-1],p=e?Xo(c,e,a,i):c;if(h)return t?Yo(n,p,g):Wt(n,g,p);const y=Math.min(p,n),C=Math.floor(co(s,y,r));return s[C]>p&&C<s.length-1?s[C+1]:s[C]}else return}}function zf(s,t,e,i,n,r){return i=i!==void 0?i:!0,e=e!==void 0?e:0,function(a,h,c,g){if(a!==void 0){const p=n?Xo(t,n,c,r):t;if(g)return i?Yo(a,p,e):Wt(a,e,p);const y=1e-9,C=Math.ceil(Math.log(t/p)/Math.log(s)-y),T=-h*(.5-y)+.5,E=Math.min(p,a),w=Math.floor(Math.log(t/E)/Math.log(s)+T),L=Math.max(C,w),I=t/Math.pow(s,L);return Wt(I,e,p)}else return}}function ll(s,t,e,i,n){return e=e!==void 0?e:!0,function(r,a,h,c){if(r!==void 0){const g=i?Xo(s,i,h,n):s;return!e||!c?Wt(r,t,g):Yo(r,g,t)}else return}}function zo(s){if(s!==void 0)return 0}function hl(s){if(s!==void 0)return s}function Bf(s){const t=2*Math.PI/s;return function(e,i){if(i)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function Hf(s){return s=s||Ps(5),function(t,e){if(e)return t;if(t!==void 0)return Math.abs(t)<=s?0:t}}const Fr=0;class Uf extends He{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=xo(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&mu(),t.center&&(t.center=ii(t.center,this.projection_)),t.extent&&(t.extent=ji(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const h in Me)delete e[h];this.setProperties(e,!0);const i=Kf(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const n=Vf(t),r=i.constraint,a=Zf(t);this.constraints_={center:n,resolution:r,rotation:a},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenter();if(i){const n=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),a=r/2*(n[3]-e[3]+e[1]-n[1]),h=r/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([i[0]+a,i[1]-h])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let n=arguments[i];n.center&&(n=Object.assign({},n),n.center=ii(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=ii(n.anchor,this.getProjection())),e[i]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,i;e>1&&typeof arguments[e-1]=="function"&&(i=arguments[e-1],--e);let n=0;for(;n<e&&!this.isDef();++n){const p=arguments[n];p.center&&this.setCenterInternal(p.center),p.zoom!==void 0?this.setZoom(p.zoom):p.resolution&&this.setResolution(p.resolution),p.rotation!==void 0&&this.setRotation(p.rotation)}if(n===e){i&&Is(i,!0);return}let r=Date.now(),a=this.targetCenter_.slice(),h=this.targetResolution_,c=this.targetRotation_;const g=[];for(;n<e;++n){const p=arguments[n],y={start:r,complete:!1,anchor:p.anchor,duration:p.duration!==void 0?p.duration:1e3,easing:p.easing||xf,callback:i};if(p.center&&(y.sourceCenter=a,y.targetCenter=p.center.slice(),a=y.targetCenter),p.zoom!==void 0?(y.sourceResolution=h,y.targetResolution=this.getResolutionForZoom(p.zoom),h=y.targetResolution):p.resolution&&(y.sourceResolution=h,y.targetResolution=p.resolution,h=y.targetResolution),p.rotation!==void 0){y.sourceRotation=c;const C=Bi(p.rotation-c+Math.PI,2*Math.PI)-Math.PI;y.targetRotation=c+C,c=y.targetRotation}qf(y)?y.complete=!0:r+=y.duration,g.push(y)}this.animations_.push(g),this.setHint(re.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[re.ANIMATING]>0}getInteracting(){return this.hints_[re.INTERACTING]>0}cancelAnimations(){this.setHint(re.ANIMATING,-this.hints_[re.ANIMATING]);let t;for(let e=0,i=this.animations_.length;e<i;++e){const n=this.animations_[e];if(n[0].callback&&Is(n[0].callback,!1),!t)for(let r=0,a=n.length;r<a;++r){const h=n[r];if(!h.complete){t=h.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let r=!0;for(let a=0,h=n.length;a<h;++a){const c=n[a];if(c.complete)continue;const g=t-c.start;let p=c.duration>0?g/c.duration:1;p>=1?(c.complete=!0,p=1):r=!1;const y=c.easing(p);if(c.sourceCenter){const C=c.sourceCenter[0],T=c.sourceCenter[1],E=c.targetCenter[0],w=c.targetCenter[1];this.nextCenter_=c.targetCenter;const L=C+y*(E-C),I=T+y*(w-T);this.targetCenter_=[L,I]}if(c.sourceResolution&&c.targetResolution){const C=y===1?c.targetResolution:c.sourceResolution+y*(c.targetResolution-c.sourceResolution);if(c.anchor){const T=this.getViewportSize_(this.getRotation()),E=this.constraints_.resolution(C,0,T,!0);this.targetCenter_=this.calculateCenterZoom(E,c.anchor)}this.nextResolution_=c.targetResolution,this.targetResolution_=C,this.applyTargetState_(!0)}if(c.sourceRotation!==void 0&&c.targetRotation!==void 0){const C=y===1?Bi(c.targetRotation+Math.PI,2*Math.PI)-Math.PI:c.sourceRotation+y*(c.targetRotation-c.sourceRotation);if(c.anchor){const T=this.constraints_.rotation(C,!0);this.targetCenter_=this.calculateCenterRotate(T,c.anchor)}this.nextRotation_=c.targetRotation,this.targetRotation_=C}if(this.applyTargetState_(!0),e=!0,!c.complete)break}if(r){this.animations_[i]=null,this.setHint(re.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const a=n[0].callback;a&&Is(a,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const n=this.getCenterInternal();return n!==void 0&&(i=[n[0]-e[0],n[1]-e[1]],mo(i,t-this.getRotation()),fu(i,e)),i}calculateCenterZoom(t,e){let i;const n=this.getCenterInternal(),r=this.getResolution();if(n!==void 0&&r!==void 0){const a=e[0]-t*(e[0]-n[0])/r,h=e[1]-t*(e[1]-n[1])/r;i=[a,h]}return i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}else return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&Kr(t,this.getProjection())}getCenterInternal(){return this.get(Me.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return Pl(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();ft(e,1);const i=this.getResolution();ft(i!==void 0,2);const n=this.getRotation();return ft(n!==void 0,3),Br(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Me.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(ji(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=Pt(t)/e[0],n=Be(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t);return function(r){return e/Math.pow(t,r*n)}}getRotation(){return this.get(Me.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(i/n)/e;return function(a){return Math.log(i/a)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const r=this.padding_;if(r){const a=this.getViewportSizeMinusPadding_();n=kr(n,this.getViewportSize_(),[a[0]/2+r[3],a[1]/2+r[0]],e,i)}return{center:n.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,i,n;if(this.resolutions_){const r=co(this.resolutions_,t,1);e=r,i=this.resolutions_[r],r==this.resolutions_.length-1?n=2:n=i/this.resolutions_[r+1]}else i=this.maxResolution_,n=this.zoomFactor_;return e+Math.log(i/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=Wt(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,Wt(t-e,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(ft(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function",24),Array.isArray(t)){ft(!_o(t),25);const n=ji(t,this.getProjection());i=Na(n)}else if(t.getType()==="Circle"){const n=ji(t.getExtent(),this.getProjection());i=Na(n),i.rotate(this.getRotation(),Ki(n))}else i=t;this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),r=t.getFlatCoordinates(),a=t.getStride();let h=1/0,c=1/0,g=-1/0,p=-1/0;for(let y=0,C=r.length;y<C;y+=a){const T=r[y]*i-r[y+1]*n,E=r[y]*n+r[y+1]*i;h=Math.min(h,T),c=Math.min(c,E),g=Math.max(g,T),p=Math.max(p,E)}return[h,c,g,p]}fitInternal(t,e){e=e||{};let i=e.size;i||(i=this.getViewportSizeMinusPadding_());const n=e.padding!==void 0?e.padding:[0,0,0,0],r=e.nearest!==void 0?e.nearest:!1;let a;e.minResolution!==void 0?a=e.minResolution:e.maxZoom!==void 0?a=this.getResolutionForZoom(e.maxZoom):a=0;const h=this.rotatedExtentForGeometry(t);let c=this.getResolutionForExtentInternal(h,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);c=isNaN(c)?a:Math.max(c,a),c=this.getConstrainedResolution(c,r?0:1);const g=this.getRotation(),p=Math.sin(g),y=Math.cos(g),C=Ki(h);C[0]+=(n[1]-n[3])/2*c,C[1]+=(n[0]-n[2])/2*c;const T=C[0]*y-C[1]*p,E=C[1]*y+C[0]*p,w=this.getConstrainedCenter([T,E],c),L=e.callback?e.callback:Vi;e.duration!==void 0?this.animateInternal({resolution:c,center:w,duration:e.duration,easing:e.easing},L):(this.targetResolution_=c,this.targetCenter_=w,this.applyTargetState_(!1,!0),Is(L,!0))}centerOn(t,e,i){this.centerOnInternal(ii(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(kr(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let r;const a=this.padding_;if(a&&t){const h=this.getViewportSizeMinusPadding_(-i),c=kr(t,n,[h[0]/2+a[3],h[1]/2+a[0]],e,i);r=[t[0]-c[0],t[1]-c[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=Kr(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&ii(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=ii(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&ii(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(n),a=this.constraints_.resolution(this.targetResolution_,0,r,i),h=this.constraints_.center(this.targetCenter_,a,r,i,this.calculateCenterShift(this.targetCenter_,a,n,r));this.get(Me.ROTATION)!==n&&this.set(Me.ROTATION,n),this.get(Me.RESOLUTION)!==a&&(this.set(Me.RESOLUTION,a),this.set("zoom",this.getZoom(),!0)),(!h||!this.get(Me.CENTER)||!Fs(this.get(Me.CENTER),h))&&this.set(Me.CENTER,h),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=t!==void 0?t:200;const n=e||0,r=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(r),h=this.constraints_.resolution(this.targetResolution_,n,a),c=this.constraints_.center(this.targetCenter_,h,a,!1,this.calculateCenterShift(this.targetCenter_,h,r,a));if(t===0&&!this.cancelAnchor_){this.targetResolution_=h,this.targetRotation_=r,this.targetCenter_=c,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==h||this.getRotation()!==r||!this.getCenterInternal()||!Fs(this.getCenterInternal(),c))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:c,resolution:h,duration:t,easing:Tn,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(re.INTERACTING,1)}endInteraction(t,e,i){i=i&&ii(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.setHint(re.INTERACTING,-1),this.resolveConstraints(t,e,i)}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function Is(s,t){setTimeout(function(){s(t)},0)}function Vf(s){if(s.extent!==void 0){const e=s.smoothExtentConstraint!==void 0?s.smoothExtentConstraint:!0;return al(s.extent,s.constrainOnlyCenter,e)}const t=xo(s.projection,"EPSG:3857");if(s.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,al(e,!1,!1)}return Xf}function Kf(s){let t,e,i,a=s.minZoom!==void 0?s.minZoom:Fr,h=s.maxZoom!==void 0?s.maxZoom:28;const c=s.zoomFactor!==void 0?s.zoomFactor:2,g=s.multiWorld!==void 0?s.multiWorld:!1,p=s.smoothResolutionConstraint!==void 0?s.smoothResolutionConstraint:!0,y=s.showFullExtent!==void 0?s.showFullExtent:!1,C=xo(s.projection,"EPSG:3857"),T=C.getExtent();let E=s.constrainOnlyCenter,w=s.extent;if(!g&&!w&&C.isGlobal()&&(E=!1,w=T),s.resolutions!==void 0){const L=s.resolutions;e=L[a],i=L[h]!==void 0?L[h]:L[L.length-1],s.constrainResolution?t=Yf(L,p,!E&&w,y):t=ll(e,i,p,!E&&w,y)}else{const I=(T?Math.max(Pt(T),Be(T)):360*Bn.degrees/C.getMetersPerUnit())/Wo/Math.pow(2,Fr),P=I/Math.pow(2,28-Fr);e=s.maxResolution,e!==void 0?a=0:e=I/Math.pow(c,a),i=s.minResolution,i===void 0&&(s.maxZoom!==void 0?s.maxResolution!==void 0?i=e/Math.pow(c,h):i=I/Math.pow(c,h):i=P),h=a+Math.floor(Math.log(e/i)/Math.log(c)),i=e/Math.pow(c,h-a),s.constrainResolution?t=zf(c,e,i,p,!E&&w,y):t=ll(e,i,p,!E&&w,y)}return{constraint:t,maxResolution:e,minResolution:i,minZoom:a,zoomFactor:c}}function Zf(s){if(s.enableRotation!==void 0?s.enableRotation:!0){const e=s.constrainRotation;return e===void 0||e===!0?Hf():e===!1?hl:typeof e=="number"?Bf(e):hl}else return zo}function qf(s){return!(s.sourceCenter&&s.targetCenter&&!Fs(s.sourceCenter,s.targetCenter)||s.sourceResolution!==s.targetResolution||s.sourceRotation!==s.targetRotation)}function kr(s,t,e,i,n){const r=Math.cos(-n);let a=Math.sin(-n),h=s[0]*r-s[1]*a,c=s[1]*r+s[0]*a;h+=(t[0]/2-e[0])*i,c+=(e[1]-t[1]/2)*i,a=-a;const g=h*r-c*a,p=c*r+h*a;return[g,p]}const Ei=Uf;class $f extends He{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Qr(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Qr(this.element);for(let e=0,i=this.listenerKeys.length;e<i;++e)Ot(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Vi&&this.listenerKeys.push(xt(t,xi.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}const Bo=$f;class Jf extends Bo{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const e=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",n=t.expandClassName!==void 0?t.expandClassName:e+"-expand",r=t.collapseLabel!==void 0?t.collapseLabel:"âº",a=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=a):this.collapseLabel_=r;const h=t.label!==void 0?t.label:"i";typeof h=="string"?(this.label_=document.createElement("span"),this.label_.textContent=h,this.label_.className=n):this.label_=h;const c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(c),this.toggleButton_.addEventListener(ct.CLICK,this.handleClick_.bind(this),!1);const g=e+" "+sr+" "+Po+(this.collapsed_&&this.collapsible_?" "+Ya:"")+(this.collapsible_?"":" ol-uncollapsible"),p=this.element;p.className=g,p.appendChild(this.toggleButton_),p.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e={},i=[];let n=!0;const r=t.layerStatesArray;for(let a=0,h=r.length;a<h;++a){const c=r[a];if(!No(c,t.viewState))continue;const g=c.layer.getSource();if(!g)continue;const p=g.getAttributions();if(!p)continue;const y=p(t);if(y)if(n=n&&g.getAttributionsCollapsible()!==!1,Array.isArray(y))for(let C=0,T=y.length;C<T;++C)y[C]in e||(i.push(y[C]),e[y[C]]=!0);else y in e||(i.push(y),e[y]=!0)}return this.overrideCollapsible_||this.setCollapsible(n),i}updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Zi(e,this.renderedAttributions_)){qu(this.ulElement_);for(let n=0,r=e.length;n<r;++n){const a=document.createElement("li");a.innerHTML=e[n],this.ulElement_.appendChild(a)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Ya),this.collapsed_?Xa(this.collapseLabel_,this.label_):Xa(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const Qf=Jf;class tg extends Bo{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"â§",n=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const r=t.tipLabel?t.tipLabel:"Reset rotation",a=document.createElement("button");a.className=e+"-reset",a.setAttribute("type","button"),a.title=r,a.appendChild(this.label_),a.addEventListener(ct.CLICK,this.handleClick_.bind(this),!1);const h=e+" "+sr+" "+Po,c=this.element;c.className=h,c.appendChild(a),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Ts)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:Tn}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const n="rotate("+i+"rad)";if(this.autoHide_){const r=this.element.classList.contains(Ts);!r&&i===0?this.element.classList.add(Ts):r&&i!==0&&this.element.classList.remove(Ts)}this.label_.style.transform=n}this.rotation_=i}}const eg=tg;class ig extends Bo{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,n=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",r=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",a=t.zoomInLabel!==void 0?t.zoomInLabel:"+",h=t.zoomOutLabel!==void 0?t.zoomOutLabel:"â",c=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",g=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",p=document.createElement("button");p.className=n,p.setAttribute("type","button"),p.title=c,p.appendChild(typeof a=="string"?document.createTextNode(a):a),p.addEventListener(ct.CLICK,this.handleClick_.bind(this,i),!1);const y=document.createElement("button");y.className=r,y.setAttribute("type","button"),y.title=g,y.appendChild(typeof h=="string"?document.createTextNode(h):h),y.addEventListener(ct.CLICK,this.handleClick_.bind(this,-i),!1);const C=e+" "+sr+" "+Po,T=this.element;T.className=C,T.appendChild(p),T.appendChild(y),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const n=i.getZoom();if(n!==void 0){const r=i.getConstrainedZoom(n+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:Tn})):i.setZoom(r)}}}const ng=ig;function sg(s){s=s||{};const t=new We;return(s.zoom!==void 0?s.zoom:!0)&&t.push(new ng(s.zoomOptions)),(s.rotate!==void 0?s.rotate:!0)&&t.push(new eg(s.rotateOptions)),(s.attribution!==void 0?s.attribution:!0)&&t.push(new Qf(s.attributionOptions)),t}const cl={ACTIVE:"active"};class rg extends He{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(cl.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(cl.ACTIVE,t)}setMap(t){this.map_=t}}function og(s,t,e){const i=s.getCenterInternal();if(i){const n=[i[0]+t[0],i[1]+t[1]];s.animateInternal({duration:e!==void 0?e:250,easing:Cf,center:s.getConstrainedCenter(n)})}}function Ho(s,t,e,i){const n=s.getZoom();if(n===void 0)return;const r=s.getConstrainedZoom(n+t),a=s.getResolutionForZoom(r);s.getAnimating()&&s.cancelAnimations(),s.animate({resolution:a,anchor:e,duration:i!==void 0?i:250,easing:Tn})}const ls=rg;class ag extends ls{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==Ft.DBLCLICK){const i=t.originalEvent,n=t.map,r=t.coordinate,a=i.shiftKey?-this.delta_:this.delta_,h=n.getView();Ho(h,a,r,this.duration_),i.preventDefault(),e=!0}return!e}}const lg=ag;class hg extends ls{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Ft.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Ft.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==Ft.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==Ft.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Uo(s){const t=s.length;let e=0,i=0;for(let n=0;n<t;n++)e+=s[n].clientX,i+=s[n].clientY;return[e/t,i/t]}const hs=hg;function so(s){const t=arguments;return function(e){let i=!0;for(let n=0,r=t.length;n<r&&(i=i&&t[n](e),!!i);++n);return i}}const cg=function(s){const t=s.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},ug=function(s){const t=s.map.getTargetElement(),e=s.map.getOwnerDocument().activeElement;return t.contains(e)},mh=function(s){return s.map.getTargetElement().hasAttribute("tabindex")?ug(s):!0},dg=Xn,yh=function(s){const t=s.originalEvent;return t.button==0&&!(jc&&Wc&&t.ctrlKey)},xh=function(s){const t=s.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},fg=function(s){const t=s.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Ch=function(s){const t=s.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},Nr=function(s){const t=s.originalEvent;return ft(t!==void 0,56),t.pointerType=="mouse"},gg=function(s){const t=s.originalEvent;return ft(t!==void 0,56),t.isPrimary&&t.button===0};class pg extends hs{constructor(t){super({stopDown:Zs}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:so(xh,gg);this.condition_=t.onFocusOnly?so(mh,e):e,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const e=this.targetPointers,i=Uo(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const n=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],a=t.map.getView();gu(n,a.getResolution()),mo(n,a.getRotation()),a.adjustCenterInternal(n)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const n=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),a=i.getCenterInternal(),h=e.getPixelFromCoordinateInternal(a),c=e.getCoordinateFromPixelInternal([h[0]-n*Math.cos(r),h[1]-n*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(c),duration:500,easing:Tn})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1}}const _g=pg;class mg extends hs{constructor(t){t=t||{},super({stopDown:Zs}),this.condition_=t.condition?t.condition:cg,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Nr(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===zo)return;const n=e.getSize(),r=t.pixel,a=Math.atan2(n[1]/2-r[1],r[0]-n[0]/2);if(this.lastAngle_!==void 0){const h=a-this.lastAngle_;i.adjustRotationInternal(-h)}this.lastAngle_=a}handleUpEvent(t){return Nr(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Nr(t)&&yh(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}const yg=mg;class xg extends ho{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+i,n.top=Math.min(t[1],e[1])+i,n.width=Math.abs(e[0]-t[0])+i,n.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Gs([n])}getGeometry(){return this.geometry_}}const Cg=xg,bs={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Gr extends ai{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}class Eg extends hs{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new Cg(t.className||"ol-dragbox"),this.minArea_=t.minArea!==void 0?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:yh,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const n=i[0]-e[0],r=i[1]-e[1];return n*n+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Gr(bs.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Gr(e?bs.BOXEND:bs.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Gr(bs.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}}const vg=Eg;class Tg extends vg{constructor(t){t=t||{};const e=t.condition?t.condition:fg;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let n=this.getGeometry();if(this.out_){const r=i.rotatedExtentForGeometry(n),a=i.getResolutionForExtentInternal(r),h=i.getResolution()/a;n=n.clone(),n.scale(h*h)}i.fitInternal(n,{duration:this.duration_,easing:Tn})}}const Rg=Tg,ki={LEFT:37,UP:38,RIGHT:39,DOWN:40};class wg extends ls{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return xh(e)&&Ch(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==ct.KEYDOWN){const i=t.originalEvent,n=i.keyCode;if(this.condition_(t)&&(n==ki.DOWN||n==ki.LEFT||n==ki.RIGHT||n==ki.UP)){const a=t.map.getView(),h=a.getResolution()*this.pixelDelta_;let c=0,g=0;n==ki.DOWN?g=-h:n==ki.LEFT?c=-h:n==ki.RIGHT?c=h:g=h;const p=[c,g];mo(p,a.getRotation()),og(a,p,this.duration_),i.preventDefault(),e=!0}}return!e}}const Sg=wg;class Ig extends ls{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:Ch,this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==ct.KEYDOWN||t.type==ct.KEYPRESS){const i=t.originalEvent,n=i.charCode;if(this.condition_(t)&&(n=="+".charCodeAt(0)||n=="-".charCodeAt(0))){const r=t.map,a=n=="+".charCodeAt(0)?this.delta_:-this.delta_,h=r.getView();Ho(h,a,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}}const bg=Ig;class Lg extends ls{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:dg;this.condition_=t.onFocusOnly?so(mh,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t)||t.type!==ct.WHEEL)return!0;const i=t.map,n=t.originalEvent;n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate);let r;if(t.type==ct.WHEEL&&(r=n.deltaY,Nc&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=yl),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const a=Date.now();this.startTime_===void 0&&(this.startTime_=a),(!this.mode_||a-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const h=i.getView();if(this.mode_==="trackpad"&&!(h.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(h.getAnimating()&&h.cancelAnimations(),h.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),h.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=a,!1;this.totalDelta_+=r;const c=Math.max(this.timeout_-(a-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),c),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-Wt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Ho(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const Ag=Lg;class Mg extends hs{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Zs),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],n=this.targetPointers[1],r=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(this.lastAngle_!==void 0){const p=r-this.lastAngle_;this.rotationDelta_+=p,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=p}this.lastAngle_=r;const a=t.map,h=a.getView();if(h.getConstraints().rotation===zo)return;const c=a.getViewport().getBoundingClientRect(),g=Uo(this.targetPointers);g[0]-=c.left,g[1]-=c.top,this.anchor_=a.getCoordinateFromPixelInternal(g),this.rotating_&&(a.render(),h.adjustRotationInternal(e,this.anchor_))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}else return!1}}const Pg=Mg;class Og extends hs{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=Zs),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],n=this.targetPointers[1],r=i.clientX-n.clientX,a=i.clientY-n.clientY,h=Math.sqrt(r*r+a*a);this.lastDistance_!==void 0&&(e=this.lastDistance_/h),this.lastDistance_=h;const c=t.map,g=c.getView();e!=1&&(this.lastScaleDelta_=e);const p=c.getViewport().getBoundingClientRect(),y=Uo(this.targetPointers);y[0]-=p.left,y[1]-=p.top,this.anchor_=c.getCoordinateFromPixelInternal(y),c.render(),g.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,n),!1}else return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}else return!1}}const Dg=Og;function Fg(s){s=s||{};const t=new We,e=new wf(-.005,.05,100);return(s.altShiftDragRotate!==void 0?s.altShiftDragRotate:!0)&&t.push(new yg),(s.doubleClickZoom!==void 0?s.doubleClickZoom:!0)&&t.push(new lg({delta:s.zoomDelta,duration:s.zoomDuration})),(s.dragPan!==void 0?s.dragPan:!0)&&t.push(new _g({onFocusOnly:s.onFocusOnly,kinetic:e})),(s.pinchRotate!==void 0?s.pinchRotate:!0)&&t.push(new Pg),(s.pinchZoom!==void 0?s.pinchZoom:!0)&&t.push(new Dg({duration:s.zoomDuration})),(s.keyboard!==void 0?s.keyboard:!0)&&(t.push(new Sg),t.push(new bg({delta:s.zoomDelta,duration:s.zoomDuration}))),(s.mouseWheelZoom!==void 0?s.mouseWheelZoom:!0)&&t.push(new Ag({onFocusOnly:s.onFocusOnly,duration:s.zoomDuration})),(s.shiftDragZoom!==void 0?s.shiftDragZoom:!0)&&t.push(new Rg({duration:s.zoomDuration})),t}function Eh(s){if(s instanceof or){s.setMapInternal(null);return}s instanceof ar&&s.getLayers().forEach(Eh)}function vh(s,t){if(s instanceof or){s.setMapInternal(t);return}if(s instanceof ar){const e=s.getLayers().getArray();for(let i=0,n=e.length;i<n;++i)vh(e[i],t)}}class kg extends He{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=Ng(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:yl,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ye(),this.pixelToCoordinateTransform_=Ye(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.controls=e.controls||sg(),this.interactions=e.interactions||Fg({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Gf(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(se.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(se.VIEW,this.handleViewChanged_),this.addChangeListener(se.SIZE,this.handleSizeChanged_),this.addChangeListener(se.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const i=this;t.view&&!(t.view instanceof Ei)&&t.view.then(function(n){i.setView(new Ei(n))}),this.controls.addEventListener(de.ADD,function(n){n.element.setMap(this)}.bind(this)),this.controls.addEventListener(de.REMOVE,function(n){n.element.setMap(null)}.bind(this)),this.interactions.addEventListener(de.ADD,function(n){n.element.setMap(this)}.bind(this)),this.interactions.addEventListener(de.REMOVE,function(n){n.element.setMap(null)}.bind(this)),this.overlays_.addEventListener(de.ADD,function(n){this.addOverlayInternal_(n.element)}.bind(this)),this.overlays_.addEventListener(de.REMOVE,function(n){const r=n.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],n.element.setMap(null)}.bind(this)),this.controls.forEach(function(n){n.setMap(this)}.bind(this)),this.interactions.forEach(function(n){n.setMap(this)}.bind(this)),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){vh(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const r=i.hitTolerance!==void 0?i.hitTolerance:0,a=i.layerFilter!==void 0?i.layerFilter:Xn,h=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,h,e,null,a,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,function(n){i.push(n)},e),i}getAllLayers(){const t=[];function e(i){i.forEach(function(n){n instanceof ar?e(n.getLayers()):t.push(n)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const n=e.layerFilter!==void 0?e.layerFilter:Xn,r=e.hitTolerance!==void 0?e.hitTolerance:0,a=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,a,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]}getTarget(){return this.get(se.TARGET)}getTargetElement(){const t=this.getTarget();return t!==void 0?typeof t=="string"?document.getElementById(t):t:null}getCoordinateFromPixel(t){return Kr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?Kt(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(se.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof We){e.setLayers(t);return}const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const n=t[e];if(!n.visible)continue;const r=n.layer.getRenderer();if(r&&!r.ready)return!0;const a=n.layer.getSource();if(a&&a.loading)return!0}return!1}getPixelFromCoordinate(t){const e=ii(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?Kt(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(se.SIZE)}getView(){return this.get(se.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return jf(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){e=e||t.type;const i=new yi(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===no.POINTERDOWN||i===ct.WHEEL||i===ct.KEYDOWN){const n=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():n,a=e.target;if(this.overlayContainerStopEvent_.contains(a)||!(r===n?n.documentElement:r).contains(a))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const n=this.getInteractions().getArray().slice();for(let r=n.length-1;r>=0;r--){const a=n[r];if(a.getMap()!==this||!a.getActive()||!this.getTargetElement())continue;if(!a.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,r=n;if(t){const a=t.viewHints;if(a[re.ANIMATING]||a[re.INTERACTING]){const h=Date.now()-t.time>8;n=h?0:8,r=h?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,r))}t&&this.renderer_&&!t.animate&&(this.renderComplete_===!0?(this.hasListener(Ri.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ri.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new gn(xi.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new gn(xi.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let n=0,r=i.length;n<r;++n)i[n](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let e=0,i=this.targetChangeHandlerKeys_.length;e<i;++e)Ot(this.targetChangeHandlerKeys_[e]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ct.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ct.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Qr(this.viewport_)}const t=this.getTargetElement();if(!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Af(this)),this.mapBrowserEventHandler_=new Df(this,this.moveTolerance_);for(const n in Ft)this.mapBrowserEventHandler_.addEventListener(Ft[n],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ct.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ct.WHEEL,this.boundHandleBrowserEvent_,xl?{passive:!1}:!1);const e=this.getOwnerDocument().defaultView,i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[xt(i,ct.KEYDOWN,this.handleBrowserEvent,this),xt(i,ct.KEYPRESS,this.handleBrowserEvent,this),xt(e,ct.RESIZE,this.updateSize,this)]}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(Ot(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Ot(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=xt(t,yn.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=xt(t,ct.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(Ot),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Ci("addlayer",t)),this.layerGroupPropertyListenerKeys_=[xt(t,yn.PROPERTYCHANGE,this.render,this),xt(t,ct.CHANGE,this.render,this),xt(t,"addlayer",this.handleLayerAdd_,this),xt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){Eh(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),n=this.frameState_;let r=null;if(e!==void 0&&ja(e)&&i&&i.isDef()){const a=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:Br(h.center,h.resolution,h.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:h,viewHints:a,wantedTiles:{},mapId:vt(this),renderTargets:{}},h.nextCenter&&h.nextResolution){const c=isNaN(h.nextRotation)?h.rotation:h.nextRotation;r.nextExtent=Br(h.nextCenter,h.nextResolution,c,e)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),n&&(!this.previousExtent_||!_o(this.previousExtent_)&&!zn(r.extent,this.previousExtent_))&&(this.dispatchEvent(new gn(xi.MOVESTART,this,n)),this.previousExtent_=ns(this.previousExtent_)),this.previousExtent_&&!r.viewHints[re.ANIMATING]&&!r.viewHints[re.INTERACTING]&&!zn(r.extent,this.previousExtent_)&&(this.dispatchEvent(new gn(xi.MOVEEND,this,r)),El(r.extent,this.previousExtent_))),this.dispatchEvent(new gn(xi.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(xi.LOADSTART)||this.hasListener(xi.LOADEND)||this.hasListener(Ri.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Ci("removelayer",e)),this.set(se.LAYERGROUP,t)}setSize(t){this.set(se.SIZE,t)}setTarget(t){this.set(se.TARGET,t)}setView(t){if(!t||t instanceof Ei){this.set(se.VIEW,t);return}this.set(se.VIEW,new Ei);const e=this;t.then(function(i){e.setView(new Ei(i))})}updateSize(){const t=this.getTargetElement();let e;if(t){const i=getComputedStyle(t),n=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),r=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);!isNaN(n)&&!isNaN(r)&&(e=[n,r],!ja(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(e),this.updateViewportSize_()}updateViewportSize_(){const t=this.getView();if(t){let e;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}}function Ng(s){let t=null;s.keyboardEventTarget!==void 0&&(t=typeof s.keyboardEventTarget=="string"?document.getElementById(s.keyboardEventTarget):s.keyboardEventTarget);const e={},i=s.layers&&typeof s.layers.getLayers=="function"?s.layers:new ar({layers:s.layers});e[se.LAYERGROUP]=i,e[se.TARGET]=s.target,e[se.VIEW]=s.view instanceof Ei?s.view:new Ei;let n;s.controls!==void 0&&(Array.isArray(s.controls)?n=new We(s.controls.slice()):(ft(typeof s.controls.getArray=="function",47),n=s.controls));let r;s.interactions!==void 0&&(Array.isArray(s.interactions)?r=new We(s.interactions.slice()):(ft(typeof s.interactions.getArray=="function",48),r=s.interactions));let a;return s.overlays!==void 0?Array.isArray(s.overlays)?a=new We(s.overlays.slice()):(ft(typeof s.overlays.getArray=="function",49),a=s.overlays):a=new We,{controls:n,interactions:r,keyboardEventTarget:t,overlays:a,values:e}}const Gg=kg;class jg{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return ft(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return ft(e!==void 0,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.key_;return t}getValues(){const t=new Array(this.count_);let e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){ft(!(t in this.entries_),16);const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}const Wg=jg;function ul(s,t,e,i){return i!==void 0?(i[0]=s,i[1]=t,i[2]=e,i):[s,t,e]}function lr(s,t,e){return s+"/"+t+"/"+e}function Th(s){return lr(s[0],s[1],s[2])}function Xg(s){return s.split("/").map(Number)}function Rh(s){return(s[1]<<s[0])+s[2]}function Yg(s,t){const e=s[0],i=s[1],n=s[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const r=t.getFullTileRange(e);return r?r.containsXY(i,n):!0}class zg extends Wg{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const t=this.peekFirstKey(),i=Xg(t)[0];this.forEach(function(n){n.tileCoord[0]!==i&&(this.remove(Th(n.tileCoord)),n.release())}.bind(this))}}const wh=zg;class Sh{constructor(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function cn(s,t,e,i,n){return n!==void 0?(n.minX=s,n.maxX=t,n.minY=e,n.maxY=i,n):new Sh(s,t,e,i)}const Ih=Sh;class Bg{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?Bt(e.dataProjection):this.readProjection(t);e.extent&&i&&i.getUnits()==="tile-pixels"&&(i=Bt(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return rt()}readFeature(t,e){return rt()}readFeatures(t,e){return rt()}readGeometry(t,e){return rt()}readProjection(t){return rt()}writeFeature(t,e){return rt()}writeFeatures(t,e){return rt()}writeGeometry(t,e){return rt()}}function bh(s,t,e){const i=e?Bt(e.featureProjection):null,n=e?Bt(e.dataProjection):null;let r;if(i&&n&&!Gi(i,n)?r=(t?s.clone():s).transform(t?i:n,t?n:i):r=s,t&&e&&e.decimals!==void 0){const a=Math.pow(10,e.decimals),h=function(c){for(let g=0,p=c.length;g<p;++g)c[g]=Math.round(c[g]*a)/a;return c};r===s&&(r=s.clone()),r.applyTransform(h)}return r}class Us extends Ji{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{let n=this.getLayout();const r=t,a=[],h=[];for(let c=0,g=r.length;c<g;++c){const p=r[c];c===0&&(n=p.getLayout()),ri(a,p.getFlatCoordinates()),h.push(a.length)}this.setFlatCoordinates(n,a),this.ends_=h}}appendLineString(t){this.flatCoordinates?ri(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Us(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<qi(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(vo(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ro(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))}getCoordinateAtM(t,e,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,i=i!==void 0?i:!1,Bu(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return Un(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Jr(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[];let r=0;for(let a=0,h=e.length;a<h;++a){const c=e[a],g=new Jr(t.slice(r,c),i);n.push(g),r=c}return n}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const n=this.ends_,r=this.stride;for(let a=0,h=n.length;a<h;++a){const c=n[a],g=Bl(e,i,c,r,.5);ri(t,g),i=c}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Ou(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new Us(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return Wu(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=wo(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}const Hg=Us;class Vo extends Ji{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?ri(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new Vo(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n<qi(this.getExtent(),t,e))return n;const r=this.flatCoordinates,a=this.stride;for(let h=0,c=r.length;h<c;h+=a){const g=zi(t,e,r[h],r[h+1]);if(g<n){n=g;for(let p=0;p<a;++p)i[p]=r[h+p];i.length=a}}return n}getCoordinates(){return vi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Ns(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,n=[];for(let r=0,a=t.length;r<a;r+=i){const h=new Ns(t.slice(r,r+i),e);n.push(h)}return n}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let n=0,r=e.length;n<r;n+=i){const a=e[n],h=e[n+1];if(po(t,a,h))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ir(this.flatCoordinates,0,t,this.stride),this.changed()}}const Lh=Vo;function Ug(s,t,e,i){const n=[];let r=pe();for(let a=0,h=e.length;a<h;++a){const c=e[a];r=vl(s,t,c[0],i),n.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=c[c.length-1]}return n}class Vs extends Ji{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let n=this.getLayout();const r=t,a=[],h=[];for(let c=0,g=r.length;c<g;++c){const p=r[c];c===0&&(n=p.getLayout());const y=a.length,C=p.getEnds();for(let T=0,E=C.length;T<E;++T)C[T]+=y;ri(a,p.getFlatCoordinates()),h.push(C)}e=n,t=a,i=h}e!==void 0&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;ri(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let n=0,r=e.length;n<r;++n)e[n]+=i}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let n=0;n<t;++n)e[n]=this.endss_[n].slice();const i=new Vs(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,n){return n<qi(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Lu(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Au(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return Gu(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return ku(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),ka(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Zr(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=Ug(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ju(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Lh(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;zu(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=ka(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=Fu(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new Vs(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const r=this.endss_[t-1];e=r[r.length-1]}const i=this.endss_[t].slice(),n=i[i.length-1];if(e!==0)for(let r=0,a=i.length;r<a;++r)i[r]-=e;return new Gs(this.flatCoordinates.slice(e,n),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[];let r=0;for(let a=0,h=i.length;a<h;++a){const c=i[a].slice(),g=c[c.length-1];if(r!==0)for(let y=0,C=c.length;y<C;++y)c[y]-=r;const p=new Gs(e.slice(r,g),t,c);n.push(p),r=g}return n}getType(){return"MultiPolygon"}intersectsExtent(t){return Xu(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=Pu(this.flatCoordinates,0,t,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const n=i[i.length-1];this.flatCoordinates.length=n.length===0?0:n[n.length-1]}this.changed()}}const Vg=Vs;class Ks extends Dl{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(Ot),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(xt(this.geometries_[t],ct.CHANGE,this.changed,this))}clone(){const t=new Ks(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n<qi(this.getExtent(),t,e))return n;const r=this.geometries_;for(let a=0,h=r.length;a<h;++a)n=r[a].closestPointXY(t,e,i,n);return n}containsXY(t,e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)if(i[n].containsXY(t,e))return!0;return!1}computeExtent(t){ns(t);const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)Tl(t,e[i].getExtent());return t}getGeometries(){return dl(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let n=!1;for(let r=0,a=i.length;r<a;++r){const h=i[r],c=h.getSimplifiedGeometry(t);e.push(c),c!==h&&(n=!0)}if(n){const r=new Ks(null);return r.setGeometriesArray(e),r}else return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)i[n].rotate(t,e);this.changed()}scale(t,e,i){i||(i=Ki(this.getExtent()));const n=this.geometries_;for(let r=0,a=n.length;r<a;++r)n[r].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(dl(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)i[n].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function dl(s){const t=[];for(let e=0,i=s.length;e<i;++e)t.push(s[e].clone());return t}const Kg=Ks,Zg=.5,qg=10,fl=.25;class $g{constructor(t,e,i,n,r,a){this.sourceProj_=t,this.targetProj_=e;let h={};const c=Hn(this.targetProj_,this.sourceProj_);this.transformInv_=function(P){const k=P[0]+"/"+P[1];return h[k]||(h[k]=c(P)),h[k]},this.maxSourceExtent_=n,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Pt(n)==Pt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Pt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Pt(this.targetProj_.getExtent()):null;const g=$i(i),p=er(i),y=tr(i),C=Qs(i),T=this.transformInv_(g),E=this.transformInv_(p),w=this.transformInv_(y),L=this.transformInv_(C),I=qg+(a?Math.max(0,Math.ceil(Math.log2(zr(i)/(a*a*256*256)))):0);if(this.addQuad_(g,p,y,C,T,E,w,L,I),this.wrapsXInSource_){let P=1/0;this.triangles_.forEach(function(k,N,W){P=Math.min(P,k.source[0][0],k.source[1][0],k.source[2][0])}),this.triangles_.forEach(function(k){if(Math.max(k.source[0][0],k.source[1][0],k.source[2][0])-P>this.sourceWorldWidth_/2){const N=[[k.source[0][0],k.source[0][1]],[k.source[1][0],k.source[1][1]],[k.source[2][0],k.source[2][1]]];N[0][0]-P>this.sourceWorldWidth_/2&&(N[0][0]-=this.sourceWorldWidth_),N[1][0]-P>this.sourceWorldWidth_/2&&(N[1][0]-=this.sourceWorldWidth_),N[2][0]-P>this.sourceWorldWidth_/2&&(N[2][0]-=this.sourceWorldWidth_);const W=Math.min(N[0][0],N[1][0],N[2][0]);Math.max(N[0][0],N[1][0],N[2][0])-W<this.sourceWorldWidth_/2&&(k.source=N)}}.bind(this))}h={}}addTriangle_(t,e,i,n,r,a){this.triangles_.push({source:[n,r,a],target:[t,e,i]})}addQuad_(t,e,i,n,r,a,h,c,g){const p=wa([r,a,h,c]),y=this.sourceWorldWidth_?Pt(p)/this.sourceWorldWidth_:null,C=this.sourceWorldWidth_,T=this.sourceProj_.canWrapX()&&y>.5&&y<1;let E=!1;if(g>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const L=wa([t,e,i,n]);E=Pt(L)/this.targetWorldWidth_>fl||E}!T&&this.sourceProj_.isGlobal()&&y&&(E=y>fl||E)}if(!E&&this.maxSourceExtent_&&isFinite(p[0])&&isFinite(p[1])&&isFinite(p[2])&&isFinite(p[3])&&!fe(p,this.maxSourceExtent_))return;let w=0;if(!E&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(h[0])||!isFinite(h[1])||!isFinite(c[0])||!isFinite(c[1]))){if(g>0)E=!0;else if(w=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(h[0])||!isFinite(h[1])?2:0)+(!isFinite(c[0])||!isFinite(c[1])?1:0),w!=1&&w!=2&&w!=4&&w!=8)return}if(g>0){if(!E){const L=[(t[0]+i[0])/2,(t[1]+i[1])/2],I=this.transformInv_(L);let P;T?P=(Bi(r[0],C)+Bi(h[0],C))/2-Bi(I[0],C):P=(r[0]+h[0])/2-I[0];const k=(r[1]+h[1])/2-I[1];E=P*P+k*k>this.errorThresholdSquared_}if(E){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const L=[(e[0]+i[0])/2,(e[1]+i[1])/2],I=this.transformInv_(L),P=[(n[0]+t[0])/2,(n[1]+t[1])/2],k=this.transformInv_(P);this.addQuad_(t,e,L,P,r,a,I,k,g-1),this.addQuad_(P,L,i,n,k,I,h,c,g-1)}else{const L=[(t[0]+e[0])/2,(t[1]+e[1])/2],I=this.transformInv_(L),P=[(i[0]+n[0])/2,(i[1]+n[1])/2],k=this.transformInv_(P);this.addQuad_(t,L,P,n,r,I,k,c,g-1),this.addQuad_(L,e,i,P,I,a,h,k,g-1)}return}}if(T){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}w&11||this.addTriangle_(t,i,n,r,h,c),w&14||this.addTriangle_(t,i,e,r,h,a),w&&(w&13||this.addTriangle_(e,n,t,a,c,r),w&7||this.addTriangle_(e,n,i,a,c,h))}calculateSourceExtent(){const t=pe();return this.triangles_.forEach(function(e,i,n){const r=e.source;Gn(t,r[0]),Gn(t,r[1]),Gn(t,r[2])}),t}getTriangles(){return this.triangles_}}const Jg=$g;let jr;const Ah=[];function gl(s,t,e,i,n){s.beginPath(),s.moveTo(0,0),s.lineTo(t,e),s.lineTo(i,n),s.closePath(),s.save(),s.clip(),s.fillRect(0,0,Math.max(t,i)+1,Math.max(e,n)),s.restore()}function Wr(s,t){return Math.abs(s[t*4]-210)>2||Math.abs(s[t*4+3]-.75*255)>2}function Qg(){if(jr===void 0){const s=document.createElement("canvas").getContext("2d");s.globalCompositeOperation="lighter",s.fillStyle="rgba(210, 0, 0, 0.75)",gl(s,4,5,4,0),gl(s,4,5,0,5);const t=s.getImageData(0,0,3,3).data;jr=Wr(t,0)||Wr(t,4)||Wr(t,8)}return jr}function ro(s,t,e,i){const n=Ml(e,t,s);let r=Aa(t,i,e);const a=t.getMetersPerUnit();a!==void 0&&(r*=a);const h=s.getMetersPerUnit();h!==void 0&&(r/=h);const c=s.getExtent();if(!c||Js(c,n)){const g=Aa(s,r,n)/r;isFinite(g)&&g>0&&(r/=g)}return r}function tp(s,t,e,i){const n=Ki(e);let r=ro(s,t,n,i);return(!isFinite(r)||r<=0)&&wl(e,function(a){return r=ro(s,t,a,i),isFinite(r)&&r>0}),r}function ep(s,t,e,i,n,r,a,h,c,g,p,y){const C=_e(Math.round(e*s),Math.round(e*t),Ah);if(y||(C.imageSmoothingEnabled=!1),c.length===0)return C.canvas;C.scale(e,e);function T(N){return Math.round(N*e)/e}C.globalCompositeOperation="lighter";const E=pe();c.forEach(function(N,W,K){Tl(E,N.extent)});const w=Pt(E),L=Be(E),I=_e(Math.round(e*w/i),Math.round(e*L/i));y||(I.imageSmoothingEnabled=!1);const P=e/i;c.forEach(function(N,W,K){const d=N.extent[0]-E[0],$=-(N.extent[3]-E[3]),B=Pt(N.extent),ot=Be(N.extent);N.image.width>0&&N.image.height>0&&I.drawImage(N.image,g,g,N.image.width-2*g,N.image.height-2*g,d*P,$*P,B*P,ot*P)});const k=$i(a);return h.getTriangles().forEach(function(N,W,K){const d=N.source,$=N.target;let B=d[0][0],ot=d[0][1],mt=d[1][0],dt=d[1][1],Z=d[2][0],At=d[2][1];const Q=T(($[0][0]-k[0])/r),tt=T(-($[0][1]-k[1])/r),H=T(($[1][0]-k[0])/r),ht=T(-($[1][1]-k[1])/r),Tt=T(($[2][0]-k[0])/r),Rt=T(-($[2][1]-k[1])/r),kt=B,Y=ot;B=0,ot=0,mt-=kt,dt-=Y,Z-=kt,At-=Y;const Zt=[[mt,dt,0,0,H-Q],[Z,At,0,0,Tt-Q],[0,0,mt,dt,ht-tt],[0,0,Z,At,Rt-tt]],Ct=uu(Zt);if(Ct){if(C.save(),C.beginPath(),Qg()||!y){C.moveTo(H,ht);const wt=4,Pe=Q-H,me=tt-ht;for(let Xt=0;Xt<wt;Xt++)C.lineTo(H+T((Xt+1)*Pe/wt),ht+T(Xt*me/(wt-1))),Xt!=wt-1&&C.lineTo(H+T((Xt+1)*Pe/wt),ht+T((Xt+1)*me/(wt-1)));C.lineTo(Tt,Rt)}else C.moveTo(H,ht),C.lineTo(Q,tt),C.lineTo(Tt,Rt);C.clip(),C.transform(Ct[0],Ct[2],Ct[1],Ct[3],Q,tt),C.translate(E[0]-kt,E[3]-Y),C.scale(i/e,-i/e),C.drawImage(I.canvas,0,0),C.restore()}}),p&&(C.save(),C.globalCompositeOperation="source-over",C.strokeStyle="black",C.lineWidth=1,h.getTriangles().forEach(function(N,W,K){const d=N.target,$=(d[0][0]-k[0])/r,B=-(d[0][1]-k[1])/r,ot=(d[1][0]-k[0])/r,mt=-(d[1][1]-k[1])/r,dt=(d[2][0]-k[0])/r,Z=-(d[2][1]-k[1])/r;C.beginPath(),C.moveTo(ot,mt),C.lineTo($,B),C.lineTo(dt,Z),C.closePath(),C.stroke()}),C.restore()),C.canvas}class ip extends ph{constructor(t,e,i,n,r,a,h,c,g,p,y,C){super(r,it.IDLE,{interpolate:!!C}),this.renderEdges_=y!==void 0?y:!1,this.pixelRatio_=h,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=n,this.wrappedTileCoord_=a||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const T=n.getTileCoordExtent(this.wrappedTileCoord_),E=this.targetTileGrid_.getExtent();let w=this.sourceTileGrid_.getExtent();const L=E?jn(T,E):T;if(zr(L)===0){this.state=it.EMPTY;return}const I=t.getExtent();I&&(w?w=jn(w,I):w=I);const P=n.getResolution(this.wrappedTileCoord_[0]),k=tp(t,i,L,P);if(!isFinite(k)||k<=0){this.state=it.EMPTY;return}const N=p!==void 0?p:Zg;if(this.triangulation_=new Jg(t,i,L,w,k*N,P),this.triangulation_.getTriangles().length===0){this.state=it.EMPTY;return}this.sourceZ_=e.getZForResolution(k);let W=this.triangulation_.calculateSourceExtent();if(w&&(t.canWrapX()?(W[1]=Wt(W[1],w[1],w[3]),W[3]=Wt(W[3],w[1],w[3])):W=jn(W,w)),!zr(W))this.state=it.EMPTY;else{const K=e.getTileRangeForExtentAndZ(W,this.sourceZ_);for(let d=K.minX;d<=K.maxX;d++)for(let $=K.minY;$<=K.maxY;$++){const B=g(this.sourceZ_,d,$,h);B&&this.sourceTiles_.push(B)}this.sourceTiles_.length===0&&(this.state=it.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(function(e,i,n){e&&e.getState()==it.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,t.length===0)this.state=it.ERROR;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n=typeof i=="number"?i:i[0],r=typeof i=="number"?i:i[1],a=this.targetTileGrid_.getResolution(e),h=this.sourceTileGrid_.getResolution(this.sourceZ_),c=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=ep(n,r,this.pixelRatio_,h,this.sourceTileGrid_.getExtent(),a,c,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=it.LOADED}this.changed()}load(){if(this.state==it.IDLE){this.state=it.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,n){const r=e.getState();if(r==it.IDLE||r==it.LOADING){t++;const a=xt(e,ct.CHANGE,function(h){const c=e.getState();(c==it.LOADED||c==it.ERROR||c==it.EMPTY)&&(Ot(a),t--,t===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(a)}}.bind(this)),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(e,i,n){e.getState()==it.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(Ot),this.sourcesListenerKeys_=null}release(){this.canvas_&&(ql(this.canvas_.getContext("2d")),Ah.push(this.canvas_),this.canvas_=null),super.release()}}const oo=ip;class np extends lh{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=pe(),this.tmpTileRange_=new Ih(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return i==it.LOADED||i==it.EMPTY||i==it.ERROR&&!n}getTile(t,e,i,n){const r=n.pixelRatio,a=n.viewState.projection,h=this.getLayer();let g=h.getSource().getTile(t,e,i,r,a);return g.getState()==it.ERROR&&h.getUseInterimTilesOnError()&&h.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(g)||(g=g.getInterimTile()),g}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),n=Kt(e.pixelToCoordinateTransform,t.slice()),r=i.getExtent();if(r&&!Js(r,n))return null;const a=e.pixelRatio,h=e.viewState.projection,c=e.viewState,g=i.getRenderSource(),p=g.getTileGridForProjection(c.projection),y=g.getTilePixelRatio(e.pixelRatio);for(let C=p.getZForResolution(c.resolution);C>=p.getMinZoom();--C){const T=p.getTileCoordForCoordAndZ(n,C),E=g.getTile(C,T[1],T[2],a,h);if(!(E instanceof _h||E instanceof oo)||E instanceof oo&&E.getState()===it.EMPTY)return null;if(E.getState()!==it.LOADED)continue;const w=p.getOrigin(C),L=ae(p.getTileSize(C)),I=p.getResolution(C),P=Math.floor(y*((n[0]-w[0])/I-T[1]*L[0])),k=Math.floor(y*((w[1]-n[1])/I-T[2]*L[1])),N=Math.round(y*g.getGutterForProjection(c.projection));return this.getImageData(E.getImage(),P+N,k+N)}return null}loadedTileCallback(t,e,i){return this.isDrawableTile(i)?super.loadedTileCallback(t,e,i):!1}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex],n=t.viewState,r=n.projection,a=n.resolution,h=n.center,c=n.rotation,g=t.pixelRatio,p=this.getLayer(),y=p.getSource(),C=y.getRevision(),T=y.getTileGridForProjection(r),E=T.getZForResolution(a,y.zDirection),w=T.getResolution(E);let L=t.extent;const I=t.viewState.resolution,P=y.getTilePixelRatio(g),k=Math.round(Pt(L)/I*g),N=Math.round(Be(L)/I*g),W=i.extent&&ji(i.extent);W&&(L=jn(L,ji(i.extent)));const K=w*k/2/P,d=w*N/2/P,$=[h[0]-K,h[1]-d,h[0]+K,h[1]+d],B=T.getTileRangeForExtentAndZ(L,E),ot={};ot[E]={};const mt=this.createLoadedTileFinder(y,r,ot),dt=this.tmpExtent,Z=this.tmpTileRange_;this.newTiles_=!1;const At=c?Hr(n.center,I,c,t.size):void 0;for(let Zt=B.minX;Zt<=B.maxX;++Zt)for(let Ct=B.minY;Ct<=B.maxY;++Ct){if(c&&!T.tileCoordIntersectsViewport([E,Zt,Ct],At))continue;const wt=this.getTile(E,Zt,Ct,t);if(this.isDrawableTile(wt)){const Xt=vt(this);if(wt.getState()==it.LOADED){ot[E][wt.tileCoord.toString()]=wt;let ye=wt.inTransition(Xt);ye&&i.opacity!==1&&(wt.endTransition(Xt),ye=!1),!this.newTiles_&&(ye||!this.renderedTiles.includes(wt))&&(this.newTiles_=!0)}if(wt.getAlpha(Xt,t.time)===1)continue}const Pe=T.getTileCoordChildTileRange(wt.tileCoord,Z,dt);let me=!1;Pe&&(me=mt(E+1,Pe)),me||T.forEachTileCoordParentTileRange(wt.tileCoord,mt,Z,dt)}const Q=w/a*g/P;Si(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/g,1/g,c,-k/2,-N/2);const tt=Cl(this.pixelTransform);this.useContainer(e,tt,this.getBackground(t));const H=this.context,ht=H.canvas;go(this.inversePixelTransform,this.pixelTransform),Si(this.tempTransform,k/2,N/2,Q,Q,0,-k/2,-N/2),ht.width!=k||ht.height!=N?(ht.width=k,ht.height=N):this.containerReused||H.clearRect(0,0,k,N),W&&this.clipUnrotated(H,t,W),y.getInterpolate()||(H.imageSmoothingEnabled=!1),this.preRender(H,t),this.renderedTiles.length=0;let Tt=Object.keys(ot).map(Number);Tt.sort(Ui);let Rt,kt,Y;i.opacity===1&&(!this.containerReused||y.getOpaque(t.viewState.projection))?Tt=Tt.reverse():(Rt=[],kt=[]);for(let Zt=Tt.length-1;Zt>=0;--Zt){const Ct=Tt[Zt],wt=y.getTilePixelSize(Ct,g,r),me=T.getResolution(Ct)/w,Xt=wt[0]*me*Q,ye=wt[1]*me*Q,qt=T.getTileCoordForCoordAndZ($i($),Ct),Qi=T.getTileCoordExtent(qt),ge=Kt(this.tempTransform,[P*(Qi[0]-$[0])/w,P*($[3]-Qi[3])/w]),Ue=P*y.getGutterForProjection(r),Te=ot[Ct];for(const Ii in Te){const xe=Te[Ii],Ve=xe.tileCoord,le=qt[1]-Ve[1],tn=Math.round(ge[0]-(le-1)*Xt),li=qt[2]-Ve[2],Rn=Math.round(ge[1]-(li-1)*ye),Mt=Math.round(ge[0]-le*Xt),Ht=Math.round(ge[1]-li*ye),$t=tn-Mt,q=Rn-Ht,Nt=E===Ct,Ke=Nt&&xe.getAlpha(vt(this),t.time)!==1;let Oe=!1;if(!Ke)if(Rt){Y=[Mt,Ht,Mt+$t,Ht,Mt+$t,Ht+q,Mt,Ht+q];for(let hi=0,bi=Rt.length;hi<bi;++hi)if(E!==Ct&&Ct<kt[hi]){const Ut=Rt[hi];fe([Mt,Ht,Mt+$t,Ht+q],[Ut[0],Ut[3],Ut[4],Ut[7]])&&(Oe||(H.save(),Oe=!0),H.beginPath(),H.moveTo(Y[0],Y[1]),H.lineTo(Y[2],Y[3]),H.lineTo(Y[4],Y[5]),H.lineTo(Y[6],Y[7]),H.moveTo(Ut[6],Ut[7]),H.lineTo(Ut[4],Ut[5]),H.lineTo(Ut[2],Ut[3]),H.lineTo(Ut[0],Ut[1]),H.clip())}Rt.push(Y),kt.push(Ct)}else H.clearRect(Mt,Ht,$t,q);this.drawTileImage(xe,t,Mt,Ht,$t,q,Ue,Nt),Rt&&!Ke?(Oe&&H.restore(),this.renderedTiles.unshift(xe)):this.renderedTiles.push(xe),this.updateUsedTiles(t.usedTiles,y,xe)}}return this.renderedRevision=C,this.renderedResolution=w,this.extentChanged=!this.renderedExtent_||!zn(this.renderedExtent_,$),this.renderedExtent_=$,this.renderedPixelRatio=g,this.renderedProjection=r,this.manageTilePyramid(t,y,T,g,r,L,E,p.getPreload()),this.scheduleExpireCache(t,y),this.postRender(H,t),i.extent&&H.restore(),H.imageSmoothingEnabled=!0,tt!==ht.style.transform&&(ht.style.transform=tt),this.container}drawTileImage(t,e,i,n,r,a,h,c){const g=this.getTileImage(t);if(!g)return;const p=vt(this),y=e.layerStatesArray[e.layerIndex],C=y.opacity*(c?t.getAlpha(p,e.time):1),T=C!==this.context.globalAlpha;T&&(this.context.save(),this.context.globalAlpha=C),this.context.drawImage(g,h,h,g.width-2*h,g.height-2*h,i,n,r,a),T&&this.context.restore(),C!==y.opacity?e.animate=!0:c&&t.endTransition(p)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const i=function(n,r,a){const h=vt(n);h in a.usedTiles&&n.expireCache(a.viewState.projection,a.usedTiles[h])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){const n=vt(e);n in t||(t[n]={}),t[n][i.getKey()]=!0}manageTilePyramid(t,e,i,n,r,a,h,c,g){const p=vt(e);p in t.wantedTiles||(t.wantedTiles[p]={});const y=t.wantedTiles[p],C=t.tileQueue,T=i.getMinZoom(),E=t.viewState.rotation,w=E?Hr(t.viewState.center,t.viewState.resolution,E,t.size):void 0;let L=0,I,P,k,N,W,K;for(K=T;K<=h;++K)for(P=i.getTileRangeForExtentAndZ(a,K,P),k=i.getResolution(K),N=P.minX;N<=P.maxX;++N)for(W=P.minY;W<=P.maxY;++W)E&&!i.tileCoordIntersectsViewport([K,N,W],w)||(h-K<=c?(++L,I=e.getTile(K,N,W,n,r),I.getState()==it.IDLE&&(y[I.getKey()]=!0,C.isKeyQueued(I.getKey())||C.enqueue([I,p,i.getTileCoordCenter(I.tileCoord),k])),g!==void 0&&g(I)):e.useTile(K,N,W,r));e.updateCacheSize(L,r)}}const sp=np,Ls={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"},rp=[0,0,0],mi=5;class op{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,ft(bc(this.resolutions_,function(n,r){return r-n},!0),17);let e;if(!t.origins){for(let n=0,r=this.resolutions_.length-1;n<r;++n)if(!e)e=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,ft(this.origins_.length==this.resolutions_.length,20));const i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=$i(i)),ft(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,ft(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:Wo,ft(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(n,r){const a=new Ih(Math.min(0,n[0]),Math.max(n[0]-1,-1),Math.min(0,n[1]),Math.max(n[1]-1,-1));if(i){const h=this.getTileRangeForExtentAndZ(i,r);a.minX=Math.max(h.minX,a.minX),a.maxX=Math.min(h.maxX,a.maxX),a.minY=Math.max(h.minY,a.minY),a.maxY=Math.min(h.maxY,a.maxY)}return a},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const n=this.getTileRangeForExtentAndZ(t,e);for(let r=n.minX,a=n.maxX;r<=a;++r)for(let h=n.minY,c=n.maxY;h<=c;++h)i([e,r,h])}forEachTileCoordParentTileRange(t,e,i,n){let r,a,h,c=null,g=t[0]-1;for(this.zoomFactor_===2?(a=t[1],h=t[2]):c=this.getTileCoordExtent(t,n);g>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),h=Math.floor(h/2),r=cn(a,a,h,h,i)):r=this.getTileRangeForExtentAndZ(c,g,i),e(g,r))return!0;--g}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const r=t[1]*2,a=t[2]*2;return cn(r,r+1,a,a+1,e)}const n=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const n=t[0],r=t[1],a=t[2];if(e===n)return cn(r,a,r,a,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,e-n),g=Math.floor(r*c),p=Math.floor(a*c);if(e<n)return cn(g,g,p,p,i);const y=Math.floor(c*(r+1))-1,C=Math.floor(c*(a+1))-1;return cn(g,y,p,C,i)}const h=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(h,e,i)}getTileRangeExtent(t,e,i){const n=this.getOrigin(t),r=this.getResolution(t),a=ae(this.getTileSize(t),this.tmpSize_),h=n[0]+e.minX*a[0]*r,c=n[0]+(e.maxX+1)*a[0]*r,g=n[1]+e.minY*a[1]*r,p=n[1]+(e.maxY+1)*a[1]*r;return ze(h,g,c,p,i)}getTileRangeForExtentAndZ(t,e,i){const n=rp;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);const r=n[1],a=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),cn(r,n[1],a,n[2],i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=ae(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=ae(this.getTileSize(t[0]),this.tmpSize_),a=i[0]+t[1]*r[0]*n,h=i[1]-(t[2]+1)*r[1]*n,c=a+r[0]*n,g=h+r[1]*n;return ze(a,h,c,g,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,n,r){const a=this.getZForResolution(i),h=i/this.getResolution(a),c=this.getOrigin(a),g=ae(this.getTileSize(a),this.tmpSize_);let p=h*(t-c[0])/i/g[0],y=h*(c[1]-e)/i/g[1];return n?(p=vs(p,mi)-1,y=vs(y,mi)-1):(p=Es(p,mi),y=Es(y,mi)),ul(a,p,y,r)}getTileCoordForXYAndZ_(t,e,i,n,r){const a=this.getOrigin(i),h=this.getResolution(i),c=ae(this.getTileSize(i),this.tmpSize_);let g=(t-a[0])/h/c[0],p=(a[1]-e)/h/c[1];return n?(g=vs(g,mi)-1,p=vs(p,mi)-1):(g=Es(g,mi),p=Es(p,mi)),ul(i,g,p,r)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const i=co(this.resolutions_,t,e||0);return Wt(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return Wl(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i}}const ap=op,Xr={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};function Mh(s){let t=s.getDefaultTileGrid();return t||(t=up(s),s.setDefaultTileGrid(t)),t}function lp(s,t,e){const i=t[0],n=s.getTileCoordCenter(t),r=Ph(e);if(Js(r,n))return t;{const a=Pt(r),h=Math.ceil((r[0]-n[0])/a);return n[0]+=a*h,s.getTileCoordForCoordAndZ(n,i)}}function hp(s,t,e,i){i=i!==void 0?i:"top-left";const n=cp(s,t,e);return new ap({extent:s,origin:Zc(s,i),resolutions:n,tileSize:e})}function cp(s,t,e,i){t=t!==void 0?t:Wf,e=ae(e!==void 0?e:Wo);const n=Be(s),r=Pt(s);i=i>0?i:Math.max(r/e[0],n/e[1]);const a=t+1,h=new Array(a);for(let c=0;c<a;++c)h[c]=i/Math.pow(2,c);return h}function up(s,t,e,i){const n=Ph(s);return hp(n,t,e,i)}function Ph(s){s=Bt(s);let t=s.getExtent();if(!t){const e=180*Bn.degrees/s.getMetersPerUnit();t=ze(-e,-e,e,e)}return t}class dp extends dh{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=t.opaque!==void 0?t.opaque:!1,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&ae(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new wh(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,n){const r=this.getTileCacheForProjection(t);if(!r)return!1;let a=!0,h,c,g;for(let p=i.minX;p<=i.maxX;++p)for(let y=i.minY;y<=i.maxY;++y)c=lr(e,p,y),g=!1,r.containsKey(c)&&(h=r.get(c),g=h.getState()===it.LOADED,g&&(g=n(h)!==!1)),g||(a=!1);return a}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(t,e,i,n,r){return rt()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Mh(t)}getTileCacheForProjection(t){const e=this.getProjection();return ft(e===null||Gi(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const n=this.getTileGridForProjection(i),r=this.getTilePixelRatio(e),a=ae(n.getTileSize(t),this.tmpSize);return r==1?a:Ul(a,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=e!==void 0?e:this.getProjection();const i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=lp(i,t,e)),Yg(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,n){}}class fp extends ai{constructor(t,e){super(t),this.tile=e}}const gp=dp;function pp(s,t){const e=/\{z\}/g,i=/\{x\}/g,n=/\{y\}/g,r=/\{-y\}/g;return function(a,h,c){if(a)return s.replace(e,a[0].toString()).replace(i,a[1].toString()).replace(n,a[2].toString()).replace(r,function(){const g=a[0],p=t.getFullTileRange(g);return ft(p,55),(p.getHeight()-a[2]-1).toString()})}}function _p(s,t){const e=s.length,i=new Array(e);for(let n=0;n<e;++n)i[n]=pp(s[n],t);return mp(i)}function mp(s){return s.length===1?s[0]:function(t,e,i){if(t){const n=Rh(t),r=Bi(n,s.length);return s[r](t,e,i)}else return}}function yp(s){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(s);if(e){const i=e[1].charCodeAt(0),n=e[2].charCodeAt(0);let r;for(r=i;r<=n;++r)t.push(s.replace(e[0],String.fromCharCode(r)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(s),e){const i=parseInt(e[2],10);for(let n=parseInt(e[1],10);n<=i;n++)t.push(s.replace(e[0],n.toString()));return t}return t.push(s),t}class Ko extends gp{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Ko.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=vt(e),n=e.getState();let r;n==it.LOADING?(this.tileLoadingKeys_[i]=!0,r=Xr.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=n==it.ERROR?Xr.TILELOADERROR:n==it.LOADED?Xr.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new fp(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=yp(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(_p(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const n=lr(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}const xp=Ko;class Cp extends Bg{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(As(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(As(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return rt()}readFeaturesFromObject(t,e){return rt()}readGeometry(t,e){return this.readGeometryFromObject(As(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return rt()}readProjection(t){return this.readProjectionFromObject(As(t))}readProjectionFromObject(t){return rt()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return rt()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return rt()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return rt()}}function As(s){if(typeof s=="string"){const t=JSON.parse(s);return t||null}else return s!==null?s:null}const Ep=Cp;class vp extends Ep{constructor(t){t=t||{},super(),this.dataProjection=Bt(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=Bt(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;t.type==="Feature"?i=t:i={type:"Feature",geometry:t,properties:null};const n=ao(i.geometry,e),r=new kc;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&r.setGeometryName(i.geometry_name),r.setGeometry(n),"id"in i&&r.setId(i.id),i.properties&&r.setProperties(i.properties,!0),r}readFeaturesFromObject(t,e){const i=t;let n=null;if(i.type==="FeatureCollection"){const r=t;n=[];const a=r.features;for(let h=0,c=a.length;h<c;++h)n.push(this.readFeatureFromObject(a[h],e))}else n=[this.readFeatureFromObject(t,e)];return n}readGeometryFromObject(t,e){return ao(t,e)}readProjectionFromObject(t){const e=t.crs;let i;return e?e.type=="name"?i=Bt(e.properties.name):e.type==="EPSG"?i=Bt("EPSG:"+e.properties.code):ft(!1,36):i=this.dataProjection,i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},n=t.getId();if(n!==void 0&&(i.id=n),!t.hasProperties())return i;const r=t.getProperties(),a=t.getGeometry();return a&&(i.geometry=lo(a,e),delete r[t.getGeometryName()]),xn(r)||(i.properties=r),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let n=0,r=t.length;n<r;++n)i.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return lo(t,this.adaptOptions(e))}}function ao(s,t){if(!s)return null;let e;switch(s.type){case"Point":{e=Rp(s);break}case"LineString":{e=wp(s);break}case"Polygon":{e=Lp(s);break}case"MultiPoint":{e=Ip(s);break}case"MultiLineString":{e=Sp(s);break}case"MultiPolygon":{e=bp(s);break}case"GeometryCollection":{e=Tp(s);break}default:throw new Error("Unsupported GeoJSON type: "+s.type)}return bh(e,!1,t)}function Tp(s,t){const e=s.geometries.map(function(i){return ao(i,t)});return new Kg(e)}function Rp(s){return new Ns(s.coordinates)}function wp(s){return new Jr(s.coordinates)}function Sp(s){return new Hg(s.coordinates)}function Ip(s){return new Lh(s.coordinates)}function bp(s){return new Vg(s.coordinates)}function Lp(s){return new Gs(s.coordinates)}function lo(s,t){s=bh(s,!0,t);const e=s.getType();let i;switch(e){case"Point":{i=Fp(s);break}case"LineString":{i=Mp(s);break}case"Polygon":{i=kp(s,t);break}case"MultiPoint":{i=Op(s);break}case"MultiLineString":{i=Pp(s);break}case"MultiPolygon":{i=Dp(s,t);break}case"GeometryCollection":{i=Ap(s,t);break}case"Circle":{i={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return i}function Ap(s,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:s.getGeometriesArray().map(function(i){return lo(i,t)})}}function Mp(s,t){return{type:"LineString",coordinates:s.getCoordinates()}}function Pp(s,t){return{type:"MultiLineString",coordinates:s.getCoordinates()}}function Op(s,t){return{type:"MultiPoint",coordinates:s.getCoordinates()}}function Dp(s,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:s.getCoordinates(e)}}function Fp(s,t){return{type:"Point",coordinates:s.getCoordinates()}}function kp(s,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:s.getCoordinates(e)}}const Oh=vp;class Np extends xp{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Gp,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:_h,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const n in this.tileCacheForProjection){const r=this.tileCacheForProjection[n];r.expireCache(r==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!Gi(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return this.getProjection()&&t&&!Gi(this.getProjection(),t)?!1:super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||Gi(e,t)))return this.tileGrid;{const i=vt(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Mh(t)),this.tileGridForProjection[i]}}getTileCacheForProjection(t){const e=this.getProjection();if(!e||Gi(e,t))return this.tileCache;{const i=vt(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new wh(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}}createTile_(t,e,i,n,r,a){const h=[t,e,i],c=this.getTileCoordForTileUrlFunction(h,r),g=c?this.tileUrlFunction(c,n,r):void 0,p=new this.tileClass(h,g!==void 0?it.IDLE:it.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return p.key=a,p.addEventListener(ct.CHANGE,this.handleTileChange.bind(this)),p}getTile(t,e,i,n,r){const a=this.getProjection();if(!a||!r||Gi(a,r))return this.getTileInternal(t,e,i,n,a||r);{const h=this.getTileCacheForProjection(r),c=[t,e,i];let g;const p=Th(c);h.containsKey(p)&&(g=h.get(p));const y=this.getKey();if(g&&g.key==y)return g;{const C=this.getTileGridForProjection(a),T=this.getTileGridForProjection(r),E=this.getTileCoordForTileUrlFunction(c,r),w=new oo(a,C,r,T,c,E,this.getTilePixelRatio(n),this.getGutter(),function(L,I,P,k){return this.getTileInternal(L,I,P,k,a)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return w.key=y,g?(w.interimTile=g,w.refreshInterimChain(),h.replace(p,w)):h.set(p,w),w}}}getTileInternal(t,e,i,n,r){let a=null;const h=lr(t,e,i),c=this.getKey();if(!this.tileCache.containsKey(h))a=this.createTile_(t,e,i,n,r,c),this.tileCache.set(h,a);else if(a=this.tileCache.get(h),a.key!=c){const g=a;a=this.createTile_(t,e,i,n,r,c),g.getState()==it.IDLE?a.interimTile=g.interimTile:a.interimTile=g,a.refreshInterimChain(),this.tileCache.replace(h,a)}return a}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){const i=Bt(t);if(i){const n=vt(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function Gp(s,t){s.getImage().src=t}const jp=Np;class Wp extends or{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getPreload(){return this.get(Ls.PRELOAD)}setPreload(t){this.set(Ls.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(Ls.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(Ls.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const Xp=Wp;class Yp extends Xp{constructor(t){super(t)}createRenderer(){return new sp(this)}}const zp=Yp,Ms="1.3.0";function pl(s,t){const e=[];Object.keys(t).forEach(function(n){t[n]!==null&&t[n]!==void 0&&e.push(n+"="+encodeURIComponent(t[n]))});const i=e.join("&");return s=s.replace(/[?&]$/,""),s+=s.includes("?")?"&":"?",s+i}class Bp extends jp{constructor(t){t=t||{};const e=Object.assign({},t.params),i="TRANSPARENT"in e?e.TRANSPARENT:!0;super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!i,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=t.hidpi!==void 0?t.hidpi:!0,this.tmpExtent_=pe(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,n){const r=Bt(i),a=this.getProjection();let h=this.getTileGrid();h||(h=this.getTileGridForProjection(r));const c=h.getZForResolution(e,this.zDirection),g=h.getTileCoordForCoordAndZ(t,c);if(h.getResolutions().length<=g[0])return;let p=h.getResolution(g[0]),y=h.getTileCoordExtent(g,this.tmpExtent_),C=ae(h.getTileSize(g[0]),this.tmpSize);const T=this.gutter_;T!==0&&(C=Ga(C,T,this.tmpSize),y=Yn(y,p*T,y)),a&&a!==r&&(p=ro(a,r,t,p),y=Eu(y,r,a),t=Ml(t,r,a));const E={SERVICE:"WMS",VERSION:Ms,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(E,this.params_,n);const w=Math.floor((t[0]-y[0])/p),L=Math.floor((y[3]-t[1])/p);return E[this.v13_?"I":"X"]=w,E[this.v13_?"J":"Y"]=L,this.getRequestUrl_(g,C,y,1,a||r,E)}getLegendUrl(t,e){if(this.urls[0]===void 0)return;const i={SERVICE:"WMS",VERSION:Ms,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e===void 0||e.LAYER===void 0){const n=this.params_.LAYERS;if(!(!Array.isArray(n)||n.length===1))return;i.LAYER=n}if(t!==void 0){const n=this.getProjection()?this.getProjection().getMetersPerUnit():1,r=28e-5;i.SCALE=t*n/r}return Object.assign(i,e),pl(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,n,r,a){const h=this.urls;if(!h)return;if(a.WIDTH=e[0],a.HEIGHT=e[1],a[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(a.STYLES=""),n!=1)switch(this.serverType_){case"geoserver":const y=90*n+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+y:a.FORMAT_OPTIONS="dpi:"+y;break;case"mapserver":a.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":a.DPI=90*n;break;default:ft(!1,52);break}const c=r.getAxisOrientation(),g=i;if(this.v13_&&c.substr(0,2)=="ne"){let y;y=i[0],g[0]=i[1],g[1]=y,y=i[2],g[2]=i[3],g[3]=y}a.BBOX=g.join(",");let p;if(h.length==1)p=h[0];else{const y=Bi(Rh(t),h.length);p=h[y]}return pl(p,a)}getTilePixelRatio(t){return!this.hidpi_||this.serverType_===void 0?1:t}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const t=this.params_.VERSION||Ms;this.v13_=du(t,"1.3")>=0}tileUrlFunction(t,e,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=t[0])return;e!=1&&(!this.hidpi_||this.serverType_===void 0)&&(e=1);const r=n.getResolution(t[0]);let a=n.getTileCoordExtent(t,this.tmpExtent_),h=ae(n.getTileSize(t[0]),this.tmpSize);const c=this.gutter_;c!==0&&(h=Ga(h,c,this.tmpSize),a=Yn(a,r*c,a)),e!=1&&(h=Ul(h,e,this.tmpSize));const g={SERVICE:"WMS",VERSION:Ms,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(g,this.params_),this.getRequestUrl_(t,h,a,e,i,g)}}const Hp=Bp,Up=new fh({format:new Oh,url:function(s){return"https://wms.qgiscloud.com/peterbetlem/rnd?service=WFS&request=GetFeature&typename=doms&outputformat=geojson"},attributions:'Â© <a href="https://peterbetlem.github.io"target="_blank">BetlemTech / geomonkey AS</a>'}),Vp=new fh({format:new Oh,url:function(s){return"https://wms.qgiscloud.com/peterbetlem/rnd?service=WFS&request=GetFeature&typename=photo_sphere&outputformat=geojson"},attributions:'Â© <a href="https://peterbetlem.github.io"target="_blank">BetlemTech / geomonkey AS</a>'}),Kp=new uh({source:Up,style:new En({stroke:new rs({color:"rgba(0, 0, 255, 1.0)",width:2}),fill:new vn({color:"rgba(0, 0, 255, 0.3)",width:2})}),title:"test"}),Zp=new uh({source:Vp}),qp=new zp({source:new Hp({url:"https://wms.geo.admin.ch/",params:{LAYERS:"ch.swisstopo.pixelkarte-farbe",FORMAT:"image/jpeg"},attributions:'Â© <a href="https://wms.geo.admin.ch/?REQUEST=GetCapabilities&SERVICE=WMS&VERSION=1.0.0"target="_blank">swisstopo / geo.admin.ch</a>',serverType:"mapserver",crossOrigin:"anonymous",transition:0})}),Dh=new Gg({target:"map",layers:[qp,Kp,Zp],view:new Ei({center:[11208857548e-4,58896443389e-4],zoom:9})}),$p=new En({fill:new vn({color:"rgba(0, 0, 255, 0.7)"}),stroke:new rs({color:[0,153,255,1],width:3})}),Jp=new En({image:new Fo({radius:7,fill:new vn({color:"black"}),stroke:new rs({color:[255,0,0],width:2})})});let ne;const Qp=function(s){ne&&ne.setStyle(null),ne=Dh.forEachFeatureAtPixel(s,(e,i)=>e);const t=document.getElementById("info");if(ne)switch(console.log(t.innerHTML),ne.getGeometry().getType()){case"MultiPolygon":console.log("MP"),ne.setStyle($p),ne.values_.doi?t.innerHTML='<center>Copyright and use policy:<br><a href="https://doi.org/'+ne.values_.doi+'" target=blank>https://doi.org/'+ne.values_.doi+"</a></center>":t.innerHTML="",t.innerHTML=t.innerHTML+'<br><div class="sketchfab-embed-wrapper"> <iframe style="width:100%;height:400px;" frameborder="0" allowfullscreen mozallowfullscreen="true" webkitallowfullscreen="true" allow="autoplay; fullscreen; xr-spatial-tracking" xr-spatial-tracking execution-while-out-of-viewport execution-while-not-rendered web-share src="https://sketchfab.com/models/'+ne.values_.publ_sketchfab_id+'/embed"></iframe></div>';break;case"Point":console.log("Point"),ne.setStyle(Jp),t.innerHTML='<center>Copyright and use policy:<br><a href="https://doi.org/10.5281/zenodo.'+ne.values_.doi+'" target=blank><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.'+ne.values_.doi+'.svg" alt="DOI"></a></center><center><a href="https://zenodo.org/record/'+ne.values_.doi+"/files/"+ne.values_.uid+'.jpg?download=1" target=_blank>Download Full Resolution </a><br><br><div class="sketchfab-embed-wrapper"> <iframe style="width:100%;height:100%;" allowfullscreen style="border-style:none;" src="https://cdn.pannellum.org/2.5/pannellum.htm#panorama='+ne.values_.api_link+'&autoLoad=false"></iframe></div>';break}};Dh.on("click",s=>{Qp(s.pixel)});
//# sourceMappingURL=index-7a545553.js.map
